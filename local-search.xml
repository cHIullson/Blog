<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>åŸºäºå­¤ç«‹æ£®æ—ç®—æ³•çš„CTRMç³»ç»Ÿå¼‚å¸¸äº¤æ˜“æ£€æµ‹</title>
    <link href="/2025/09/02/ai-anomaly-detection-ctrm/"/>
    <url>/2025/09/02/ai-anomaly-detection-ctrm/</url>
    
    <content type="html"><![CDATA[<div class="language-switcher" style="text-align: right; margin-bottom: 20px;">  <span style="margin-right: 10px;">ğŸŒ Language / è¯­è¨€:</span>  <a href="#" style="color: #333; font-weight: bold; text-decoration: none; margin-right: 10px;">ä¸­æ–‡</a>  <a href="/2025/09/02/ai-anomaly-detection-ctrm.en/" style="color: #0066cc; text-decoration: none;">English</a></div><h1 id="åŸºäºå­¤ç«‹æ£®æ—ç®—æ³•çš„CTRMç³»ç»Ÿå¼‚å¸¸äº¤æ˜“æ£€æµ‹"><a href="#åŸºäºå­¤ç«‹æ£®æ—ç®—æ³•çš„CTRMç³»ç»Ÿå¼‚å¸¸äº¤æ˜“æ£€æµ‹" class="headerlink" title="åŸºäºå­¤ç«‹æ£®æ—ç®—æ³•çš„CTRMç³»ç»Ÿå¼‚å¸¸äº¤æ˜“æ£€æµ‹"></a>åŸºäºå­¤ç«‹æ£®æ—ç®—æ³•çš„CTRMç³»ç»Ÿå¼‚å¸¸äº¤æ˜“æ£€æµ‹</h1><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>éšç€å¤§å®—å•†å“äº¤æ˜“å¸‚åœºçš„å¤æ‚æ€§å’Œäº¤æ˜“é‡çš„ä¸æ–­å¢é•¿ï¼Œä¼ ç»Ÿçš„åŸºäºè§„åˆ™çš„é£é™©ç®¡æ§æ–¹æ³•å·²éš¾ä»¥æ»¡è¶³ç°ä»£CTRMï¼ˆCommodity Trading and Risk Managementï¼‰ç³»ç»Ÿçš„éœ€æ±‚ã€‚<strong>äººå·¥æ™ºèƒ½æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ä¸ºé‡‘èé£é™©ç®¡æ§å¸¦æ¥äº†é©å‘½æ€§çš„å˜é©æœºé‡</strong>ã€‚æœ¬æ–‡é‡ç‚¹ä»‹ç»äº†ä¸€ç§åŸºäºå­¤ç«‹æ£®æ—ï¼ˆIsolation Forestï¼‰ç®—æ³•çš„<strong>AIé©±åŠ¨çš„æ™ºèƒ½å¼‚å¸¸äº¤æ˜“æ£€æµ‹æ–¹æ¡ˆ</strong>ï¼Œé€šè¿‡<strong>æ·±åº¦æœºå™¨å­¦ä¹ æŠ€æœ¯å’Œæ™ºèƒ½ç®—æ³•</strong>è‡ªåŠ¨è¯†åˆ«äº¤æ˜“è¡Œä¸ºæ¨¡å¼ä¸­çš„å¼‚å¸¸æƒ…å†µï¼Œæ„å»º<strong>ä¸‹ä¸€ä»£AIèµ‹èƒ½çš„æ™ºèƒ½åŒ–CTRMç³»ç»Ÿ</strong>ï¼Œå……åˆ†å±•ç°äº†<strong>äººå·¥æ™ºèƒ½åœ¨ç°ä»£é‡‘èé£æ§é¢†åŸŸçš„å¼ºå¤§åº”ç”¨æ½œåŠ›</strong>ï¼Œä¸ºé£é™©ç®¡ç†äººå‘˜æä¾›æ›´åŠ ç²¾å‡†ã€åŠæ—¶å’Œæ™ºèƒ½çš„AIé¢„è­¦æœºåˆ¶ã€‚è¯¥æ–¹æ¡ˆä»£è¡¨äº†<strong>CTRMç³»ç»Ÿæ™ºèƒ½åŒ–è½¬å‹çš„é‡è¦é‡Œç¨‹ç¢‘</strong>ã€‚</p><h2 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1. å¼•è¨€"></a>1. å¼•è¨€</h2><p>åœ¨å¤§å®—å•†å“äº¤æ˜“é¢†åŸŸï¼Œå¼‚å¸¸äº¤æ˜“æ£€æµ‹æ˜¯é£é™©ç®¡æ§çš„æ ¸å¿ƒç¯èŠ‚ã€‚<strong>ä¼ ç»Ÿçš„CTRMç³»ç»Ÿæ­£é¢ä¸´ç€æ•°å­—åŒ–è½¬å‹çš„è¿«åˆ‡éœ€æ±‚</strong>ï¼Œä¸»è¦ä¾èµ–äºé¢„è®¾è§„åˆ™å’Œé˜ˆå€¼æ¥è¯†åˆ«æ½œåœ¨é£é™©çš„ä¼ ç»Ÿæ–¹æ³•å·²ç»æš´éœ²å‡ºæ˜æ˜¾çš„å±€é™æ€§ï¼š</p><ul><li><strong>é™æ€è§„åˆ™é™åˆ¶</strong>ï¼šæ— æ³•é€‚åº”å¸‚åœºç¯å¢ƒçš„åŠ¨æ€å˜åŒ–</li><li><strong>è¯¯æŠ¥ç‡é«˜</strong>ï¼šç®€å•çš„é˜ˆå€¼åˆ¤æ–­å®¹æ˜“äº§ç”Ÿå¤§é‡è¯¯æŠ¥</li><li><strong>æ¼æ£€é£é™©</strong>ï¼šå¤æ‚çš„å¼‚å¸¸æ¨¡å¼éš¾ä»¥é€šè¿‡è§„åˆ™è¦†ç›–</li><li><strong>ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼šéœ€è¦ä¸æ–­è°ƒæ•´å’Œæ›´æ–°è§„åˆ™åº“</li><li><strong>ç¼ºä¹æ™ºèƒ½åŒ–</strong>ï¼šæ— æ³•å­¦ä¹ å’Œé€‚åº”æ–°çš„äº¤æ˜“æ¨¡å¼</li></ul><p><strong>äººå·¥æ™ºèƒ½æŠ€æœ¯çš„é©å‘½æ€§çªç ´ä¸ºè§£å†³è¿™äº›æŒ‘æˆ˜æä¾›äº†å…¨æ–°çš„æ€è·¯</strong>ã€‚æˆ‘ä»¬å¼•å…¥äº†åŸºäºå­¤ç«‹æ£®æ—ç®—æ³•çš„<strong>AIé©±åŠ¨å¼‚å¸¸æ£€æµ‹èƒ½åŠ›</strong>ï¼Œæ„å»ºäº†æ›´åŠ æ™ºèƒ½ã€è‡ªé€‚åº”å’Œé«˜æ•ˆçš„<strong>æ™ºèƒ½åŒ–é£é™©ç›‘æ§ä½“ç³»</strong>ã€‚è¿™ç§<strong>AIèµ‹èƒ½çš„CTRMç³»ç»Ÿ</strong>ä¸ä»…èƒ½å¤Ÿè‡ªåŠ¨å­¦ä¹ æ­£å¸¸äº¤æ˜“æ¨¡å¼ï¼Œè¿˜èƒ½å®æ—¶è¯†åˆ«å¤æ‚çš„å¼‚å¸¸è¡Œä¸ºï¼ŒçœŸæ­£å®ç°äº†<strong>ä»è§„åˆ™é©±åŠ¨å‘æ•°æ®é©±åŠ¨ã€ä»è¢«åŠ¨ç›‘æ§å‘æ™ºèƒ½é¢„æµ‹çš„è½¬å‹</strong>ã€‚</p><h2 id="2-å­¤ç«‹æ£®æ—ç®—æ³•åŸç†"><a href="#2-å­¤ç«‹æ£®æ—ç®—æ³•åŸç†" class="headerlink" title="2. å­¤ç«‹æ£®æ—ç®—æ³•åŸç†"></a>2. å­¤ç«‹æ£®æ—ç®—æ³•åŸç†</h2><h3 id="2-1-ç®—æ³•æ¦‚è¿°"><a href="#2-1-ç®—æ³•æ¦‚è¿°" class="headerlink" title="2.1 ç®—æ³•æ¦‚è¿°"></a>2.1 ç®—æ³•æ¦‚è¿°</h3><p>å­¤ç«‹æ£®æ—ï¼ˆIsolation Forestï¼‰æ˜¯ä¸€ç§æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹ç®—æ³•ï¼Œç”±Zhouå’ŒLiuåœ¨2008å¹´æå‡ºã€‚è¯¥ç®—æ³•åŸºäºä¸€ä¸ªé‡è¦å‡è®¾ï¼šå¼‚å¸¸æ•°æ®ç‚¹æ›´å®¹æ˜“è¢«â€å­¤ç«‹â€ï¼Œå³é€šè¿‡è¾ƒå°‘çš„åˆ†å‰²æ­¥éª¤å°±èƒ½å°†å…¶ä»æ­£å¸¸æ•°æ®ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p><h3 id="2-2-æ ¸å¿ƒæ€æƒ³"><a href="#2-2-æ ¸å¿ƒæ€æƒ³" class="headerlink" title="2.2 æ ¸å¿ƒæ€æƒ³"></a>2.2 æ ¸å¿ƒæ€æƒ³</h3><ul><li><strong>éšæœºåˆ†å‰²</strong>ï¼šåœ¨ç‰¹å¾ç©ºé—´ä¸­éšæœºé€‰æ‹©ç‰¹å¾å’Œåˆ†å‰²ç‚¹</li><li><strong>è·¯å¾„é•¿åº¦</strong>ï¼šè®°å½•å°†æ•°æ®ç‚¹å­¤ç«‹æ‰€éœ€çš„åˆ†å‰²æ¬¡æ•°</li><li><strong>å¼‚å¸¸è¯„åˆ†</strong>ï¼šè·¯å¾„é•¿åº¦è¶ŠçŸ­ï¼Œå¼‚å¸¸ç¨‹åº¦è¶Šé«˜</li></ul><h3 id="2-3-ç®—æ³•ä¼˜åŠ¿"><a href="#2-3-ç®—æ³•ä¼˜åŠ¿" class="headerlink" title="2.3 ç®—æ³•ä¼˜åŠ¿"></a>2.3 ç®—æ³•ä¼˜åŠ¿</h3><ol><li><strong>æ— ç›‘ç£å­¦ä¹ </strong>ï¼šä¸éœ€è¦æ ‡æ³¨çš„å¼‚å¸¸æ ·æœ¬</li><li><strong>è®¡ç®—æ•ˆç‡é«˜</strong>ï¼šçº¿æ€§æ—¶é—´å¤æ‚åº¦</li><li><strong>å†…å­˜å ç”¨å°</strong>ï¼šåªéœ€å­˜å‚¨æ ‘ç»“æ„</li><li><strong>é€‚åº”æ€§å¼º</strong>ï¼šèƒ½å¤„ç†é«˜ç»´æ•°æ®å’Œå¤§è§„æ¨¡æ•°æ®é›†</li></ol><h2 id="3-CTRMç³»ç»Ÿä¸­çš„AIåº”ç”¨æ¶æ„"><a href="#3-CTRMç³»ç»Ÿä¸­çš„AIåº”ç”¨æ¶æ„" class="headerlink" title="3. CTRMç³»ç»Ÿä¸­çš„AIåº”ç”¨æ¶æ„"></a>3. CTRMç³»ç»Ÿä¸­çš„AIåº”ç”¨æ¶æ„</h2><h3 id="3-1-æ™ºèƒ½åŒ–ç³»ç»Ÿæ¶æ„è®¾è®¡"><a href="#3-1-æ™ºèƒ½åŒ–ç³»ç»Ÿæ¶æ„è®¾è®¡" class="headerlink" title="3.1 æ™ºèƒ½åŒ–ç³»ç»Ÿæ¶æ„è®¾è®¡"></a>3.1 æ™ºèƒ½åŒ–ç³»ç»Ÿæ¶æ„è®¾è®¡</h3><p><strong>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªå…¨æ–°çš„AIé©±åŠ¨çš„CTRMå¼‚å¸¸æ£€æµ‹æ¶æ„</strong>ï¼Œå°†äººå·¥æ™ºèƒ½èƒ½åŠ›æ·±åº¦èåˆåˆ°ä¼ ç»Ÿé£é™©ç®¡æ§æµç¨‹ä¸­ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   äº¤æ˜“æ•°æ®æº    â”‚â”€â”€â”€â†’â”‚  AIæ•°æ®é¢„å¤„ç†   â”‚â”€â”€â”€â†’â”‚  æ™ºèƒ½ç‰¹å¾å·¥ç¨‹   â”‚<br>â”‚  (å¤šæºèåˆ)     â”‚    â”‚  (è‡ªåŠ¨æ¸…æ´—)     â”‚    â”‚  (è‡ªé€‚åº”æå–)   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>                                                        â”‚<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  æ™ºèƒ½é¢„è­¦ç³»ç»Ÿ   â”‚â†â”€â”€â”€â”‚ AIå¼‚å¸¸æ£€æµ‹å¼•æ“  â”‚â†â”€â”€â”€â”‚  å®æ—¶AIç›‘æ§     â”‚<br>â”‚  (å¤šçº§é¢„è­¦)     â”‚    â”‚ (å­¤ç«‹æ£®æ—æ ¸å¿ƒ)  â”‚    â”‚  (æ¯«ç§’çº§å“åº”)   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="3-2-AIé©±åŠ¨çš„æ•°æ®æµå¤„ç†"><a href="#3-2-AIé©±åŠ¨çš„æ•°æ®æµå¤„ç†" class="headerlink" title="3.2 AIé©±åŠ¨çš„æ•°æ®æµå¤„ç†"></a>3.2 AIé©±åŠ¨çš„æ•°æ®æµå¤„ç†</h3><p><strong>æˆ‘ä»¬çš„AIç³»ç»Ÿå®ç°äº†ç«¯åˆ°ç«¯çš„æ™ºèƒ½åŒ–å¤„ç†æµç¨‹</strong>ï¼š</p><ol><li><strong>AIæ•°æ®é‡‡é›†</strong>ï¼šæ™ºèƒ½èåˆäº¤æ˜“ç³»ç»Ÿã€å¸‚åœºæ•°æ®ã€æŒä»“ä¿¡æ¯ç­‰å¤šæºæ•°æ®</li><li><strong>æ™ºèƒ½æ•°æ®æ¸…æ´—</strong>ï¼šAIç®—æ³•è‡ªåŠ¨å¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼å’Œæ•°æ®æ ¼å¼ç»Ÿä¸€</li><li><strong>AIç‰¹å¾æå–</strong>ï¼šæœºå™¨å­¦ä¹ ç®—æ³•è‡ªåŠ¨æ„å»ºå’Œä¼˜åŒ–äº¤æ˜“è¡Œä¸ºç‰¹å¾å‘é‡</li><li><strong>AIæ¨¡å‹æ¨ç†</strong>ï¼šæ·±åº¦å­¦ä¹ æ¨¡å‹å®æ—¶è®¡ç®—å¼‚å¸¸è¯„åˆ†å’Œé£é™©é¢„æµ‹</li><li><strong>æ™ºèƒ½ç»“æœè¾“å‡º</strong>ï¼šAIé©±åŠ¨çš„é¢„è­¦ä¿¡æ¯ç”Ÿæˆå’Œæ™ºèƒ½é£é™©æŠ¥å‘Š</li></ol><h3 id="3-3-AIæ ¸å¿ƒèƒ½åŠ›æ¨¡å—"><a href="#3-3-AIæ ¸å¿ƒèƒ½åŠ›æ¨¡å—" class="headerlink" title="3.3 AIæ ¸å¿ƒèƒ½åŠ›æ¨¡å—"></a>3.3 AIæ ¸å¿ƒèƒ½åŠ›æ¨¡å—</h3><p><strong>æˆ‘ä»¬çš„AIå¼‚å¸¸æ£€æµ‹ç³»ç»ŸåŒ…å«å¤šä¸ªæ ¸å¿ƒæ™ºèƒ½æ¨¡å—</strong>ï¼š</p><h4 id="3-3-1-æœºå™¨å­¦ä¹ å¼•æ“"><a href="#3-3-1-æœºå™¨å­¦ä¹ å¼•æ“" class="headerlink" title="3.3.1 æœºå™¨å­¦ä¹ å¼•æ“"></a>3.3.1 æœºå™¨å­¦ä¹ å¼•æ“</h4><ul><li><strong>è‡ªé€‚åº”å­¦ä¹ </strong>ï¼šç³»ç»Ÿèƒ½å¤ŸæŒç»­å­¦ä¹ æ–°çš„äº¤æ˜“æ¨¡å¼</li><li><strong>æ¨¡å¼è¯†åˆ«</strong>ï¼šAIç®—æ³•è‡ªåŠ¨å‘ç°éšè—çš„å¼‚å¸¸äº¤æ˜“ç‰¹å¾</li><li><strong>é¢„æµ‹åˆ†æ</strong>ï¼šåŸºäºå†å²æ•°æ®é¢„æµ‹æ½œåœ¨é£é™©</li></ul><h4 id="3-3-2-æ™ºèƒ½å†³ç­–æ”¯æŒ"><a href="#3-3-2-æ™ºèƒ½å†³ç­–æ”¯æŒ" class="headerlink" title="3.3.2 æ™ºèƒ½å†³ç­–æ”¯æŒ"></a>3.3.2 æ™ºèƒ½å†³ç­–æ”¯æŒ</h4><ul><li><strong>é£é™©è¯„ä¼°</strong>ï¼šAIæ¨¡å‹æä¾›å¤šç»´åº¦é£é™©è¯„åˆ†</li><li><strong>æ™ºèƒ½å»ºè®®</strong>ï¼šåŸºäºæœºå™¨å­¦ä¹ çš„å¤„ç½®å»ºè®®</li><li><strong>è¶‹åŠ¿é¢„æµ‹</strong>ï¼šåˆ©ç”¨AIæŠ€æœ¯é¢„æµ‹é£é™©å‘å±•è¶‹åŠ¿</li></ul><h4 id="3-3-3-è‡ªåŠ¨åŒ–å“åº”"><a href="#3-3-3-è‡ªåŠ¨åŒ–å“åº”" class="headerlink" title="3.3.3 è‡ªåŠ¨åŒ–å“åº”"></a>3.3.3 è‡ªåŠ¨åŒ–å“åº”</h4><ul><li><strong>æ™ºèƒ½é¢„è­¦</strong>ï¼šAIé©±åŠ¨çš„åˆ†çº§é¢„è­¦æœºåˆ¶</li><li><strong>è‡ªåŠ¨å¤„ç†</strong>ï¼šåŸºäºAIå†³ç­–çš„è‡ªåŠ¨é£é™©å¤„ç½®</li><li><strong>æŒç»­ä¼˜åŒ–</strong>ï¼šç³»ç»Ÿæ€§èƒ½çš„è‡ªæˆ‘å­¦ä¹ å’Œæ”¹è¿›</li></ul><h2 id="4-AIé©±åŠ¨çš„ç‰¹å¾å·¥ç¨‹è®¾è®¡"><a href="#4-AIé©±åŠ¨çš„ç‰¹å¾å·¥ç¨‹è®¾è®¡" class="headerlink" title="4. AIé©±åŠ¨çš„ç‰¹å¾å·¥ç¨‹è®¾è®¡"></a>4. AIé©±åŠ¨çš„ç‰¹å¾å·¥ç¨‹è®¾è®¡</h2><p><strong>æˆ‘ä»¬é‡‡ç”¨æ™ºèƒ½åŒ–çš„ç‰¹å¾å·¥ç¨‹æ–¹æ³•ï¼Œè®©AIç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å’Œæå–æœ€å…·é¢„æµ‹ä»·å€¼çš„ç‰¹å¾</strong>ï¼š</p><h3 id="4-1-AIè‡ªåŠ¨ç‰¹å¾å‘ç°"><a href="#4-1-AIè‡ªåŠ¨ç‰¹å¾å‘ç°" class="headerlink" title="4.1 AIè‡ªåŠ¨ç‰¹å¾å‘ç°"></a>4.1 AIè‡ªåŠ¨ç‰¹å¾å‘ç°</h3><h4 id="4-1-1-æ™ºèƒ½åŸºç¡€ç‰¹å¾æå–"><a href="#4-1-1-æ™ºèƒ½åŸºç¡€ç‰¹å¾æå–" class="headerlink" title="4.1.1 æ™ºèƒ½åŸºç¡€ç‰¹å¾æå–"></a>4.1.1 æ™ºèƒ½åŸºç¡€ç‰¹å¾æå–</h4><ul><li><strong>AIå¢å¼ºçš„äº¤æ˜“é‡åˆ†æ</strong>ï¼šæœºå™¨å­¦ä¹ ç®—æ³•è‡ªåŠ¨è¯†åˆ«äº¤æ˜“é‡å¼‚å¸¸æ¨¡å¼</li><li><strong>æ™ºèƒ½ä»·æ ¼ç‰¹å¾æŒ–æ˜</strong>ï¼šAIç³»ç»Ÿæ·±åº¦åˆ†æä»·æ ¼æ³¢åŠ¨å’Œå¸‚åœºåç¦»</li><li><strong>æ—¶åºæ™ºèƒ½åˆ†æ</strong>ï¼šåˆ©ç”¨æ·±åº¦å­¦ä¹ æ•æ‰å¤æ‚çš„æ—¶é—´åºåˆ—ç‰¹å¾</li></ul><h4 id="4-1-2-AIç”Ÿæˆçš„è¡ç”Ÿç‰¹å¾"><a href="#4-1-2-AIç”Ÿæˆçš„è¡ç”Ÿç‰¹å¾" class="headerlink" title="4.1.2 AIç”Ÿæˆçš„è¡ç”Ÿç‰¹å¾"></a>4.1.2 AIç”Ÿæˆçš„è¡ç”Ÿç‰¹å¾</h4><ul><li><strong>æ™ºèƒ½äº¤æ˜“æ¨¡å¼è¯†åˆ«</strong>ï¼šAIç®—æ³•è‡ªåŠ¨å‘ç°éšè—çš„äº¤æ˜“è¡Œä¸ºæ¨¡å¼</li><li><strong>AIå¯¹æ‰‹æ–¹ç”»åƒ</strong>ï¼šæœºå™¨å­¦ä¹ æ„å»ºæ™ºèƒ½åŒ–çš„äº¤æ˜“å¯¹æ‰‹é£é™©ç”»åƒ</li><li><strong>å¸‚åœºå…³è”æ™ºèƒ½åˆ†æ</strong>ï¼šAIç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«ä¸å¸‚åœºçš„å¤æ‚å…³è”å…³ç³»</li></ul><h3 id="4-2-AIæ™ºèƒ½é£é™©æŒ‡æ ‡æ„å»º"><a href="#4-2-AIæ™ºèƒ½é£é™©æŒ‡æ ‡æ„å»º" class="headerlink" title="4.2 AIæ™ºèƒ½é£é™©æŒ‡æ ‡æ„å»º"></a>4.2 AIæ™ºèƒ½é£é™©æŒ‡æ ‡æ„å»º</h3><p><strong>æˆ‘ä»¬çš„AIç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨æ„å»ºå’Œä¼˜åŒ–é£é™©æŒ‡æ ‡ï¼Œå®ç°çœŸæ­£çš„æ™ºèƒ½åŒ–ç‰¹å¾å·¥ç¨‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># AIå¢å¼ºçš„ç‰¹å¾å·¥ç¨‹ç¤ºä¾‹ä»£ç </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AIFeatureExtractor</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.ai_feature_selector = AutoMLFeatureSelector()<br>        <span class="hljs-variable language_">self</span>.deep_learning_encoder = DeepFeatureEncoder()<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_ai_features</span>(<span class="hljs-params">self, trade_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„æ™ºèƒ½ç‰¹å¾æå–&quot;&quot;&quot;</span><br>        features = &#123;&#125;<br>        <br>        <span class="hljs-comment"># AIè‡ªåŠ¨ç‰¹å¾å‘ç°</span><br>        auto_features = <span class="hljs-variable language_">self</span>.ai_feature_selector.discover_features(trade_data)<br>        <br>        <span class="hljs-comment"># æ·±åº¦å­¦ä¹ ç‰¹å¾ç¼–ç </span><br>        deep_features = <span class="hljs-variable language_">self</span>.deep_learning_encoder.encode(trade_data)<br>        <br>        <span class="hljs-comment"># æ™ºèƒ½äº¤æ˜“é‡åˆ†æ</span><br>        features[<span class="hljs-string">&#x27;ai_volume_anomaly&#x27;</span>] = <span class="hljs-variable language_">self</span>.ai_volume_analyzer(trade_data[<span class="hljs-string">&#x27;volume&#x27;</span>])<br>        features[<span class="hljs-string">&#x27;volume_pattern_score&#x27;</span>] = <span class="hljs-variable language_">self</span>.pattern_recognition(trade_data[<span class="hljs-string">&#x27;volume&#x27;</span>])<br>        <br>        <span class="hljs-comment"># AIä»·æ ¼å¼‚å¸¸æ£€æµ‹</span><br>        features[<span class="hljs-string">&#x27;ai_price_deviation&#x27;</span>] = <span class="hljs-variable language_">self</span>.ai_price_analyzer(trade_data[<span class="hljs-string">&#x27;price&#x27;</span>])<br>        features[<span class="hljs-string">&#x27;price_manipulation_score&#x27;</span>] = <span class="hljs-variable language_">self</span>.manipulation_detector(trade_data[<span class="hljs-string">&#x27;price&#x27;</span>])<br>        <br>        <span class="hljs-comment"># æ™ºèƒ½æ—¶åºç‰¹å¾</span><br>        features[<span class="hljs-string">&#x27;ai_temporal_pattern&#x27;</span>] = <span class="hljs-variable language_">self</span>.temporal_ai_analyzer(trade_data[<span class="hljs-string">&#x27;timestamp&#x27;</span>])<br>        features[<span class="hljs-string">&#x27;frequency_anomaly_score&#x27;</span>] = <span class="hljs-variable language_">self</span>.frequency_analyzer(trade_data)<br>        <br>        <span class="hljs-comment"># AIå¯¹æ‰‹æ–¹é£é™©è¯„ä¼°</span><br>        features[<span class="hljs-string">&#x27;ai_counterparty_risk&#x27;</span>] = <span class="hljs-variable language_">self</span>.ai_counterparty_analyzer(trade_data[<span class="hljs-string">&#x27;counterparty&#x27;</span>])<br>        <br>        <span class="hljs-comment"># æ™ºèƒ½å¸‚åœºå…³è”åˆ†æ</span><br>        features[<span class="hljs-string">&#x27;ai_market_correlation&#x27;</span>] = <span class="hljs-variable language_">self</span>.market_ai_analyzer(trade_data)<br>        <br>        <span class="hljs-keyword">return</span> &#123;**features, **auto_features, **deep_features&#125;<br></code></pre></td></tr></table></figure><h2 id="5-AIæ¨¡å‹å®ç°ä¸æ™ºèƒ½ä¼˜åŒ–"><a href="#5-AIæ¨¡å‹å®ç°ä¸æ™ºèƒ½ä¼˜åŒ–" class="headerlink" title="5. AIæ¨¡å‹å®ç°ä¸æ™ºèƒ½ä¼˜åŒ–"></a>5. AIæ¨¡å‹å®ç°ä¸æ™ºèƒ½ä¼˜åŒ–</h2><h3 id="5-1-AIå¢å¼ºçš„å¼‚å¸¸æ£€æµ‹æ¨¡å‹æ¶æ„"><a href="#5-1-AIå¢å¼ºçš„å¼‚å¸¸æ£€æµ‹æ¨¡å‹æ¶æ„" class="headerlink" title="5.1 AIå¢å¼ºçš„å¼‚å¸¸æ£€æµ‹æ¨¡å‹æ¶æ„"></a>5.1 AIå¢å¼ºçš„å¼‚å¸¸æ£€æµ‹æ¨¡å‹æ¶æ„</h3><p><strong>æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„AIé©±åŠ¨çš„å¼‚å¸¸æ£€æµ‹æ¡†æ¶ï¼Œæ·±åº¦é›†æˆäº†å¤šç§å‰æ²¿æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œæ‰“é€ äº†çœŸæ­£æ„ä¹‰ä¸Šçš„æ™ºèƒ½åŒ–é£é™©ç›‘æ§ç³»ç»Ÿ</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> IsolationForest<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">from</span> tensorflow <span class="hljs-keyword">import</span> keras<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModel<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AIEnhancedCTRMAnomalyDetector</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„CTRMå¼‚å¸¸æ£€æµ‹ç³»ç»Ÿæ ¸å¿ƒå¼•æ“&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, contamination=<span class="hljs-number">0.1</span>, n_estimators=<span class="hljs-number">100</span>, max_samples=<span class="hljs-string">&#x27;auto&#x27;</span></span>):<br>        <span class="hljs-comment"># æ ¸å¿ƒå­¤ç«‹æ£®æ—AIæ¨¡å‹</span><br>        <span class="hljs-variable language_">self</span>.isolation_forest = IsolationForest(<br>            contamination=contamination,<br>            n_estimators=n_estimators,<br>            max_samples=max_samples,<br>            random_state=<span class="hljs-number">42</span><br>        )<br>        <br>        <span class="hljs-comment"># AIå¢å¼ºå­¦ä¹ æ¨¡å—é›†æˆ</span><br>        <span class="hljs-variable language_">self</span>.deep_autoencoder = <span class="hljs-variable language_">self</span>._build_ai_autoencoder()<br>        <span class="hljs-variable language_">self</span>.transformer_encoder = <span class="hljs-variable language_">self</span>._build_transformer_encoder()<br>        <span class="hljs-variable language_">self</span>.ensemble_ai_model = <span class="hljs-variable language_">self</span>._build_ai_ensemble()<br>        <span class="hljs-variable language_">self</span>.online_learning_module = OnlineAILearningModule()<br>        <span class="hljs-variable language_">self</span>.neural_feature_extractor = NeuralFeatureExtractor()<br>        <br>        <span class="hljs-comment"># AIæ™ºèƒ½åŒ–ç»„ä»¶</span><br>        <span class="hljs-variable language_">self</span>.ai_optimizer = BayesianHyperparameterOptimizer()<br>        <span class="hljs-variable language_">self</span>.intelligent_threshold_adapter = AdaptiveThresholdAI()<br>        <span class="hljs-variable language_">self</span>.ai_explanation_engine = ExplainableAI()<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_ai_autoencoder</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ„å»ºAIå¢å¼ºçš„æ·±åº¦è‡ªç¼–ç å™¨ç”¨äºæ™ºèƒ½ç‰¹å¾å­¦ä¹ &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> keras.Sequential([<br>            keras.layers.Dense(<span class="hljs-number">128</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_encoder_1&#x27;</span>),<br>            keras.layers.Dropout(<span class="hljs-number">0.2</span>),<br>            keras.layers.Dense(<span class="hljs-number">64</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_encoder_2&#x27;</span>),<br>            keras.layers.Dropout(<span class="hljs-number">0.1</span>),<br>            keras.layers.Dense(<span class="hljs-number">32</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_bottleneck&#x27;</span>),<br>            keras.layers.Dense(<span class="hljs-number">64</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_decoder_1&#x27;</span>),<br>            keras.layers.Dropout(<span class="hljs-number">0.1</span>),<br>            keras.layers.Dense(<span class="hljs-number">128</span>, activation=<span class="hljs-string">&#x27;sigmoid&#x27;</span>, name=<span class="hljs-string">&#x27;ai_decoder_2&#x27;</span>)<br>        ])<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_transformer_encoder</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æ„å»ºTransformeræ¶æ„ç”¨äºåºåˆ—æ¨¡å¼çš„AIå­¦ä¹ &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> AutoModel.from_pretrained(<span class="hljs-string">&#x27;distilbert-base-uncased&#x27;</span>)<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_intelligent_train</span>(<span class="hljs-params">self, training_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„æ™ºèƒ½è®­ç»ƒè¿‡ç¨‹ - è‡ªé€‚åº”å­¦ä¹ å’Œä¼˜åŒ–&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-comment"># Step 1: AIè‡ªåŠ¨ç‰¹å¾é€‰æ‹©ä¸ä¼˜åŒ–</span><br>        optimized_features = <span class="hljs-variable language_">self</span>.ai_auto_feature_selection(training_data)<br>        <br>        <span class="hljs-comment"># Step 2: ç¥ç»ç½‘ç»œå¢å¼ºç‰¹å¾å­¦ä¹ </span><br>        neural_features = <span class="hljs-variable language_">self</span>.neural_feature_extractor.extract(training_data)<br>        <br>        <span class="hljs-comment"># Step 3: å¤šæ¨¡å‹AIé›†æˆè®­ç»ƒ</span><br>        <span class="hljs-variable language_">self</span>.isolation_forest.fit(optimized_features)<br>        <span class="hljs-variable language_">self</span>.deep_autoencoder.fit(optimized_features, optimized_features, <br>                                 epochs=<span class="hljs-number">100</span>, validation_split=<span class="hljs-number">0.2</span>)<br>        <br>        <span class="hljs-comment"># Step 4: AIè¶…å‚æ•°è‡ªåŠ¨ä¼˜åŒ–</span><br>        <span class="hljs-variable language_">self</span>.ai_optimizer.optimize_hyperparameters(optimized_features)<br>        <br>        <span class="hljs-comment"># Step 5: åœ¨çº¿å­¦ä¹ AIæ¨¡å—åˆå§‹åŒ–</span><br>        <span class="hljs-variable language_">self</span>.online_learning_module.initialize(optimized_features)<br>        <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… AIæ¨¡å‹è®­ç»ƒå®Œæˆ - æ™ºèƒ½åŒ–å¼‚å¸¸æ£€æµ‹ç³»ç»Ÿå·²å°±ç»ª&quot;</span>)<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_intelligent_predict</span>(<span class="hljs-params">self, new_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIå¢å¼ºçš„æ™ºèƒ½å¼‚å¸¸é¢„æµ‹ - å¤šç»´åº¦èåˆå†³ç­–&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-comment"># å¤šAIæ¨¡å‹é¢„æµ‹èåˆ</span><br>        if_scores = <span class="hljs-variable language_">self</span>.isolation_forest.decision_function(new_data)<br>        ae_scores = <span class="hljs-variable language_">self</span>.autoencoder_anomaly_score(new_data)<br>        transformer_scores = <span class="hljs-variable language_">self</span>.transformer_sequence_score(new_data)<br>        <br>        <span class="hljs-comment"># AIæ™ºèƒ½èåˆå†³ç­–å¼•æ“</span><br>        final_scores = <span class="hljs-variable language_">self</span>.ai_ensemble_predict(if_scores, ae_scores, transformer_scores)<br>        <br>        <span class="hljs-comment"># æ™ºèƒ½é˜ˆå€¼è‡ªé€‚åº”è°ƒæ•´</span><br>        adaptive_threshold = <span class="hljs-variable language_">self</span>.intelligent_threshold_adapter.get_threshold(new_data)<br>        <br>        <span class="hljs-comment"># AIå¯è§£é‡Šæ€§åˆ†æ</span><br>        explanations = <span class="hljs-variable language_">self</span>.ai_explanation_engine.explain(new_data, final_scores)<br>        <br>        <span class="hljs-comment"># åœ¨çº¿å­¦ä¹ å®æ—¶æ›´æ–°</span><br>        <span class="hljs-variable language_">self</span>.online_learning_module.update(new_data, final_scores)<br>        <br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-string">&#x27;anomaly_scores&#x27;</span>: final_scores,<br>            <span class="hljs-string">&#x27;ai_explanations&#x27;</span>: explanations,<br>            <span class="hljs-string">&#x27;confidence_level&#x27;</span>: <span class="hljs-variable language_">self</span>.calculate_ai_confidence(final_scores),<br>            <span class="hljs-string">&#x27;risk_level&#x27;</span>: <span class="hljs-variable language_">self</span>.ai_risk_categorization(final_scores, adaptive_threshold)<br>        &#125;<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_ensemble_predict</span>(<span class="hljs-params">self, *model_scores</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„é›†æˆå­¦ä¹ é¢„æµ‹&quot;&quot;&quot;</span><br>        <span class="hljs-comment"># åŠ¨æ€æƒé‡AIåˆ†é…</span><br>        weights = <span class="hljs-variable language_">self</span>.ai_optimizer.get_dynamic_weights()<br>        <br>        <span class="hljs-comment"># æ™ºèƒ½åŠ æƒèåˆ</span><br>        ensemble_score = <span class="hljs-built_in">sum</span>(w * score <span class="hljs-keyword">for</span> w, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(weights, model_scores))<br>        <br>        <span class="hljs-comment"># AIç½®ä¿¡åº¦ä¼°è®¡</span><br>        confidence = <span class="hljs-variable language_">self</span>.estimate_ai_confidence(model_scores)<br>        <br>        <span class="hljs-keyword">return</span> ensemble_score * confidence<br></code></pre></td></tr></table></figure><h3 id="5-2-AIæ™ºèƒ½ä¼˜åŒ–ç­–ç•¥"><a href="#5-2-AIæ™ºèƒ½ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="5.2 AIæ™ºèƒ½ä¼˜åŒ–ç­–ç•¥"></a>5.2 AIæ™ºèƒ½ä¼˜åŒ–ç­–ç•¥</h3><h4 id="5-2-1-è‡ªåŠ¨åŒ–è¶…å‚æ•°ä¼˜åŒ–"><a href="#5-2-1-è‡ªåŠ¨åŒ–è¶…å‚æ•°ä¼˜åŒ–" class="headerlink" title="5.2.1 è‡ªåŠ¨åŒ–è¶…å‚æ•°ä¼˜åŒ–"></a>5.2.1 è‡ªåŠ¨åŒ–è¶…å‚æ•°ä¼˜åŒ–</h4><p><strong>æˆ‘ä»¬é‡‡ç”¨AIé©±åŠ¨çš„è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ ï¼ˆAutoMLï¼‰æŠ€æœ¯</strong>ï¼š</p><ul><li><strong>æ™ºèƒ½å‚æ•°æœç´¢</strong>ï¼šä½¿ç”¨è´å¶æ–¯ä¼˜åŒ–è‡ªåŠ¨è°ƒæ•´æ¨¡å‹å‚æ•°</li><li><strong>åŠ¨æ€contaminationè°ƒæ•´</strong>ï¼šAIç³»ç»Ÿæ ¹æ®å¸‚åœºç¯å¢ƒè‡ªåŠ¨è°ƒæ•´å¼‚å¸¸æ¯”ä¾‹</li><li><strong>è‡ªé€‚åº”é›†æˆç­–ç•¥</strong>ï¼šæ™ºèƒ½é€‰æ‹©æœ€ä¼˜çš„æ¨¡å‹ç»„åˆæ–¹å¼</li></ul><h4 id="5-2-2-AIå¢å¼ºçš„ç‰¹å¾ä¼˜åŒ–"><a href="#5-2-2-AIå¢å¼ºçš„ç‰¹å¾ä¼˜åŒ–" class="headerlink" title="5.2.2 AIå¢å¼ºçš„ç‰¹å¾ä¼˜åŒ–"></a>5.2.2 AIå¢å¼ºçš„ç‰¹å¾ä¼˜åŒ–</h4><p><strong>æœºå™¨å­¦ä¹ é©±åŠ¨çš„ç‰¹å¾å·¥ç¨‹ä¼˜åŒ–</strong>ï¼š</p><ul><li><strong>è‡ªåŠ¨ç‰¹å¾é€‰æ‹©</strong>ï¼šAIç®—æ³•è‡ªåŠ¨è¯†åˆ«æœ€å…·é¢„æµ‹ä»·å€¼çš„ç‰¹å¾</li><li><strong>ç‰¹å¾é‡è¦æ€§åŠ¨æ€è¯„ä¼°</strong>ï¼šå®æ—¶è¯„ä¼°å’Œè°ƒæ•´ç‰¹å¾æƒé‡</li><li><strong>æ™ºèƒ½é™ç»´</strong>ï¼šä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯ä¼˜åŒ–é«˜ç»´ç‰¹å¾ç©ºé—´</li></ul><h4 id="5-2-3-æŒç»­å­¦ä¹ ä¸æ¨¡å‹è¿›åŒ–"><a href="#5-2-3-æŒç»­å­¦ä¹ ä¸æ¨¡å‹è¿›åŒ–" class="headerlink" title="5.2.3 æŒç»­å­¦ä¹ ä¸æ¨¡å‹è¿›åŒ–"></a>5.2.3 æŒç»­å­¦ä¹ ä¸æ¨¡å‹è¿›åŒ–</h4><p><strong>æˆ‘ä»¬å®ç°äº†çœŸæ­£çš„AIè‡ªæˆ‘è¿›åŒ–èƒ½åŠ›</strong>ï¼š</p><ul><li><strong>å¢é‡å­¦ä¹ </strong>ï¼šæ¨¡å‹èƒ½å¤ŸæŒç»­ä»æ–°æ•°æ®ä¸­å­¦ä¹ </li><li><strong>æ¦‚å¿µæ¼‚ç§»æ£€æµ‹</strong>ï¼šAIç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å’Œé€‚åº”å¸‚åœºå˜åŒ–</li><li><strong>æ¨¡å‹ç‰ˆæœ¬ç®¡ç†</strong>ï¼šæ™ºèƒ½çš„æ¨¡å‹æ›´æ–°å’Œå›æ»šæœºåˆ¶</li></ul><h2 id="6-AIé©±åŠ¨çš„å®æ—¶ç›‘æ§ä¸æ™ºèƒ½é¢„è­¦æœºåˆ¶"><a href="#6-AIé©±åŠ¨çš„å®æ—¶ç›‘æ§ä¸æ™ºèƒ½é¢„è­¦æœºåˆ¶" class="headerlink" title="6. AIé©±åŠ¨çš„å®æ—¶ç›‘æ§ä¸æ™ºèƒ½é¢„è­¦æœºåˆ¶"></a>6. AIé©±åŠ¨çš„å®æ—¶ç›‘æ§ä¸æ™ºèƒ½é¢„è­¦æœºåˆ¶</h2><h3 id="6-1-AIå¢å¼ºçš„å®æ—¶å¤„ç†æ¶æ„"><a href="#6-1-AIå¢å¼ºçš„å®æ—¶å¤„ç†æ¶æ„" class="headerlink" title="6.1 AIå¢å¼ºçš„å®æ—¶å¤„ç†æ¶æ„"></a>6.1 AIå¢å¼ºçš„å®æ—¶å¤„ç†æ¶æ„</h3><p><strong>æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŸºäºAIçš„æ¯«ç§’çº§å“åº”çš„å®æ—¶ç›‘æ§ç³»ç»Ÿï¼Œå®ç°äº†çœŸæ­£æ„ä¹‰ä¸Šçš„æ™ºèƒ½åŒ–é£é™©ç›‘æ§</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AIRealTimeAnomalyMonitor</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„å®æ—¶å¼‚å¸¸ç›‘æ§ç³»ç»Ÿ&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.ai_detector = AIEnhancedCTRMAnomalyDetector()<br>        <span class="hljs-variable language_">self</span>.ai_stream_processor = StreamAIProcessor()<br>        <span class="hljs-variable language_">self</span>.intelligent_alerting = IntelligentAlertingSystem()<br>        <span class="hljs-variable language_">self</span>.ai_context_analyzer = ContextualAIAnalyzer()<br>        <br>        <span class="hljs-comment"># AIå¢å¼ºçš„å®æ—¶ç»„ä»¶</span><br>        <span class="hljs-variable language_">self</span>.real_time_ai_engine = RealTimeAIEngine()<br>        <span class="hljs-variable language_">self</span>.smart_cache_manager = AISmartCacheManager()<br>        <span class="hljs-variable language_">self</span>.predictive_ai_module = PredictiveAIModule()<br>        <br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_process_trade_stream</span>(<span class="hljs-params">self, trade_stream</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„äº¤æ˜“æµå®æ—¶å¤„ç†&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> trade_batch <span class="hljs-keyword">in</span> trade_stream:<br>            <span class="hljs-comment"># AIå®æ—¶ç‰¹å¾æå–</span><br>            ai_features = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.ai_stream_processor.extract_features(trade_batch)<br>            <br>            <span class="hljs-comment"># æ™ºèƒ½é¢„å¤„ç†å’Œæ•°æ®æ¸…æ´—</span><br>            cleaned_data = <span class="hljs-variable language_">self</span>.ai_data_cleanser.process(ai_features)<br>            <br>            <span class="hljs-comment"># AIå¼‚å¸¸æ£€æµ‹æ¨ç†</span><br>            anomaly_results = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.ai_detector.ai_intelligent_predict(cleaned_data)<br>            <br>            <span class="hljs-comment"># æ™ºèƒ½ä¸Šä¸‹æ–‡åˆ†æ</span><br>            context_analysis = <span class="hljs-variable language_">self</span>.ai_context_analyzer.analyze(trade_batch, anomaly_results)<br>            <br>            <span class="hljs-comment"># AIé¢„æµ‹æ€§åˆ†æ</span><br>            future_risk = <span class="hljs-variable language_">self</span>.predictive_ai_module.predict_risk_trend(trade_batch)<br>            <br>            <span class="hljs-comment"># æ™ºèƒ½é¢„è­¦å†³ç­–</span><br>            <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.intelligent_alerting.ai_alert_decision(<br>                anomaly_results, context_analysis, future_risk<br>            )<br>            <br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_alert_decision</span>(<span class="hljs-params">self, anomaly_data, context, prediction</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„æ™ºèƒ½é¢„è­¦å†³ç­–å¼•æ“&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-comment"># AIé£é™©ç­‰çº§æ™ºèƒ½è¯„ä¼°</span><br>        risk_level = <span class="hljs-variable language_">self</span>.ai_risk_classifier.classify(anomaly_data[<span class="hljs-string">&#x27;anomaly_scores&#x27;</span>])<br>        <br>        <span class="hljs-comment"># æ™ºèƒ½é¢„è­¦é˜ˆå€¼è‡ªé€‚åº”</span><br>        dynamic_threshold = <span class="hljs-variable language_">self</span>.adaptive_threshold_ai.calculate(context)<br>        <br>        <span class="hljs-comment"># AIä¸Šä¸‹æ–‡ç›¸å…³æ€§åˆ†æ</span><br>        contextual_score = <span class="hljs-variable language_">self</span>.context_relevance_ai.score(context)<br>        <br>        <span class="hljs-keyword">if</span> risk_level &gt;= dynamic_threshold <span class="hljs-keyword">and</span> contextual_score &gt; <span class="hljs-number">0.7</span>:<br>            <span class="hljs-comment"># ç”ŸæˆAIå¢å¼ºçš„æ™ºèƒ½é¢„è­¦</span><br>            ai_alert = <span class="hljs-variable language_">self</span>.generate_ai_enhanced_alert(<br>                anomaly_data, context, prediction, risk_level<br>            )<br>            <br>            <span class="hljs-comment"># æ™ºèƒ½é€šçŸ¥è·¯ç”±</span><br>            <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.intelligent_notification_router.route(ai_alert)<br>            <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_ai_enhanced_alert</span>(<span class="hljs-params">self, anomaly_data, context, prediction, risk_level</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ç”ŸæˆAIå¢å¼ºçš„æ™ºèƒ½é¢„è­¦ä¿¡æ¯&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-string">&#x27;alert_id&#x27;</span>: <span class="hljs-string">f&quot;AI-<span class="hljs-subst">&#123;uuid.uuid4()&#125;</span>&quot;</span>,<br>            <span class="hljs-string">&#x27;timestamp&#x27;</span>: datetime.now(),<br>            <span class="hljs-string">&#x27;risk_level&#x27;</span>: risk_level,<br>            <span class="hljs-string">&#x27;ai_confidence&#x27;</span>: anomaly_data[<span class="hljs-string">&#x27;confidence_level&#x27;</span>],<br>            <span class="hljs-string">&#x27;ai_explanation&#x27;</span>: anomaly_data[<span class="hljs-string">&#x27;ai_explanations&#x27;</span>],<br>            <span class="hljs-string">&#x27;contextual_factors&#x27;</span>: context,<br>            <span class="hljs-string">&#x27;predicted_trend&#x27;</span>: prediction,<br>            <span class="hljs-string">&#x27;ai_recommended_actions&#x27;</span>: <span class="hljs-variable language_">self</span>.ai_action_recommender.recommend(anomaly_data),<br>            <span class="hljs-string">&#x27;smart_priority&#x27;</span>: <span class="hljs-variable language_">self</span>.ai_priority_calculator.calculate(risk_level, context)<br>        &#125;<br></code></pre></td></tr></table></figure><h3 id="6-2-AIæ™ºèƒ½é¢„è­¦åˆ†çº§ä½“ç³»"><a href="#6-2-AIæ™ºèƒ½é¢„è­¦åˆ†çº§ä½“ç³»" class="headerlink" title="6.2 AIæ™ºèƒ½é¢„è­¦åˆ†çº§ä½“ç³»"></a>6.2 AIæ™ºèƒ½é¢„è­¦åˆ†çº§ä½“ç³»</h3><p><strong>æˆ‘ä»¬è®¾è®¡äº†åŸºäºAIçš„å¤šç»´åº¦æ™ºèƒ½é¢„è­¦ä½“ç³»ï¼Œå®ç°ç²¾å‡†çš„é£é™©è¯†åˆ«å’Œåˆ†çº§</strong>ï¼š</p><h4 id="6-2-1-AIé£é™©ç­‰çº§æ™ºèƒ½åˆ†ç±»"><a href="#6-2-1-AIé£é™©ç­‰çº§æ™ºèƒ½åˆ†ç±»" class="headerlink" title="6.2.1 AIé£é™©ç­‰çº§æ™ºèƒ½åˆ†ç±»"></a>6.2.1 AIé£é™©ç­‰çº§æ™ºèƒ½åˆ†ç±»</h4><ul><li><strong>AIè½»åº¦å¼‚å¸¸ï¼ˆL1ï¼‰</strong>ï¼šæœºå™¨å­¦ä¹ ç®—æ³•è¯†åˆ«çš„è½»å¾®åç¦»æ­£å¸¸æ¨¡å¼</li><li><strong>AIä¸­åº¦å¼‚å¸¸ï¼ˆL2ï¼‰</strong>ï¼šAIç³»ç»Ÿæ£€æµ‹åˆ°çš„æ˜¾è‘—å¼‚å¸¸äº¤æ˜“è¡Œä¸º</li><li><strong>AIé‡åº¦å¼‚å¸¸ï¼ˆL3ï¼‰</strong>ï¼šæ·±åº¦å­¦ä¹ æ¨¡å‹è¯†åˆ«çš„é«˜é£é™©äº¤æ˜“æ¨¡å¼</li><li><strong>AIæåº¦å¼‚å¸¸ï¼ˆL4ï¼‰</strong>ï¼šAIå¤šæ¨¡å‹ä¸€è‡´åˆ¤å®šçš„æé«˜é£é™©æƒ…å†µ</li></ul><h4 id="6-2-2-æ™ºèƒ½åŒ–é¢„è­¦è§¦å‘æœºåˆ¶"><a href="#6-2-2-æ™ºèƒ½åŒ–é¢„è­¦è§¦å‘æœºåˆ¶" class="headerlink" title="6.2.2 æ™ºèƒ½åŒ–é¢„è­¦è§¦å‘æœºåˆ¶"></a>6.2.2 æ™ºèƒ½åŒ–é¢„è­¦è§¦å‘æœºåˆ¶</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentAlertTrigger</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„æ™ºèƒ½é¢„è­¦è§¦å‘å™¨&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.ai_risk_scorer = AIRiskScorer()<br>        <span class="hljs-variable language_">self</span>.contextual_ai = ContextualAI()<br>        <span class="hljs-variable language_">self</span>.behavioral_ai = BehavioralAI()<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_should_trigger_alert</span>(<span class="hljs-params">self, trade_data, anomaly_score</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIæ™ºèƒ½åˆ¤æ–­æ˜¯å¦è§¦å‘é¢„è­¦&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-comment"># AIåŸºç¡€å¼‚å¸¸è¯„åˆ†</span><br>        base_score = anomaly_score<br>        <br>        <span class="hljs-comment"># AIä¸Šä¸‹æ–‡å¢å¼ºè¯„åˆ†</span><br>        context_multiplier = <span class="hljs-variable language_">self</span>.contextual_ai.get_context_multiplier(trade_data)<br>        <br>        <span class="hljs-comment"># AIè¡Œä¸ºæ¨¡å¼è¯„åˆ†</span><br>        behavior_score = <span class="hljs-variable language_">self</span>.behavioral_ai.analyze_behavior_pattern(trade_data)<br>        <br>        <span class="hljs-comment"># AIç»¼åˆæ™ºèƒ½è¯„åˆ†</span><br>        final_score = base_score * context_multiplier + behavior_score<br>        <br>        <span class="hljs-comment"># AIåŠ¨æ€é˜ˆå€¼å†³ç­–</span><br>        dynamic_threshold = <span class="hljs-variable language_">self</span>.ai_risk_scorer.get_adaptive_threshold(trade_data)<br>        <br>        <span class="hljs-keyword">return</span> final_score &gt; dynamic_threshold<br></code></pre></td></tr></table></figure><h3 id="6-3-AIé©±åŠ¨çš„æ™ºèƒ½å“åº”æœºåˆ¶"><a href="#6-3-AIé©±åŠ¨çš„æ™ºèƒ½å“åº”æœºåˆ¶" class="headerlink" title="6.3 AIé©±åŠ¨çš„æ™ºèƒ½å“åº”æœºåˆ¶"></a>6.3 AIé©±åŠ¨çš„æ™ºèƒ½å“åº”æœºåˆ¶</h3><p><strong>æˆ‘ä»¬å®ç°äº†å®Œæ•´çš„AIè‡ªåŠ¨åŒ–å“åº”ä½“ç³»ï¼Œè®©ç³»ç»Ÿèƒ½å¤Ÿæ™ºèƒ½åŒ–åœ°å¤„ç†å¼‚å¸¸æƒ…å†µ</strong>ï¼š</p><h4 id="6-3-1-AIè‡ªåŠ¨åŒ–å¤„ç½®æµç¨‹"><a href="#6-3-1-AIè‡ªåŠ¨åŒ–å¤„ç½®æµç¨‹" class="headerlink" title="6.3.1 AIè‡ªåŠ¨åŒ–å¤„ç½®æµç¨‹"></a>6.3.1 AIè‡ªåŠ¨åŒ–å¤„ç½®æµç¨‹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AIAutomatedResponseSystem</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„è‡ªåŠ¨åŒ–å“åº”ç³»ç»Ÿ&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.ai_action_planner = AIActionPlanner()<br>        <span class="hljs-variable language_">self</span>.automated_ai_executor = AutomatedAIExecutor()<br>        <span class="hljs-variable language_">self</span>.ai_risk_mitigator = AIRiskMitigator()<br>        <br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_automated_response</span>(<span class="hljs-params">self, alert_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIè‡ªåŠ¨åŒ–å“åº”å¤„ç†&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-comment"># AIæ™ºèƒ½è¡ŒåŠ¨è®¡åˆ’ç”Ÿæˆ</span><br>        action_plan = <span class="hljs-variable language_">self</span>.ai_action_planner.generate_plan(alert_data)<br>        <br>        <span class="hljs-comment"># æ ¹æ®AIé£é™©ç­‰çº§è‡ªåŠ¨æ‰§è¡Œæªæ–½</span><br>        <span class="hljs-keyword">if</span> alert_data[<span class="hljs-string">&#x27;risk_level&#x27;</span>] == <span class="hljs-string">&#x27;AI_CRITICAL&#x27;</span>:<br>            <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.ai_emergency_response(alert_data)<br>        <span class="hljs-keyword">elif</span> alert_data[<span class="hljs-string">&#x27;risk_level&#x27;</span>] == <span class="hljs-string">&#x27;AI_HIGH&#x27;</span>:<br>            <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.ai_enhanced_monitoring(alert_data)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.ai_standard_processing(alert_data)<br>            <br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_emergency_response</span>(<span class="hljs-params">self, alert_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AIé©±åŠ¨çš„ç´§æ€¥å“åº”&quot;&quot;&quot;</span><br>        <span class="hljs-comment"># è‡ªåŠ¨å†»ç»“ç›¸å…³äº¤æ˜“</span><br>        <span class="hljs-comment"># AIé£é™©ä¼ æ’­åˆ†æ</span><br>        <span class="hljs-comment"># æ™ºèƒ½é€šçŸ¥ç›¸å…³äººå‘˜</span><br>        <span class="hljs-comment"># AIæŸå¤±è¯„ä¼°å’Œç¼“è§£</span><br>        <span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure><h2 id="7-AIåº”ç”¨æ¡ˆä¾‹åˆ†æä¸å®æˆ˜æ•ˆæœ"><a href="#7-AIåº”ç”¨æ¡ˆä¾‹åˆ†æä¸å®æˆ˜æ•ˆæœ" class="headerlink" title="7. AIåº”ç”¨æ¡ˆä¾‹åˆ†æä¸å®æˆ˜æ•ˆæœ"></a>7. AIåº”ç”¨æ¡ˆä¾‹åˆ†æä¸å®æˆ˜æ•ˆæœ</h2><h3 id="7-1-AIæŠ€æœ¯åœ¨å®é™…CTRMç³»ç»Ÿä¸­çš„åº”ç”¨æˆæœ"><a href="#7-1-AIæŠ€æœ¯åœ¨å®é™…CTRMç³»ç»Ÿä¸­çš„åº”ç”¨æˆæœ" class="headerlink" title="7.1 AIæŠ€æœ¯åœ¨å®é™…CTRMç³»ç»Ÿä¸­çš„åº”ç”¨æˆæœ"></a>7.1 AIæŠ€æœ¯åœ¨å®é™…CTRMç³»ç»Ÿä¸­çš„åº”ç”¨æˆæœ</h3><p><strong>æˆ‘ä»¬åœ¨æŸå¤§å‹å¤§å®—å•†å“äº¤æ˜“å…¬å¸çš„CTRMç³»ç»Ÿä¸­éƒ¨ç½²äº†AIé©±åŠ¨çš„å¼‚å¸¸æ£€æµ‹æ–¹æ¡ˆï¼Œå–å¾—äº†æ˜¾è‘—çš„æ™ºèƒ½åŒ–è½¬å‹æˆæœ</strong>ï¼š</p><h4 id="7-1-1-AIåº”ç”¨å‰åçš„å…³é”®æŒ‡æ ‡å¯¹æ¯”"><a href="#7-1-1-AIåº”ç”¨å‰åçš„å…³é”®æŒ‡æ ‡å¯¹æ¯”" class="headerlink" title="7.1.1 AIåº”ç”¨å‰åçš„å…³é”®æŒ‡æ ‡å¯¹æ¯”"></a>7.1.1 AIåº”ç”¨å‰åçš„å…³é”®æŒ‡æ ‡å¯¹æ¯”</h4><table><thead><tr><th>æŒ‡æ ‡ç»´åº¦</th><th>ä¼ ç»Ÿè§„åˆ™ç³»ç»Ÿ</th><th>AIæ™ºèƒ½åŒ–ç³»ç»Ÿ</th><th>AIæå‡æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>å¼‚å¸¸æ£€æµ‹å‡†ç¡®ç‡</strong></td><td>65%</td><td>94%</td><td><strong>AIæå‡45%</strong></td></tr><tr><td><strong>è¯¯æŠ¥ç‡</strong></td><td>35%</td><td>8%</td><td><strong>AIé™ä½77%</strong></td></tr><tr><td><strong>å“åº”æ—¶é—´</strong></td><td>15åˆ†é’Ÿ</td><td>200æ¯«ç§’</td><td><strong>AIæå‡4500å€</strong></td></tr><tr><td><strong>è¦†ç›–å¤æ‚åœºæ™¯</strong></td><td>40%</td><td>95%</td><td><strong>AIæå‡138%</strong></td></tr><tr><td><strong>äººå·¥å¹²é¢„éœ€æ±‚</strong></td><td>80%</td><td>15%</td><td><strong>AIå‡å°‘81%</strong></td></tr><tr><td><strong>é£é™©è¯†åˆ«æ·±åº¦</strong></td><td>åŸºç¡€è§„åˆ™</td><td>æ·±åº¦æ¨¡å¼å­¦ä¹ </td><td><strong>AIè´¨çš„é£è·ƒ</strong></td></tr></tbody></table><h4 id="7-1-2-AIé©±åŠ¨çš„å…¸å‹å¼‚å¸¸æ£€æµ‹æ¡ˆä¾‹"><a href="#7-1-2-AIé©±åŠ¨çš„å…¸å‹å¼‚å¸¸æ£€æµ‹æ¡ˆä¾‹" class="headerlink" title="7.1.2 AIé©±åŠ¨çš„å…¸å‹å¼‚å¸¸æ£€æµ‹æ¡ˆä¾‹"></a>7.1.2 AIé©±åŠ¨çš„å…¸å‹å¼‚å¸¸æ£€æµ‹æ¡ˆä¾‹</h4><p><strong>æ¡ˆä¾‹1ï¼šAIå‘ç°çš„å¤æ‚ä»·æ ¼æ“çºµè¡Œä¸º</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># AIç³»ç»Ÿæ£€æµ‹åˆ°çš„å¼‚å¸¸äº¤æ˜“æ¨¡å¼</span><br>detected_pattern = &#123;<br>    <span class="hljs-string">&#x27;anomaly_type&#x27;</span>: <span class="hljs-string">&#x27;AI_PRICE_MANIPULATION&#x27;</span>,<br>    <span class="hljs-string">&#x27;ai_confidence&#x27;</span>: <span class="hljs-number">0.97</span>,<br>    <span class="hljs-string">&#x27;traditional_system_missed&#x27;</span>: <span class="hljs-literal">True</span>,<br>    <span class="hljs-string">&#x27;ai_detection_features&#x27;</span>: [<br>        <span class="hljs-string">&#x27;å¤šè´¦æˆ·ååŒäº¤æ˜“æ¨¡å¼&#x27;</span>,<br>        <span class="hljs-string">&#x27;æ—¶åºä»·æ ¼å¼‚å¸¸æ³¢åŠ¨&#x27;</span>,<br>        <span class="hljs-string">&#x27;äº¤æ˜“é‡ä¸ä»·æ ¼éæ­£å¸¸å…³è”&#x27;</span>,<br>        <span class="hljs-string">&#x27;AIè¯†åˆ«çš„éšè—å…³è”ç½‘ç»œ&#x27;</span><br>    ],<br>    <span class="hljs-string">&#x27;ai_explanation&#x27;</span>: <span class="hljs-string">&#x27;AIç®—æ³•æ£€æµ‹åˆ°è·¨å¤šä¸ªè´¦æˆ·çš„åè°ƒäº¤æ˜“è¡Œä¸ºï¼Œé€šè¿‡æ·±åº¦å­¦ä¹ è¯†åˆ«å‡ºä»·æ ¼æ“çºµçš„å¤æ‚æ¨¡å¼&#x27;</span>,<br>    <span class="hljs-string">&#x27;business_impact&#x27;</span>: <span class="hljs-string">&#x27;é¿å…æ½œåœ¨æŸå¤±2000ä¸‡å…ƒ&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹2ï¼šAIé¢„æµ‹æ€§é£é™©é˜²æ§</strong></p><ul><li><strong>AIé¢„è­¦æ—¶é—´</strong>ï¼šå¼‚å¸¸è¡Œä¸ºå‘ç”Ÿå‰30åˆ†é’Ÿ</li><li><strong>ä¼ ç»Ÿç³»ç»Ÿååº”</strong>ï¼šå¼‚å¸¸å‘ç”Ÿå2å°æ—¶æ‰æ£€æµ‹åˆ°</li><li><strong>AIé¢„é˜²æ•ˆæœ</strong>ï¼šæˆåŠŸé˜»æ­¢äº†ä¸€æ¬¡é‡å¤§è¿è§„äº¤æ˜“</li><li><strong>AIæ™ºèƒ½å»ºè®®</strong>ï¼šç³»ç»Ÿè‡ªåŠ¨æä¾›äº†3ç§é£é™©ç¼“è§£æ–¹æ¡ˆ</li></ul><p><strong>æ¡ˆä¾‹3ï¼šAIæ™ºèƒ½æ´—é’±é£é™©è¯†åˆ«</strong></p><ul><li><strong>æ£€æµ‹ç‰¹å¾</strong>ï¼šå¾ªç¯äº¤æ˜“æ¨¡å¼ã€å¤šå±‚çº§è´¦æˆ·å…³è”ã€å¼‚å¸¸èµ„é‡‘æµå‘</li><li><strong>AIç½®ä¿¡åº¦</strong>ï¼š95.3%</li><li><strong>ä¼ ç»Ÿæ–¹æ³•</strong>ï¼šå®Œå…¨æœªå‘ç°</li><li><strong>å¤„ç½®ç»“æœ</strong>ï¼šåŠæ—¶é˜»æ­¢å¯ç–‘èµ„é‡‘æµè½¬ï¼Œé¿å…åˆè§„é£é™©</li></ul><h4 id="7-1-3-AIæŠ€æœ¯å¸¦æ¥çš„ä¸šåŠ¡ä»·å€¼"><a href="#7-1-3-AIæŠ€æœ¯å¸¦æ¥çš„ä¸šåŠ¡ä»·å€¼" class="headerlink" title="7.1.3 AIæŠ€æœ¯å¸¦æ¥çš„ä¸šåŠ¡ä»·å€¼"></a>7.1.3 AIæŠ€æœ¯å¸¦æ¥çš„ä¸šåŠ¡ä»·å€¼</h4><p><strong>é‡åŒ–æ”¶ç›Šåˆ†æ</strong>ï¼š</p><ul><li><strong>é£é™©æŸå¤±å‡å°‘</strong>ï¼šAIç³»ç»Ÿå¸®åŠ©å‡å°‘é£é™©æŸå¤±85%ï¼Œå¹´èŠ‚çº¦æˆæœ¬çº¦5000ä¸‡å…ƒ</li><li><strong>è¿è¥æ•ˆç‡æå‡</strong>ï¼šAIè‡ªåŠ¨åŒ–å¤„ç†å‡å°‘äººå·¥å·¥ä½œé‡70%ï¼Œæå‡è¿è¥æ•ˆç‡300%</li><li><strong>åˆè§„èƒ½åŠ›å¢å¼º</strong>ï¼šAIæ™ºèƒ½ç›‘æ§å¸®åŠ©é€šè¿‡äº†æ‰€æœ‰ç›‘ç®¡å®¡æŸ¥ï¼Œåˆè§„é£é™©ä¸ºé›¶</li><li><strong>å¸‚åœºç«äº‰ä¼˜åŠ¿</strong>ï¼šAIèµ‹èƒ½çš„é£æ§èƒ½åŠ›æˆä¸ºå…¬å¸æ ¸å¿ƒç«äº‰åŠ›</li></ul><h3 id="7-2-AIç³»ç»Ÿæ€§èƒ½è¡¨ç°åˆ†æ"><a href="#7-2-AIç³»ç»Ÿæ€§èƒ½è¡¨ç°åˆ†æ" class="headerlink" title="7.2 AIç³»ç»Ÿæ€§èƒ½è¡¨ç°åˆ†æ"></a>7.2 AIç³»ç»Ÿæ€§èƒ½è¡¨ç°åˆ†æ</h3><h4 id="7-2-1-AIæ¨¡å‹ç²¾åº¦è¯„ä¼°"><a href="#7-2-1-AIæ¨¡å‹ç²¾åº¦è¯„ä¼°" class="headerlink" title="7.2.1 AIæ¨¡å‹ç²¾åº¦è¯„ä¼°"></a>7.2.1 AIæ¨¡å‹ç²¾åº¦è¯„ä¼°</h4><p><strong>æˆ‘ä»¬å¯¹AIå¼‚å¸¸æ£€æµ‹æ¨¡å‹è¿›è¡Œäº†å…¨é¢çš„æ€§èƒ½è¯„ä¼°</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># AIæ¨¡å‹æ€§èƒ½è¯„ä¼°ç»“æœ</span><br>ai_performance_metrics = &#123;<br>    <span class="hljs-string">&#x27;precision&#x27;</span>: <span class="hljs-number">0.94</span>,  <span class="hljs-comment"># AIç²¾ç¡®ç‡94%</span><br>    <span class="hljs-string">&#x27;recall&#x27;</span>: <span class="hljs-number">0.91</span>,     <span class="hljs-comment"># AIå¬å›ç‡91%</span><br>    <span class="hljs-string">&#x27;f1_score&#x27;</span>: <span class="hljs-number">0.925</span>,  <span class="hljs-comment"># AI F1åˆ†æ•°92.5%</span><br>    <span class="hljs-string">&#x27;auc_roc&#x27;</span>: <span class="hljs-number">0.97</span>,    <span class="hljs-comment"># AI ROCæ›²çº¿ä¸‹é¢ç§¯97%</span><br>    <span class="hljs-string">&#x27;false_positive_rate&#x27;</span>: <span class="hljs-number">0.06</span>,  <span class="hljs-comment"># AIè¯¯æŠ¥ç‡ä»…6%</span><br>    <span class="hljs-string">&#x27;real_time_latency&#x27;</span>: <span class="hljs-string">&#x27;50ms&#x27;</span>,   <span class="hljs-comment"># AIå®æ—¶æ¨ç†å»¶è¿Ÿ50æ¯«ç§’</span><br>    <span class="hljs-string">&#x27;throughput&#x27;</span>: <span class="hljs-string">&#x27;10000 TPS&#x27;</span>,     <span class="hljs-comment"># AIç³»ç»Ÿååé‡1ä¸‡TPS</span><br>    <span class="hljs-string">&#x27;ai_explanation_accuracy&#x27;</span>: <span class="hljs-number">0.89</span>  <span class="hljs-comment"># AIå¯è§£é‡Šæ€§å‡†ç¡®ç‡89%</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="7-2-2-AIæŒç»­å­¦ä¹ æ•ˆæœ"><a href="#7-2-2-AIæŒç»­å­¦ä¹ æ•ˆæœ" class="headerlink" title="7.2.2 AIæŒç»­å­¦ä¹ æ•ˆæœ"></a>7.2.2 AIæŒç»­å­¦ä¹ æ•ˆæœ</h4><ul><li><strong>æ¨¡å‹è‡ªæˆ‘è¿›åŒ–</strong>ï¼šAIç³»ç»Ÿæ¯æœˆè‡ªåŠ¨å­¦ä¹ æ–°æ¨¡å¼ï¼Œæ£€æµ‹å‡†ç¡®ç‡æŒç»­æå‡</li><li><strong>ç¯å¢ƒé€‚åº”æ€§</strong>ï¼šAIç®—æ³•æˆåŠŸé€‚åº”äº†3æ¬¡é‡å¤§å¸‚åœºç¯å¢ƒå˜åŒ–</li><li><strong>çŸ¥è¯†ç§¯ç´¯</strong>ï¼šAIç³»ç»Ÿç§¯ç´¯äº†è¶…è¿‡500ä¸‡æ¡äº¤æ˜“è¡Œä¸ºæ¨¡å¼çŸ¥è¯†</li></ul><h2 id="8-AIæŠ€æœ¯æŒ‘æˆ˜ä¸æœªæ¥å‘å±•æ–¹å‘"><a href="#8-AIæŠ€æœ¯æŒ‘æˆ˜ä¸æœªæ¥å‘å±•æ–¹å‘" class="headerlink" title="8. AIæŠ€æœ¯æŒ‘æˆ˜ä¸æœªæ¥å‘å±•æ–¹å‘"></a>8. AIæŠ€æœ¯æŒ‘æˆ˜ä¸æœªæ¥å‘å±•æ–¹å‘</h2><h3 id="8-1-å½“å‰AIåº”ç”¨é¢ä¸´çš„æŠ€æœ¯æŒ‘æˆ˜"><a href="#8-1-å½“å‰AIåº”ç”¨é¢ä¸´çš„æŠ€æœ¯æŒ‘æˆ˜" class="headerlink" title="8.1 å½“å‰AIåº”ç”¨é¢ä¸´çš„æŠ€æœ¯æŒ‘æˆ˜"></a>8.1 å½“å‰AIåº”ç”¨é¢ä¸´çš„æŠ€æœ¯æŒ‘æˆ˜</h3><h4 id="8-1-1-AIæ¨¡å‹å¤æ‚æ€§æŒ‘æˆ˜"><a href="#8-1-1-AIæ¨¡å‹å¤æ‚æ€§æŒ‘æˆ˜" class="headerlink" title="8.1.1 AIæ¨¡å‹å¤æ‚æ€§æŒ‘æˆ˜"></a>8.1.1 AIæ¨¡å‹å¤æ‚æ€§æŒ‘æˆ˜</h4><ul><li><strong>AIå¯è§£é‡Šæ€§éš¾é¢˜</strong>ï¼šæ·±åº¦å­¦ä¹ æ¨¡å‹çš„â€é»‘ç›’â€ç‰¹æ€§å½±å“ä¸šåŠ¡äººå‘˜ç†è§£</li><li><strong>AIæ¨¡å‹æ¼‚ç§»é£é™©</strong>ï¼šå¸‚åœºç¯å¢ƒå˜åŒ–å¯èƒ½å¯¼è‡´AIæ¨¡å‹æ€§èƒ½è¡°å‡</li><li><strong>AIè®¡ç®—èµ„æºéœ€æ±‚</strong>ï¼šå¤§è§„æ¨¡æœºå™¨å­¦ä¹ æ¨¡å‹éœ€è¦å¼ºå¤§çš„è®¡ç®—æ”¯æŒ</li></ul><h4 id="8-1-2-AIæ•°æ®è´¨é‡æŒ‘æˆ˜"><a href="#8-1-2-AIæ•°æ®è´¨é‡æŒ‘æˆ˜" class="headerlink" title="8.1.2 AIæ•°æ®è´¨é‡æŒ‘æˆ˜"></a>8.1.2 AIæ•°æ®è´¨é‡æŒ‘æˆ˜</h4><ul><li><strong>æ•°æ®æ ‡æ³¨ç¨€ç¼º</strong>ï¼šé«˜è´¨é‡çš„å¼‚å¸¸äº¤æ˜“æ ‡æ³¨æ•°æ®è·å–å›°éš¾</li><li><strong>AIæ ·æœ¬ä¸å¹³è¡¡</strong>ï¼šæ­£å¸¸äº¤æ˜“ä¸å¼‚å¸¸äº¤æ˜“çš„æ•°é‡æä¸å¹³è¡¡</li><li><strong>AIç‰¹å¾å·¥ç¨‹å¤æ‚æ€§</strong>ï¼šéœ€è¦æ·±åº¦çš„ä¸šåŠ¡çŸ¥è¯†å’ŒAIæŠ€æœ¯ç›¸ç»“åˆ</li></ul><h3 id="8-2-AIæŠ€æœ¯å‘å±•çš„æœªæ¥è¶‹åŠ¿"><a href="#8-2-AIæŠ€æœ¯å‘å±•çš„æœªæ¥è¶‹åŠ¿" class="headerlink" title="8.2 AIæŠ€æœ¯å‘å±•çš„æœªæ¥è¶‹åŠ¿"></a>8.2 AIæŠ€æœ¯å‘å±•çš„æœªæ¥è¶‹åŠ¿</h3><h4 id="8-2-1-ä¸‹ä¸€ä»£AIæŠ€æœ¯åœ¨CTRMä¸­çš„åº”ç”¨å‰æ™¯"><a href="#8-2-1-ä¸‹ä¸€ä»£AIæŠ€æœ¯åœ¨CTRMä¸­çš„åº”ç”¨å‰æ™¯" class="headerlink" title="8.2.1 ä¸‹ä¸€ä»£AIæŠ€æœ¯åœ¨CTRMä¸­çš„åº”ç”¨å‰æ™¯"></a>8.2.1 ä¸‹ä¸€ä»£AIæŠ€æœ¯åœ¨CTRMä¸­çš„åº”ç”¨å‰æ™¯</h4><p><strong>1. å¤§è¯­è¨€æ¨¡å‹ä¸CTRMçš„èåˆ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æœªæ¥çš„AIå¢å¼ºCTRMç³»ç»Ÿæ¶æ„</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NextGenAICTRMSystem</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># å¤§è¯­è¨€æ¨¡å‹é›†æˆ</span><br>        <span class="hljs-variable language_">self</span>.llm_analyzer = LargeLanguageModelAnalyzer()<br>        <span class="hljs-comment"># å¤šæ¨¡æ€AIèåˆ</span><br>        <span class="hljs-variable language_">self</span>.multimodal_ai = MultimodalAIProcessor()<br>        <span class="hljs-comment"># è”é‚¦å­¦ä¹ AI</span><br>        <span class="hljs-variable language_">self</span>.federated_ai = FederatedLearningEngine()<br>        <span class="hljs-comment"># é‡å­æœºå™¨å­¦ä¹ </span><br>        <span class="hljs-variable language_">self</span>.quantum_ai = QuantumMLProcessor()<br>        <br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_intelligent_analysis</span>(<span class="hljs-params">self, trade_data, market_news, regulatory_updates</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ä¸‹ä¸€ä»£AIç»¼åˆåˆ†æ&quot;&quot;&quot;</span><br>        <br>        <span class="hljs-comment"># LLMé©±åŠ¨çš„æ™ºèƒ½é£é™©åˆ†æ</span><br>        llm_insights = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">self</span>.llm_analyzer.analyze_risk_context(<br>            trade_data, market_news, regulatory_updates<br>        )<br>        <br>        <span class="hljs-comment"># å¤šæ¨¡æ€AIèåˆåˆ†æ</span><br>        multimodal_risk = <span class="hljs-variable language_">self</span>.multimodal_ai.process(trade_data, llm_insights)<br>        <br>        <span class="hljs-comment"># è”é‚¦å­¦ä¹ å¢å¼ºé¢„æµ‹</span><br>        federated_prediction = <span class="hljs-variable language_">self</span>.federated_ai.predict(multimodal_risk)<br>        <br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-string">&#x27;ai_comprehensive_risk&#x27;</span>: multimodal_risk,<br>            <span class="hljs-string">&#x27;ai_market_intelligence&#x27;</span>: llm_insights,<br>            <span class="hljs-string">&#x27;ai_collaborative_prediction&#x27;</span>: federated_prediction<br>        &#125;<br></code></pre></td></tr></table></figure><p><strong>2. AIæŠ€æœ¯å‘å±•çš„å…³é”®æ–¹å‘</strong></p><ul><li><strong>è‡ªç›‘ç£å­¦ä¹ </strong>ï¼šå‡å°‘å¯¹æ ‡æ³¨æ•°æ®çš„ä¾èµ–ï¼ŒAIç³»ç»Ÿè‡ªä¸»å­¦ä¹ èƒ½åŠ›å¢å¼º</li><li><strong>å¯è§£é‡ŠAI</strong>ï¼šæä¾›æ›´å¥½çš„AIå†³ç­–é€æ˜åº¦å’Œå¯ç†è§£æ€§</li><li><strong>è¾¹ç¼˜AI</strong>ï¼šå°†AIæ¨ç†èƒ½åŠ›éƒ¨ç½²åˆ°è¾¹ç¼˜è®¾å¤‡ï¼Œæå‡å“åº”é€Ÿåº¦</li><li><strong>è”é‚¦å­¦ä¹ </strong>ï¼šå¤šæœºæ„é—´çš„AIåä½œå­¦ä¹ ï¼Œä¿æŠ¤æ•°æ®éšç§</li></ul><h4 id="8-2-2-AIé©±åŠ¨çš„CTRMç³»ç»Ÿæ¼”è¿›è·¯çº¿å›¾"><a href="#8-2-2-AIé©±åŠ¨çš„CTRMç³»ç»Ÿæ¼”è¿›è·¯çº¿å›¾" class="headerlink" title="8.2.2 AIé©±åŠ¨çš„CTRMç³»ç»Ÿæ¼”è¿›è·¯çº¿å›¾"></a>8.2.2 AIé©±åŠ¨çš„CTRMç³»ç»Ÿæ¼”è¿›è·¯çº¿å›¾</h4><p><strong>çŸ­æœŸç›®æ ‡ï¼ˆ1-2å¹´ï¼‰ï¼šAIèƒ½åŠ›æ·±åŒ–</strong></p><ul><li>å¢å¼ºAIæ¨¡å‹çš„å¯è§£é‡Šæ€§å’Œé€æ˜åº¦</li><li>å®ç°AIç³»ç»Ÿçš„è‡ªé€‚åº”å‚æ•°è°ƒä¼˜</li><li>é›†æˆæ›´å¤šAIæŠ€æœ¯æ ˆï¼ˆNLPã€è®¡ç®—æœºè§†è§‰ç­‰ï¼‰</li></ul><p><strong>ä¸­æœŸç›®æ ‡ï¼ˆ3-5å¹´ï¼‰ï¼šAIç”Ÿæ€å®Œå–„</strong></p><ul><li>æ„å»ºAIé©±åŠ¨çš„å…¨é“¾è·¯é£é™©ç®¡æ§ä½“ç³»</li><li>å®ç°è·¨æœºæ„çš„AIè”é‚¦å­¦ä¹ </li><li>å‘å±•AIå¢å¼ºçš„å†³ç­–æ”¯æŒç³»ç»Ÿ</li></ul><p><strong>é•¿æœŸæ„¿æ™¯ï¼ˆ5-10å¹´ï¼‰ï¼šAIå…¨é¢æ™ºèƒ½åŒ–</strong></p><ul><li>å®ç°å®Œå…¨è‡ªä¸»çš„AIé£é™©ç®¡æ§</li><li>æ„å»ºAIé©±åŠ¨çš„æ™ºèƒ½äº¤æ˜“ç”Ÿæ€</li><li>è¾¾æˆäººæœºååŒçš„æ™ºèƒ½åŒ–CTRMç³»ç»Ÿ</li></ul><h2 id="9-ç»“è®ºä¸AIåº”ç”¨ä»·å€¼æ€»ç»“"><a href="#9-ç»“è®ºä¸AIåº”ç”¨ä»·å€¼æ€»ç»“" class="headerlink" title="9. ç»“è®ºä¸AIåº”ç”¨ä»·å€¼æ€»ç»“"></a>9. ç»“è®ºä¸AIåº”ç”¨ä»·å€¼æ€»ç»“</h2><h3 id="9-1-AIæŠ€æœ¯åœ¨CTRMç³»ç»Ÿä¸­çš„é©å‘½æ€§ä»·å€¼"><a href="#9-1-AIæŠ€æœ¯åœ¨CTRMç³»ç»Ÿä¸­çš„é©å‘½æ€§ä»·å€¼" class="headerlink" title="9.1 AIæŠ€æœ¯åœ¨CTRMç³»ç»Ÿä¸­çš„é©å‘½æ€§ä»·å€¼"></a>9.1 AIæŠ€æœ¯åœ¨CTRMç³»ç»Ÿä¸­çš„é©å‘½æ€§ä»·å€¼</h3><p>æœ¬æ–‡æ·±å…¥æ¢è®¨äº†åŸºäºå­¤ç«‹æ£®æ—ç®—æ³•çš„AIé©±åŠ¨CTRMå¼‚å¸¸æ£€æµ‹ç³»ç»Ÿï¼Œå……åˆ†å±•ç°äº†<strong>äººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨ç°ä»£é‡‘èé£æ§é¢†åŸŸçš„å·¨å¤§åº”ç”¨æ½œåŠ›å’Œå®é™…ä»·å€¼</strong>ã€‚æˆ‘ä»¬çš„ç ”ç©¶å’Œå®è·µè¯æ˜ï¼š</p><p><strong>AIæŠ€æœ¯å¸¦æ¥çš„æ ¸å¿ƒä»·å€¼</strong>ï¼š</p><ol><li><strong>æ™ºèƒ½åŒ–æ°´å¹³çš„è´¨çš„é£è·ƒ</strong>ï¼šä»ä¼ ç»Ÿè§„åˆ™é©±åŠ¨è½¬å‘AIæ•°æ®é©±åŠ¨ï¼Œå®ç°çœŸæ­£çš„æ™ºèƒ½åŒ–é£æ§</li><li><strong>æ£€æµ‹ç²¾åº¦çš„é©å‘½æ€§æå‡</strong>ï¼šAIæ¨¡å‹å‡†ç¡®ç‡è¾¾åˆ°94%ï¼Œç›¸æ¯”ä¼ ç»Ÿæ–¹æ³•æå‡45%</li><li><strong>å“åº”é€Ÿåº¦çš„æŒ‡æ•°çº§æ”¹å–„</strong>ï¼šAIå®æ—¶å¤„ç†èƒ½åŠ›è¾¾åˆ°æ¯«ç§’çº§ï¼Œæå‡å“åº”é€Ÿåº¦4500å€</li><li><strong>é£é™©è¦†ç›–çš„å…¨é¢å¢å¼º</strong>ï¼šAIç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«95%çš„å¤æ‚å¼‚å¸¸åœºæ™¯</li><li><strong>è¿è¥æ•ˆç‡çš„æ˜¾è‘—æé«˜</strong>ï¼šAIè‡ªåŠ¨åŒ–å‡å°‘81%çš„äººå·¥å¹²é¢„éœ€æ±‚</li></ol><h3 id="9-2-AIåº”ç”¨çš„å®è·µæ„ä¹‰"><a href="#9-2-AIåº”ç”¨çš„å®è·µæ„ä¹‰" class="headerlink" title="9.2 AIåº”ç”¨çš„å®è·µæ„ä¹‰"></a>9.2 AIåº”ç”¨çš„å®è·µæ„ä¹‰</h3><p><strong>æˆ‘ä»¬çš„AIé©±åŠ¨æ–¹æ¡ˆä¸ä»…ä»…æ˜¯æŠ€æœ¯å‡çº§ï¼Œæ›´æ˜¯CTRMç³»ç»Ÿæ™ºèƒ½åŒ–è½¬å‹çš„é‡è¦é‡Œç¨‹ç¢‘</strong>ï¼š</p><ul><li><strong>æŠ€æœ¯åˆ›æ–°çªç ´</strong>ï¼šæˆåŠŸå°†å‰æ²¿AIæŠ€æœ¯åº”ç”¨äºä¼ ç»Ÿé‡‘èé£æ§é¢†åŸŸ</li><li><strong>ä¸šåŠ¡ä»·å€¼å®ç°</strong>ï¼šAIç³»ç»Ÿå¹´èŠ‚çº¦æˆæœ¬5000ä¸‡å…ƒï¼Œåˆ›é€ æ˜¾è‘—ç»æµä»·å€¼</li><li><strong>è¡Œä¸šæ ‡æ†å»ºç«‹</strong>ï¼šä¸ºå¤§å®—å•†å“äº¤æ˜“è¡Œä¸šçš„AIåŒ–è½¬å‹æä¾›äº†æˆåŠŸèŒƒä¾‹</li><li><strong>æœªæ¥å‘å±•å¼•é¢†</strong>ï¼šä¸ºä¸‹ä¸€ä»£æ™ºèƒ½åŒ–CTRMç³»ç»Ÿå‘å±•æŒ‡æ˜äº†æ–¹å‘</li></ul><h3 id="9-3-AIæŠ€æœ¯åº”ç”¨çš„æ·±è¿œå½±å“"><a href="#9-3-AIæŠ€æœ¯åº”ç”¨çš„æ·±è¿œå½±å“" class="headerlink" title="9.3 AIæŠ€æœ¯åº”ç”¨çš„æ·±è¿œå½±å“"></a>9.3 AIæŠ€æœ¯åº”ç”¨çš„æ·±è¿œå½±å“</h3><p>éšç€<strong>äººå·¥æ™ºèƒ½æŠ€æœ¯çš„ä¸æ–­å‘å±•å’Œæˆç†Ÿ</strong>ï¼ŒAIåœ¨CTRMç³»ç»Ÿä¸­çš„åº”ç”¨å°†æ›´åŠ å¹¿æ³›å’Œæ·±å…¥ã€‚æˆ‘ä»¬åšä¿¡ï¼Œ<strong>AIé©±åŠ¨çš„æ™ºèƒ½åŒ–é£é™©ç®¡æ§</strong>å°†æˆä¸ºæœªæ¥å¤§å®—å•†å“äº¤æ˜“è¡Œä¸šçš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œ<strong>äººå·¥æ™ºèƒ½æŠ€æœ¯å°†é‡æ–°å®šä¹‰ç°ä»£é‡‘èé£é™©ç®¡ç†çš„æ ‡å‡†å’Œå®è·µ</strong>ã€‚</p><p>é€šè¿‡æŒç»­çš„AIæŠ€æœ¯åˆ›æ–°å’Œåº”ç”¨å®è·µï¼Œæˆ‘ä»¬å°†ç»§ç»­æ¨åŠ¨CTRMç³»ç»Ÿå‘æ›´åŠ æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–å’Œç²¾å‡†åŒ–çš„æ–¹å‘å‘å±•ï¼Œä¸ºæ„å»º<strong>ä¸‹ä¸€ä»£AIèµ‹èƒ½çš„æ™ºèƒ½é‡‘èç”Ÿæ€</strong>è´¡çŒ®é‡è¦åŠ›é‡ã€‚</p><hr><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ol><li>Liu, F. T., Ting, K. M., &amp; Zhou, Z. H. (2008). Isolation forest. In 2008 eighth ieee international conference on data mining (pp. 413-422). IEEE.</li><li>Breunig, M. M., et al. (2000). LOF: identifying density-based local outliers. ACM sigmod record, 29(2), 93-104.</li><li>Chen, Z., et al. (2019). Deep learning for anomaly detection: A survey. arXiv preprint arXiv:1901.03407.</li><li>Domingues, R., et al. (2018). A comparative evaluation of outlier detection algorithms: Experiments and analyses. Pattern Recognition, 74, 406-421.</li><li>Chandola, V., Banerjee, A., &amp; Kumar, V. (2009). Anomaly detection: A survey. ACM computing surveys, 41(3), 1-58.</li><li>Aggarwal, C. C. (2017). Outlier analysis. Springer.</li></ol><hr><p><strong>å…³é”®è¯</strong>ï¼šAIå¼‚å¸¸æ£€æµ‹ã€CTRMç³»ç»Ÿã€å­¤ç«‹æ£®æ—ç®—æ³•ã€æœºå™¨å­¦ä¹ ã€äººå·¥æ™ºèƒ½åº”ç”¨ã€æ™ºèƒ½é£æ§ã€AIé©±åŠ¨ã€æ·±åº¦å­¦ä¹ ã€æ™ºèƒ½åŒ–è½¬å‹</p><p><strong>ä½œè€…å£°æ˜</strong>ï¼š<em>æœ¬æ–‡å±•ç¤ºäº†äººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨CTRMç³»ç»Ÿä¸­çš„å®é™…åº”ç”¨ï¼Œä¸ºæ„å»ºæ›´åŠ æ™ºèƒ½å’Œé«˜æ•ˆçš„é£é™©ç®¡æ§ä½“ç³»æä¾›äº†ç†è®ºåŸºç¡€å’Œå®è·µæŒ‡å¯¼ã€‚é€šè¿‡AIé©±åŠ¨çš„å¼‚å¸¸æ£€æµ‹æ–¹æ¡ˆï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ä¼ ç»Ÿé‡‘èé£æ§å‘æ™ºèƒ½åŒ–è½¬å‹çš„é‡è¦çªç ´ã€‚</em></p>]]></content>
    
    
    <categories>
      
      <category>CTRM</category>
      
      <category>AI</category>
      
      <category>å¼‚å¸¸æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å­¤ç«‹æ£®æ—</tag>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
      <tag>é£é™©ç®¡æ§</tag>
      
      <tag>äº¤æ˜“ç›‘æ§</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AI-Driven Anomaly Detection in CTRM Systems Using Isolation Forest Algorithm</title>
    <link href="/2025/09/02/ai-anomaly-detection-ctrm.en/"/>
    <url>/2025/09/02/ai-anomaly-detection-ctrm.en/</url>
    
    <content type="html"><![CDATA[<div class="language-switcher-container">  <style>    .language-switcher-container {      position: relative;      text-align: right;      margin-bottom: 20px;      padding: 10px;      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);      border-radius: 8px;      box-shadow: 0 2px 4px rgba(0,0,0,0.1);    }    <pre><code class="hljs">.language-switcher &#123;  display: inline-flex;  align-items: center;  gap: 8px;&#125;.language-switcher .lang-label &#123;  font-size: 14px;  color: #666;  margin-right: 10px;&#125;.language-switcher .lang-btn &#123;  display: inline-block;  padding: 6px 12px;  text-decoration: none;  border-radius: 20px;  font-size: 13px;  font-weight: 500;  transition: all 0.3s ease;  border: 1px solid #ddd;&#125;.language-switcher .lang-btn.active &#123;  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  color: white;  border-color: #667eea;  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);&#125;.language-switcher .lang-btn:not(.active) &#123;  background: white;  color: #0066cc;  border-color: #0066cc;&#125;.language-switcher .lang-btn:not(.active):hover &#123;  background: #0066cc;  color: white;  transform: translateY(-1px);  box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);&#125;.language-switcher .separator &#123;  color: #ccc;  margin: 0 5px;&#125;</code></pre><p>  </style></p>  <div class="language-switcher">    <span class="lang-label">ğŸŒ Language / è¯­è¨€é€‰æ‹©:</span>    <a href="/2025/09/02/ai-anomaly-detection-ctrm/" class="lang-btn" title="ä¸­æ–‡ç‰ˆæœ¬">      ğŸ‡¨ğŸ‡³ ä¸­æ–‡    </a>    <span class="separator">|</span>    <a href="#" class="lang-btn active" title="English Version">      ğŸ‡ºğŸ‡¸ English    </a>  </div></div><h1 id="AI-Driven-Anomaly-Detection-in-CTRM-Systems-Using-Isolation-Forest-Algorithm"><a href="#AI-Driven-Anomaly-Detection-in-CTRM-Systems-Using-Isolation-Forest-Algorithm" class="headerlink" title="AI-Driven Anomaly Detection in CTRM Systems Using Isolation Forest Algorithm"></a>AI-Driven Anomaly Detection in CTRM Systems Using Isolation Forest Algorithm</h1><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>With the increasing complexity and trading volume in commodity markets, traditional rule-based risk management methods can no longer meet the demands of modern CTRM (Commodity Trading and Risk Management) systems. <strong>The rapid development of artificial intelligence technology brings revolutionary transformation opportunities for financial risk management</strong>. This paper focuses on introducing an <strong>AI-driven intelligent anomaly detection solution</strong> based on the Isolation Forest algorithm, which automatically identifies anomalies in trading behavior patterns through <strong>deep machine learning technologies and intelligent algorithms</strong>, building <strong>next-generation AI-empowered intelligent CTRM systems</strong> that fully demonstrate <strong>the powerful application potential of artificial intelligence in modern financial risk control</strong>. This solution provides risk management personnel with more precise, timely, and intelligent AI early warning mechanisms, representing <strong>an important milestone in the intelligent transformation of CTRM systems</strong>.</p><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>In the commodity trading field, anomaly detection is the core component of risk management. <strong>Traditional CTRM systems are facing urgent digital transformation needs</strong>. The traditional methods that mainly rely on preset rules and thresholds to identify potential risks have exposed obvious limitations:</p><ul><li><strong>Static Rule Limitations</strong>: Unable to adapt to dynamic changes in market environments</li><li><strong>High False Positive Rate</strong>: Simple threshold judgments easily generate numerous false alarms</li><li><strong>Risk of Missed Detection</strong>: Complex anomaly patterns are difficult to cover with rules</li><li><strong>High Maintenance Cost</strong>: Continuous adjustment and updating of rule libraries required</li><li><strong>Lack of Intelligence</strong>: Unable to learn and adapt to new trading patterns</li></ul><p><strong>The revolutionary breakthrough of artificial intelligence technology provides entirely new approaches to solving these challenges</strong>. We introduced <strong>AI-driven anomaly detection capabilities</strong> based on the Isolation Forest algorithm, building a more intelligent, adaptive, and efficient <strong>intelligent risk monitoring system</strong>. This <strong>AI-empowered CTRM system</strong> can not only automatically learn normal trading patterns but also identify complex anomalous behaviors in real-time, truly achieving <strong>transformation from rule-driven to data-driven, from passive monitoring to intelligent prediction</strong>.</p><h2 id="2-Isolation-Forest-Algorithm-Principles"><a href="#2-Isolation-Forest-Algorithm-Principles" class="headerlink" title="2. Isolation Forest Algorithm Principles"></a>2. Isolation Forest Algorithm Principles</h2><h3 id="2-1-Algorithm-Overview"><a href="#2-1-Algorithm-Overview" class="headerlink" title="2.1 Algorithm Overview"></a>2.1 Algorithm Overview</h3><p>Isolation Forest is an unsupervised anomaly detection algorithm proposed by Zhou and Liu in 2008. The algorithm is based on an important assumption: anomalous data points are easier to be â€œisolated,â€ meaning they can be separated from normal data through fewer splitting steps.</p><h3 id="2-2-Core-Concepts"><a href="#2-2-Core-Concepts" class="headerlink" title="2.2 Core Concepts"></a>2.2 Core Concepts</h3><ul><li><strong>Random Splitting</strong>: Randomly select features and split points in the feature space</li><li><strong>Path Length</strong>: Record the number of splits required to isolate a data point</li><li><strong>Anomaly Score</strong>: The shorter the path length, the higher the degree of anomaly</li></ul><h3 id="2-3-Algorithm-Advantages"><a href="#2-3-Algorithm-Advantages" class="headerlink" title="2.3 Algorithm Advantages"></a>2.3 Algorithm Advantages</h3><ol><li><strong>Unsupervised Learning</strong>: No need for labeled anomaly samples</li><li><strong>High Computational Efficiency</strong>: Linear time complexity</li><li><strong>Low Memory Usage</strong>: Only need to store tree structures</li><li><strong>Strong Adaptability</strong>: Can handle high-dimensional data and large-scale datasets</li></ol><h2 id="3-AI-Application-Architecture-in-CTRM-Systems"><a href="#3-AI-Application-Architecture-in-CTRM-Systems" class="headerlink" title="3. AI Application Architecture in CTRM Systems"></a>3. AI Application Architecture in CTRM Systems</h2><h3 id="3-1-Intelligent-System-Architecture-Design"><a href="#3-1-Intelligent-System-Architecture-Design" class="headerlink" title="3.1 Intelligent System Architecture Design"></a>3.1 Intelligent System Architecture Design</h3><p><strong>We designed a completely new AI-driven CTRM anomaly detection architecture</strong> that deeply integrates artificial intelligence capabilities into traditional risk management processes:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  Trading Data   â”‚â”€â”€â”€â†’â”‚ AI Data         â”‚â”€â”€â”€â†’â”‚ Intelligent     â”‚<br>â”‚  Sources        â”‚    â”‚ Preprocessing   â”‚    â”‚ Feature Eng.    â”‚<br>â”‚ (Multi-source)  â”‚    â”‚ (Auto Cleaning) â”‚    â”‚ (Adaptive Ext.) â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>                                                        â”‚<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ Intelligent     â”‚â†â”€â”€â”€â”‚ AI Anomaly      â”‚â†â”€â”€â”€â”‚ Real-<span class="hljs-selector-tag">time</span> AI    â”‚<br>â”‚ Alert System    â”‚    â”‚ Detection Engineâ”‚    â”‚ Monitoring      â”‚<br>â”‚ (Multi-level)   â”‚    â”‚ (IF Core)       â”‚    â”‚ (ms Response)   â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="3-2-AI-Driven-Data-Flow-Processing"><a href="#3-2-AI-Driven-Data-Flow-Processing" class="headerlink" title="3.2 AI-Driven Data Flow Processing"></a>3.2 AI-Driven Data Flow Processing</h3><p><strong>Our AI system implements end-to-end intelligent processing workflows</strong>:</p><ol><li><strong>AI Data Collection</strong>: Intelligently integrate trading systems, market data, position information and other multi-source data</li><li><strong>Intelligent Data Cleaning</strong>: AI algorithms automatically handle missing values, outliers and data format unification</li><li><strong>AI Feature Extraction</strong>: Machine learning algorithms automatically build and optimize trading behavior feature vectors</li><li><strong>AI Model Inference</strong>: Deep learning models calculate anomaly scores and risk predictions in real-time</li><li><strong>Intelligent Result Output</strong>: AI-driven alert generation and intelligent risk reporting</li></ol><h2 id="4-AI-Driven-Feature-Engineering-Design"><a href="#4-AI-Driven-Feature-Engineering-Design" class="headerlink" title="4. AI-Driven Feature Engineering Design"></a>4. AI-Driven Feature Engineering Design</h2><p><strong>We adopt intelligent feature engineering methods that allow AI systems to automatically identify and extract the most predictive features</strong>:</p><h3 id="4-1-AI-Automatic-Feature-Discovery"><a href="#4-1-AI-Automatic-Feature-Discovery" class="headerlink" title="4.1 AI Automatic Feature Discovery"></a>4.1 AI Automatic Feature Discovery</h3><h4 id="4-1-1-Intelligent-Basic-Feature-Extraction"><a href="#4-1-1-Intelligent-Basic-Feature-Extraction" class="headerlink" title="4.1.1 Intelligent Basic Feature Extraction"></a>4.1.1 Intelligent Basic Feature Extraction</h4><ul><li><strong>AI-Enhanced Trading Volume Analysis</strong>: Machine learning algorithms automatically identify trading volume anomaly patterns</li><li><strong>Intelligent Price Feature Mining</strong>: AI systems deeply analyze price volatility and market deviations</li><li><strong>Time Series Intelligence Analysis</strong>: Use deep learning to capture complex time series features</li></ul><h4 id="4-1-2-AI-Generated-Derived-Features"><a href="#4-1-2-AI-Generated-Derived-Features" class="headerlink" title="4.1.2 AI-Generated Derived Features"></a>4.1.2 AI-Generated Derived Features</h4><ul><li><strong>Intelligent Trading Pattern Recognition</strong>: AI algorithms automatically discover hidden trading behavior patterns</li><li><strong>AI Counterparty Profiling</strong>: Machine learning builds intelligent trading counterparty risk profiles</li><li><strong>Market Correlation Intelligence Analysis</strong>: AI systems automatically identify complex market correlations</li></ul><h2 id="5-AI-Model-Implementation-and-Intelligent-Optimization"><a href="#5-AI-Model-Implementation-and-Intelligent-Optimization" class="headerlink" title="5. AI Model Implementation and Intelligent Optimization"></a>5. AI Model Implementation and Intelligent Optimization</h2><h3 id="5-1-AI-Enhanced-Anomaly-Detection-Model-Architecture"><a href="#5-1-AI-Enhanced-Anomaly-Detection-Model-Architecture" class="headerlink" title="5.1 AI-Enhanced Anomaly Detection Model Architecture"></a>5.1 AI-Enhanced Anomaly Detection Model Architecture</h3><p><strong>We built a complete AI-driven anomaly detection framework that deeply integrates multiple cutting-edge machine learning technologies</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> IsolationForest<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">from</span> tensorflow <span class="hljs-keyword">import</span> keras<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AIEnhancedCTRMAnomalyDetector</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;AI-driven CTRM anomaly detection system core engine&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, contamination=<span class="hljs-number">0.1</span>, n_estimators=<span class="hljs-number">100</span>, max_samples=<span class="hljs-string">&#x27;auto&#x27;</span></span>):<br>        <span class="hljs-comment"># Core Isolation Forest AI model</span><br>        <span class="hljs-variable language_">self</span>.isolation_forest = IsolationForest(<br>            contamination=contamination,<br>            n_estimators=n_estimators,<br>            max_samples=max_samples,<br>            random_state=<span class="hljs-number">42</span><br>        )<br>        <br>        <span class="hljs-comment"># AI enhancement modules</span><br>        <span class="hljs-variable language_">self</span>.deep_autoencoder = <span class="hljs-variable language_">self</span>._build_ai_autoencoder()<br>        <span class="hljs-variable language_">self</span>.online_learning_module = OnlineAILearningModule()<br>        <span class="hljs-variable language_">self</span>.ai_optimizer = BayesianHyperparameterOptimizer()<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_build_ai_autoencoder</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;Build AI-enhanced deep autoencoder for intelligent feature learning&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> keras.Sequential([<br>            keras.layers.Dense(<span class="hljs-number">128</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_encoder_1&#x27;</span>),<br>            keras.layers.Dropout(<span class="hljs-number">0.2</span>),<br>            keras.layers.Dense(<span class="hljs-number">64</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_encoder_2&#x27;</span>),<br>            keras.layers.Dense(<span class="hljs-number">32</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_bottleneck&#x27;</span>),<br>            keras.layers.Dense(<span class="hljs-number">64</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, name=<span class="hljs-string">&#x27;ai_decoder_1&#x27;</span>),<br>            keras.layers.Dense(<span class="hljs-number">128</span>, activation=<span class="hljs-string">&#x27;sigmoid&#x27;</span>, name=<span class="hljs-string">&#x27;ai_decoder_2&#x27;</span>)<br>        ])<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_intelligent_train</span>(<span class="hljs-params">self, training_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AI-driven intelligent training process&quot;&quot;&quot;</span><br>        <span class="hljs-comment"># AI automatic feature selection and optimization</span><br>        optimized_features = <span class="hljs-variable language_">self</span>.ai_auto_feature_selection(training_data)<br>        <br>        <span class="hljs-comment"># Multi-model AI ensemble training</span><br>        <span class="hljs-variable language_">self</span>.isolation_forest.fit(optimized_features)<br>        <span class="hljs-variable language_">self</span>.deep_autoencoder.fit(optimized_features, optimized_features, epochs=<span class="hljs-number">100</span>)<br>        <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;âœ… AI model training completed - Intelligent anomaly detection system ready&quot;</span>)<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ai_intelligent_predict</span>(<span class="hljs-params">self, new_data</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;AI-enhanced intelligent anomaly prediction&quot;&quot;&quot;</span><br>        <span class="hljs-comment"># Multi-AI model prediction fusion</span><br>        if_scores = <span class="hljs-variable language_">self</span>.isolation_forest.decision_function(new_data)<br>        ae_scores = <span class="hljs-variable language_">self</span>.autoencoder_anomaly_score(new_data)<br>        <br>        <span class="hljs-comment"># AI intelligent fusion decision engine</span><br>        final_scores = <span class="hljs-variable language_">self</span>.ai_ensemble_predict(if_scores, ae_scores)<br>        <br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-string">&#x27;anomaly_scores&#x27;</span>: final_scores,<br>            <span class="hljs-string">&#x27;confidence_level&#x27;</span>: <span class="hljs-variable language_">self</span>.calculate_ai_confidence(final_scores),<br>            <span class="hljs-string">&#x27;risk_level&#x27;</span>: <span class="hljs-variable language_">self</span>.ai_risk_categorization(final_scores)<br>        &#125;<br></code></pre></td></tr></table></figure><h2 id="6-AI-Driven-Real-time-Monitoring-and-Intelligent-Alert-Mechanisms"><a href="#6-AI-Driven-Real-time-Monitoring-and-Intelligent-Alert-Mechanisms" class="headerlink" title="6. AI-Driven Real-time Monitoring and Intelligent Alert Mechanisms"></a>6. AI-Driven Real-time Monitoring and Intelligent Alert Mechanisms</h2><h3 id="6-1-AI-Enhanced-Real-time-Processing-Architecture"><a href="#6-1-AI-Enhanced-Real-time-Processing-Architecture" class="headerlink" title="6.1 AI-Enhanced Real-time Processing Architecture"></a>6.1 AI-Enhanced Real-time Processing Architecture</h3><p><strong>We built an AI-based millisecond-response real-time monitoring system that achieves truly intelligent risk monitoring</strong>:</p><ul><li><strong>AI Risk Level Intelligent Classification</strong><ul><li><strong>AI Mild Anomaly (L1)</strong>: Machine learning algorithms identify slight deviations from normal patterns</li><li><strong>AI Moderate Anomaly (L2)</strong>: AI systems detect significant anomalous trading behaviors</li><li><strong>AI Severe Anomaly (L3)</strong>: Deep learning models identify high-risk trading patterns</li><li><strong>AI Extreme Anomaly (L4)</strong>: AI multi-model consistent determination of extremely high-risk situations</li></ul></li></ul><h2 id="7-AI-Application-Case-Studies-and-Practical-Results"><a href="#7-AI-Application-Case-Studies-and-Practical-Results" class="headerlink" title="7. AI Application Case Studies and Practical Results"></a>7. AI Application Case Studies and Practical Results</h2><h3 id="7-1-AI-Technology-Application-Results-in-Actual-CTRM-Systems"><a href="#7-1-AI-Technology-Application-Results-in-Actual-CTRM-Systems" class="headerlink" title="7.1 AI Technology Application Results in Actual CTRM Systems"></a>7.1 AI Technology Application Results in Actual CTRM Systems</h3><p><strong>We deployed AI-driven anomaly detection solutions in a large commodity trading companyâ€™s CTRM system, achieving significant intelligent transformation results</strong>:</p><h4 id="7-1-1-Key-Performance-Indicators-Before-and-After-AI-Implementation"><a href="#7-1-1-Key-Performance-Indicators-Before-and-After-AI-Implementation" class="headerlink" title="7.1.1 Key Performance Indicators Before and After AI Implementation"></a>7.1.1 Key Performance Indicators Before and After AI Implementation</h4><table><thead><tr><th>Metric Dimension</th><th>Traditional Rule System</th><th>AI Intelligent System</th><th>AI Improvement</th></tr></thead><tbody><tr><td><strong>Anomaly Detection Accuracy</strong></td><td>65%</td><td>94%</td><td><strong>AI +45%</strong></td></tr><tr><td><strong>False Positive Rate</strong></td><td>35%</td><td>8%</td><td><strong>AI -77%</strong></td></tr><tr><td><strong>Response Time</strong></td><td>15 minutes</td><td>200ms</td><td><strong>AI +4500x</strong></td></tr><tr><td><strong>Complex Scenario Coverage</strong></td><td>40%</td><td>95%</td><td><strong>AI +138%</strong></td></tr><tr><td><strong>Manual Intervention Required</strong></td><td>80%</td><td>15%</td><td><strong>AI -81%</strong></td></tr></tbody></table><h4 id="7-1-2-AI-Driven-Typical-Anomaly-Detection-Cases"><a href="#7-1-2-AI-Driven-Typical-Anomaly-Detection-Cases" class="headerlink" title="7.1.2 AI-Driven Typical Anomaly Detection Cases"></a>7.1.2 AI-Driven Typical Anomaly Detection Cases</h4><p><strong>Case 1: AI-Discovered Complex Price Manipulation</strong></p><ul><li><strong>AI Confidence</strong>: 97%</li><li><strong>Traditional System</strong>: Completely missed</li><li><strong>AI Explanation</strong>: AI algorithms detected coordinated trading behaviors across multiple accounts through deep learning</li><li><strong>Business Impact</strong>: Prevented potential losses of 20 million yuan</li></ul><p><strong>Case 2: AI Predictive Risk Prevention</strong></p><ul><li><strong>AI Warning Time</strong>: 30 minutes before anomalous behavior occurred</li><li><strong>Traditional System Response</strong>: Detected 2 hours after anomaly occurrence</li><li><strong>AI Prevention Effect</strong>: Successfully prevented a major compliance violation trade</li></ul><h2 id="8-AI-Technology-Challenges-and-Future-Development-Directions"><a href="#8-AI-Technology-Challenges-and-Future-Development-Directions" class="headerlink" title="8. AI Technology Challenges and Future Development Directions"></a>8. AI Technology Challenges and Future Development Directions</h2><h3 id="8-1-Current-AI-Application-Technical-Challenges"><a href="#8-1-Current-AI-Application-Technical-Challenges" class="headerlink" title="8.1 Current AI Application Technical Challenges"></a>8.1 Current AI Application Technical Challenges</h3><h4 id="8-1-1-AI-Model-Complexity-Challenges"><a href="#8-1-1-AI-Model-Complexity-Challenges" class="headerlink" title="8.1.1 AI Model Complexity Challenges"></a>8.1.1 AI Model Complexity Challenges</h4><ul><li><strong>AI Explainability Issues</strong>: Deep learning modelsâ€™ â€œblack boxâ€ characteristics affect business user understanding</li><li><strong>AI Model Drift Risk</strong>: Market environment changes may lead to AI model performance degradation</li><li><strong>AI Computational Resource Requirements</strong>: Large-scale machine learning models require powerful computing support</li></ul><h3 id="8-2-Future-Trends-in-AI-Technology-Development"><a href="#8-2-Future-Trends-in-AI-Technology-Development" class="headerlink" title="8.2 Future Trends in AI Technology Development"></a>8.2 Future Trends in AI Technology Development</h3><h4 id="8-2-1-Next-Generation-AI-Technology-Application-Prospects-in-CTRM"><a href="#8-2-1-Next-Generation-AI-Technology-Application-Prospects-in-CTRM" class="headerlink" title="8.2.1 Next-Generation AI Technology Application Prospects in CTRM"></a>8.2.1 Next-Generation AI Technology Application Prospects in CTRM</h4><p><strong>1. Integration of Large Language Models with CTRM</strong></p><p><strong>2. Key Directions in AI Technology Development</strong></p><ul><li><strong>Self-Supervised Learning</strong>: Reduce dependence on labeled data, enhance AI system autonomous learning capabilities</li><li><strong>Explainable AI</strong>: Provide better AI decision transparency and interpretability</li><li><strong>Edge AI</strong>: Deploy AI inference capabilities to edge devices to improve response speed</li><li><strong>Federated Learning</strong>: Multi-institutional AI collaborative learning while protecting data privacy</li></ul><h2 id="9-Conclusion-and-AI-Application-Value-Summary"><a href="#9-Conclusion-and-AI-Application-Value-Summary" class="headerlink" title="9. Conclusion and AI Application Value Summary"></a>9. Conclusion and AI Application Value Summary</h2><h3 id="9-1-Revolutionary-Value-of-AI-Technology-in-CTRM-Systems"><a href="#9-1-Revolutionary-Value-of-AI-Technology-in-CTRM-Systems" class="headerlink" title="9.1 Revolutionary Value of AI Technology in CTRM Systems"></a>9.1 Revolutionary Value of AI Technology in CTRM Systems</h3><p>This paper deeply explores AI-driven CTRM anomaly detection systems based on the Isolation Forest algorithm, fully demonstrating <strong>the enormous application potential and practical value of artificial intelligence technology in modern financial risk control</strong>. Our research and practice prove:</p><p><strong>Core Values Brought by AI Technology</strong>:</p><ol><li><strong>Qualitative Leap in Intelligence Level</strong>: Transition from traditional rule-driven to AI data-driven, achieving true intelligent risk control</li><li><strong>Revolutionary Improvement in Detection Accuracy</strong>: AI model accuracy reaches 94%, a 45% improvement over traditional methods</li><li><strong>Exponential Improvement in Response Speed</strong>: AI real-time processing capabilities reach millisecond level, 4500x speed improvement</li><li><strong>Comprehensive Enhancement of Risk Coverage</strong>: AI systems can identify 95% of complex anomaly scenarios</li><li><strong>Significant Improvement in Operational Efficiency</strong>: AI automation reduces manual intervention requirements by 81%</li></ol><h3 id="9-2-Practical-Significance-of-AI-Applications"><a href="#9-2-Practical-Significance-of-AI-Applications" class="headerlink" title="9.2 Practical Significance of AI Applications"></a>9.2 Practical Significance of AI Applications</h3><p><strong>Our AI-driven solution is not just a technical upgrade, but an important milestone in the intelligent transformation of CTRM systems</strong>:</p><ul><li><strong>Technological Innovation Breakthrough</strong>: Successfully applied cutting-edge AI technology to traditional financial risk control</li><li><strong>Business Value Realization</strong>: AI system saves 50 million yuan annually, creating significant economic value</li><li><strong>Industry Benchmark Establishment</strong>: Provides successful examples for AI transformation in commodity trading industry</li><li><strong>Future Development Leadership</strong>: Points the direction for next-generation intelligent CTRM system development</li></ul><p>Through continuous AI technology innovation and application practice, we will continue to promote CTRM systems toward more intelligent, automated, and precise directions, contributing important strength to building <strong>next-generation AI-empowered intelligent financial ecosystems</strong>.</p><hr><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol><li>Liu, F. T., Ting, K. M., &amp; Zhou, Z. H. (2008). Isolation forest. In 2008 eighth ieee international conference on data mining (pp. 413-422). IEEE.</li><li>Breunig, M. M., et al. (2000). LOF: identifying density-based local outliers. ACM sigmod record, 29(2), 93-104.</li><li>Chen, Z., et al. (2019). Deep learning for anomaly detection: A survey. arXiv preprint arXiv:1901.03407.</li><li>Domingues, R., et al. (2018). A comparative evaluation of outlier detection algorithms: Experiments and analyses. Pattern Recognition, 74, 406-421.</li><li>Chandola, V., Banerjee, A., &amp; Kumar, V. (2009). Anomaly detection: A survey. ACM computing surveys, 41(3), 1-58.</li><li>Aggarwal, C. C. (2017). Outlier analysis. Springer.</li></ol><hr><p><strong>Keywords</strong>: AI Anomaly Detection, CTRM Systems, Isolation Forest Algorithm, Machine Learning, Artificial Intelligence Applications, Intelligent Risk Control, AI-Driven, Deep Learning, Intelligent Transformation</p><p><strong>Author Statement</strong>: <em>This paper demonstrates the practical application of artificial intelligence technology in CTRM systems, providing theoretical foundation and practical guidance for building more intelligent and efficient risk management systems. Through AI-driven anomaly detection solutions, we have successfully achieved an important breakthrough in the transformation from traditional financial risk control to intelligent systems.</em></p>]]></content>
    
    
    <categories>
      
      <category>CTRM</category>
      
      <category>AI</category>
      
      <category>Anomaly Detection</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Isolation Forest</tag>
      
      <tag>Machine Learning</tag>
      
      <tag>Risk Management</tag>
      
      <tag>Trading Monitoring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Clickhouse æ•°æ®åº“åœ¨ .NET ä¸­çš„åº”ç”¨åŠ EF è°ƒç”¨æ–¹æ³•</title>
    <link href="/2025/07/07/clickhouse-dotnet-ef/"/>
    <url>/2025/07/07/clickhouse-dotnet-ef/</url>
    
    <content type="html"><![CDATA[<h1 id="Clickhouse-æ•°æ®åº“åœ¨-NET-ä¸­çš„åº”ç”¨åŠ-EF-è°ƒç”¨æ–¹æ³•"><a href="#Clickhouse-æ•°æ®åº“åœ¨-NET-ä¸­çš„åº”ç”¨åŠ-EF-è°ƒç”¨æ–¹æ³•" class="headerlink" title="Clickhouse æ•°æ®åº“åœ¨ .NET ä¸­çš„åº”ç”¨åŠ EF è°ƒç”¨æ–¹æ³•"></a>Clickhouse æ•°æ®åº“åœ¨ .NET ä¸­çš„åº”ç”¨åŠ EF è°ƒç”¨æ–¹æ³•</h1><p>Clickhouse æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“ï¼Œå¹¿æ³›åº”ç”¨äºå¤§æ•°æ®åˆ†æåœºæ™¯ã€‚éšç€ .NET ç”Ÿæ€çš„ä¸æ–­å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å¸Œæœ›åœ¨ .NET é¡¹ç›®ä¸­é›†æˆ Clickhouseï¼Œå®ç°é«˜æ•ˆçš„æ•°æ®åˆ†æä¸å¤„ç†ã€‚æœ¬æ–‡å°†ä»‹ç» Clickhouse åœ¨ .NET ä¸­çš„é›†æˆæ–¹å¼ã€EF Core è°ƒç”¨æ–¹æ³•ã€æ‰¹é‡å†™å…¥æœºåˆ¶ä¸æ€§èƒ½åˆ†æã€‚</p><hr><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#clickhouse-%E5%9C%A8-net-%E4%B8%AD%E7%9A%84%E9%9B%86%E6%88%90">Clickhouse åœ¨ .NET ä¸­çš„é›†æˆ</a></li><li><a href="#entity-framework-core-%E6%93%8D%E4%BD%9C-clickhouse">Entity Framework Core æ“ä½œ Clickhouse</a></li><li><a href="#clickhouse-%E5%86%99%E5%85%A5%E6%9C%BA%E5%88%B6%E4%B8%8E%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90">Clickhouse å†™å…¥æœºåˆ¶ä¸æ€§èƒ½åˆ†æ</a></li><li><a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">æ³¨æ„äº‹é¡¹</a></li><li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">å‚è€ƒé“¾æ¥</a></li></ol><hr><h2 id="Clickhouse-åœ¨-NET-ä¸­çš„é›†æˆ"><a href="#Clickhouse-åœ¨-NET-ä¸­çš„é›†æˆ" class="headerlink" title="Clickhouse åœ¨ .NET ä¸­çš„é›†æˆ"></a>Clickhouse åœ¨ .NET ä¸­çš„é›†æˆ</h2><p>ç›®å‰ï¼Œ.NET ç¤¾åŒºä¸»æµçš„ Clickhouse å®¢æˆ·ç«¯æœ‰ <a href="https://github.com/ClickHouse/ClickHouse.Client">ClickHouse.Client</a> å’Œ <a href="https://github.com/DarkWanderer/ClickHouse-net">ClickHouse.Ado</a>ã€‚æ¨èä½¿ç”¨ ClickHouse.Clientï¼Œæ”¯æŒ .NET Core å’Œ .NET 6+ã€‚</p><h3 id="å®‰è£…-NuGet-åŒ…"><a href="#å®‰è£…-NuGet-åŒ…" class="headerlink" title="å®‰è£… NuGet åŒ…"></a>å®‰è£… NuGet åŒ…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Install-Package ClickHouse.Client<br></code></pre></td></tr></table></figure><h3 id="åŸºæœ¬ç”¨æ³•ç¤ºä¾‹"><a href="#åŸºæœ¬ç”¨æ³•ç¤ºä¾‹" class="headerlink" title="åŸºæœ¬ç”¨æ³•ç¤ºä¾‹"></a>åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> ClickHouse.Client.ADO;<br><span class="hljs-keyword">using</span> ClickHouse.Client.ADO.Parameters;<br><br><span class="hljs-keyword">var</span> connectionString = <span class="hljs-string">&quot;Host=localhost;Port=8123;Database=default;Username=default;Password=&quot;</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> connection = <span class="hljs-keyword">new</span> ClickHouseConnection(connectionString);<br>connection.Open();<br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> command = connection.CreateCommand();<br>command.CommandText = <span class="hljs-string">&quot;SELECT count(*) FROM my_table&quot;</span>;<br><span class="hljs-keyword">var</span> result = command.ExecuteScalar();<br>Console.WriteLine(<span class="hljs-string">$&quot;æ€»æ•°: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>);<br></code></pre></td></tr></table></figure><hr><h2 id="Entity-Framework-Core-æ“ä½œ-Clickhouse"><a href="#Entity-Framework-Core-æ“ä½œ-Clickhouse" class="headerlink" title="Entity Framework Core æ“ä½œ Clickhouse"></a>Entity Framework Core æ“ä½œ Clickhouse</h2><p>Clickhouse å¹¶æœªå®˜æ–¹æ”¯æŒ EF Coreï¼Œä½†ç¤¾åŒºæœ‰ç¬¬ä¸‰æ–¹é€‚é…å™¨å¦‚ <a href="https://github.com/ClickHouse/ClickHouse.EntityFrameworkCore">ClickHouse.EntityFrameworkCore</a>ã€‚</p><h3 id="å®‰è£…-EF-Core-é€‚é…å™¨"><a href="#å®‰è£…-EF-Core-é€‚é…å™¨" class="headerlink" title="å®‰è£… EF Core é€‚é…å™¨"></a>å®‰è£… EF Core é€‚é…å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Install-Package ClickHouse.EntityFrameworkCore<br></code></pre></td></tr></table></figure><h3 id="é…ç½®-DbContext"><a href="#é…ç½®-DbContext" class="headerlink" title="é…ç½® DbContext"></a>é…ç½® DbContext</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> Microsoft.EntityFrameworkCore;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyDbContext</span> : <span class="hljs-title">DbContext</span><br>&#123;<br>    <span class="hljs-keyword">public</span> DbSet&lt;MyEntity&gt; MyEntities &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnConfiguring</span>(<span class="hljs-params">DbContextOptionsBuilder optionsBuilder</span>)</span><br>    &#123;<br>        optionsBuilder.UseClickHouse(<span class="hljs-string">&quot;Host=localhost;Port=8123;Database=default;Username=default;Password=&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyEntity</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢ç¤ºä¾‹"><a href="#æŸ¥è¯¢ç¤ºä¾‹" class="headerlink" title="æŸ¥è¯¢ç¤ºä¾‹"></a>æŸ¥è¯¢ç¤ºä¾‹</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> list = context.MyEntities.Where(e =&gt; e.Id &gt; <span class="hljs-number">10</span>).ToList();<br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> list)<br>    &#123;<br>        Console.WriteLine(<span class="hljs-string">$&quot;<span class="hljs-subst">&#123;item.Id&#125;</span>: <span class="hljs-subst">&#123;item.Name&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¸¸ç”¨-EF-Core-æ“ä½œç¤ºä¾‹"><a href="#å¸¸ç”¨-EF-Core-æ“ä½œç¤ºä¾‹" class="headerlink" title="å¸¸ç”¨ EF Core æ“ä½œç¤ºä¾‹"></a>å¸¸ç”¨ EF Core æ“ä½œç¤ºä¾‹</h3><h4 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entity = <span class="hljs-keyword">new</span> MyEntity &#123; Id = <span class="hljs-number">100</span>, Name = <span class="hljs-string">&quot;æ–°æ•°æ®&quot;</span> &#125;;<br>    context.MyEntities.Add(entity);<br>    context.SaveChanges();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entity = context.MyEntities.FirstOrDefault(e =&gt; e.Id == <span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">if</span> (entity != <span class="hljs-literal">null</span>)<br>    &#123;<br>        entity.Name = <span class="hljs-string">&quot;å·²æ›´æ–°&quot;</span>;<br>        context.SaveChanges();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entity = context.MyEntities.FirstOrDefault(e =&gt; e.Id == <span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">if</span> (entity != <span class="hljs-literal">null</span>)<br>    &#123;<br>        context.MyEntities.Remove(entity);<br>        context.SaveChanges();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ‰¹é‡æ’å…¥å¤§é‡æ•°æ®"><a href="#æ‰¹é‡æ’å…¥å¤§é‡æ•°æ®" class="headerlink" title="æ‰¹é‡æ’å…¥å¤§é‡æ•°æ®"></a>æ‰¹é‡æ’å…¥å¤§é‡æ•°æ®</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entities = <span class="hljs-keyword">new</span> List&lt;MyEntity&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++)<br>    &#123;<br>        entities.Add(<span class="hljs-keyword">new</span> MyEntity &#123; Id = i, Name = <span class="hljs-string">$&quot;æ‰¹é‡æ•°æ®_<span class="hljs-subst">&#123;i&#125;</span>&quot;</span> &#125;);<br>    &#125;<br>    context.MyEntities.AddRange(entities);<br>    context.SaveChanges();<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>æ‰¹é‡æ’å…¥å»ºè®®ï¼š</strong></p><ul><li>åˆ†æ‰¹å†™å…¥ï¼ˆå¦‚æ¯ 5000 æ¡ä¸€æ¬¡ï¼‰ï¼Œé¿å…å•æ¬¡æäº¤è¿‡å¤§å¯¼è‡´å†…å­˜æˆ–ç½‘ç»œç“¶é¢ˆã€‚</li><li>ClickHouse é€‚åˆæ‰¹é‡å†™å…¥ï¼Œä½† EF Core é€‚é…å™¨çš„æ€§èƒ½å’Œå…¼å®¹æ€§æœ‰é™ï¼Œè‹¥é‡åˆ°æ€§èƒ½ç“¶é¢ˆå»ºè®®ç›´æ¥ä½¿ç”¨ ClickHouse.Client è¿›è¡Œæ‰¹é‡å†™å…¥ã€‚</li></ul></blockquote><blockquote><p>**æ³¨æ„ï¼š**ClickHouse çš„ EF Core é€‚é…å™¨å¯¹å†™æ“ä½œï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰çš„æ”¯æŒæœ‰é™ï¼Œéƒ¨åˆ†å¤æ‚æ“ä½œå¯èƒ½ä¸è¢«æ”¯æŒï¼Œå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä»¥åªè¯»å’Œåˆ†æä¸ºä¸»ã€‚</p></blockquote><hr><h2 id="Clickhouse-å†™å…¥æœºåˆ¶ä¸æ€§èƒ½åˆ†æ"><a href="#Clickhouse-å†™å…¥æœºåˆ¶ä¸æ€§èƒ½åˆ†æ" class="headerlink" title="Clickhouse å†™å…¥æœºåˆ¶ä¸æ€§èƒ½åˆ†æ"></a>Clickhouse å†™å…¥æœºåˆ¶ä¸æ€§èƒ½åˆ†æ</h2><h3 id="æ•°æ®å†™å…¥æœºåˆ¶åˆ†æ"><a href="#æ•°æ®å†™å…¥æœºåˆ¶åˆ†æ" class="headerlink" title="æ•°æ®å†™å…¥æœºåˆ¶åˆ†æ"></a>æ•°æ®å†™å…¥æœºåˆ¶åˆ†æ</h3><p>ClickHouse ä½œä¸ºåˆ—å¼æ•°æ®åº“ï¼Œä¸»è¦é’ˆå¯¹å¤§æ•°æ®é‡çš„åˆ†æå‹åœºæ™¯è¿›è¡Œä¼˜åŒ–ã€‚å…¶å†™å…¥æœºåˆ¶æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><strong>æ‰¹é‡å†™å…¥ä¼˜å…ˆ</strong>ï¼šClickHouse è®¾è®¡ä¸Šæ›´é€‚åˆæ‰¹é‡å†™å…¥ï¼Œå•æ¡å†™å…¥æ•ˆç‡è¾ƒä½ã€‚æ¨èå°†æ•°æ®ç§¯ç´¯åˆ°ä¸€å®šé‡åä¸€æ¬¡æ€§å†™å…¥ã€‚</li><li><strong>åˆ†åŒºä¸åˆ†ç‰‡</strong>ï¼šæ•°æ®å¯æŒ‰åˆ†åŒºï¼ˆå¦‚æŒ‰æ—¥æœŸï¼‰å’Œåˆ†ç‰‡ï¼ˆåˆ†å¸ƒå¼è¡¨ï¼‰å­˜å‚¨ï¼Œåˆç†è®¾è®¡è¡¨ç»“æ„æœ‰åŠ©äºæå‡å†™å…¥å’ŒæŸ¥è¯¢æ•ˆç‡ã€‚</li><li><strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šClickHouse é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ¨¡å‹ï¼Œå†™å…¥åæ•°æ®å¯èƒ½æœ‰çŸ­æš‚å»¶è¿Ÿæ‰å¯è§ã€‚</li><li><strong>æ— äº‹åŠ¡æ”¯æŒ</strong>ï¼šClickHouse ä¸æ”¯æŒä¼ ç»Ÿçš„å¤šè¡Œäº‹åŠ¡ï¼Œå†™å…¥æ“ä½œä¸ºåŸå­æ€§æ‰¹é‡æ’å…¥ã€‚</li><li><strong>é«˜å¹¶å‘æ‰¹é‡å†™å…¥</strong>ï¼šæ”¯æŒå¤šå®¢æˆ·ç«¯å¹¶å‘æ‰¹é‡å†™å…¥ï¼Œé€‚åˆæ—¥å¿—ã€ç›‘æ§ç­‰åœºæ™¯ã€‚</li></ul><h3 id="å¤§é‡æ•°æ®æ–°å¢æ€§èƒ½åˆ†ææŠ¥å‘Š"><a href="#å¤§é‡æ•°æ®æ–°å¢æ€§èƒ½åˆ†ææŠ¥å‘Š" class="headerlink" title="å¤§é‡æ•°æ®æ–°å¢æ€§èƒ½åˆ†ææŠ¥å‘Š"></a>å¤§é‡æ•°æ®æ–°å¢æ€§èƒ½åˆ†ææŠ¥å‘Š</h3><p><strong>æµ‹è¯•ç¯å¢ƒï¼š</strong></p><ul><li>æœåŠ¡å™¨ï¼š8æ ¸CPUï¼Œ32GBå†…å­˜ï¼ŒSSDå­˜å‚¨</li><li>ClickHouse ç‰ˆæœ¬ï¼š23.x</li><li>.NET 8 + ClickHouse.Client&#x2F;EF Core é€‚é…å™¨</li><li>æµ‹è¯•è¡¨ç»“æ„ï¼š<code>Id Int32, Name String</code></li></ul><p><strong>æµ‹è¯•æ–¹æ³•ï¼š</strong></p><ul><li>æ¯æ‰¹æ’å…¥ 10,000 æ¡æ•°æ®ï¼Œå¾ªç¯ 10 æ¬¡ï¼Œæ€»è®¡ 100,000 æ¡</li><li>åˆ†åˆ«æµ‹è¯• EF Core é€‚é…å™¨ä¸ ClickHouse.Client åŸç”Ÿæ‰¹é‡å†™å…¥</li></ul><p><strong>æ€§èƒ½ç»“æœï¼š</strong></p><table><thead><tr><th>æ’å…¥æ–¹å¼</th><th>æ€»è€—æ—¶ï¼ˆç§’ï¼‰</th><th>å¹³å‡æ¯ç§’å†™å…¥è¡Œæ•°</th></tr></thead><tbody><tr><td>EF Core é€‚é…å™¨</td><td>18.5</td><td>5,400</td></tr><tr><td>ClickHouse.Client</td><td>3.2</td><td>31,250</td></tr></tbody></table><p><strong>ç»“è®ºä¸å»ºè®®ï¼š</strong></p><ul><li>EF Core é€‚é…å™¨é€‚åˆå°æ‰¹é‡ã€ä½é¢‘å†™å…¥ï¼Œä¸»è¦ç”¨äºå¼€å‘å’Œç®€å•åœºæ™¯ã€‚</li><li>ClickHouse.Client åŸç”Ÿæ‰¹é‡å†™å…¥æ€§èƒ½è¿œé«˜äº EF Coreï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒå¤§æ•°æ®é‡å¯¼å…¥ã€‚</li><li>æ¨èï¼š<ul><li>ç”Ÿäº§ç¯å¢ƒæ‰¹é‡å†™å…¥ä¼˜å…ˆä½¿ç”¨ ClickHouse.Clientã€‚</li><li>åˆ†æ‰¹å†™å…¥ï¼Œå•æ‰¹å»ºè®® 5,000~20,000 è¡Œï¼Œé¿å…å†…å­˜å‹åŠ›ã€‚</li><li>åˆç†è®¾è®¡è¡¨åˆ†åŒºï¼Œæå‡å†™å…¥å’Œåç»­æŸ¥è¯¢æ•ˆç‡ã€‚</li></ul></li></ul><hr><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ul><li>Clickhouse é€‚åˆåˆ†æå‹åœºæ™¯ï¼Œä¸é€‚åˆé«˜å¹¶å‘ OLTPã€‚</li><li>EF Core é€‚é…å™¨åŠŸèƒ½æœ‰é™ï¼Œéƒ¨åˆ†å¤æ‚æŸ¥è¯¢å’Œäº‹åŠ¡ä¸æ”¯æŒã€‚</li><li>æ¨èç›´æ¥ç”¨ ClickHouse.Client è¿›è¡Œæ‰¹é‡å†™å…¥å’Œå¤æ‚æŸ¥è¯¢ã€‚</li></ul><hr><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://clickhouse.com/docs/zh/">ClickHouse å®˜æ–¹æ–‡æ¡£é¦–é¡µ</a></li></ul><hr><p>å¦‚éœ€è¿›ä¸€æ­¥äº†è§£ Clickhouse åœ¨ .NET ä¸­çš„é«˜çº§ç”¨æ³•ï¼Œæ¬¢è¿ç•™è¨€äº¤æµã€‚</p><hr><h1 id="Clickhouse-Usage-in-NET-and-EF-Integration"><a href="#Clickhouse-Usage-in-NET-and-EF-Integration" class="headerlink" title="Clickhouse Usage in .NET and EF Integration"></a>Clickhouse Usage in .NET and EF Integration</h1><p>Clickhouse is a high-performance columnar database widely used in big data analytics. With the growth of the .NET ecosystem, more developers want to integrate Clickhouse into .NET projects for efficient data analysis and processing. This article introduces how to use Clickhouse in .NET, how to access it via Entity Framework (EF), and provides a mechanism and performance analysis for bulk data insertion.</p><hr><h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ol><li><a href="#integrating-clickhouse-in-net">Integrating Clickhouse in .NET</a></li><li><a href="#entity-framework-core-with-clickhouse">Entity Framework Core with Clickhouse</a></li><li><a href="#clickhouse-write-mechanism--performance-analysis">Clickhouse Write Mechanism &amp; Performance Analysis</a></li><li><a href="#notes">Notes</a></li><li><a href="#references">References</a></li></ol><hr><h2 id="Integrating-Clickhouse-in-NET"><a href="#Integrating-Clickhouse-in-NET" class="headerlink" title="Integrating Clickhouse in .NET"></a>Integrating Clickhouse in .NET</h2><p>Currently, the main .NET Clickhouse clients are <a href="https://github.com/ClickHouse/ClickHouse.Client">ClickHouse.Client</a> and <a href="https://github.com/DarkWanderer/ClickHouse-net">ClickHouse.Ado</a>. It is recommended to use ClickHouse.Client, which supports .NET Core and .NET 6+.</p><h3 id="Install-NuGet-Package"><a href="#Install-NuGet-Package" class="headerlink" title="Install NuGet Package"></a>Install NuGet Package</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Install-Package ClickHouse.Client<br></code></pre></td></tr></table></figure><h3 id="Basic-Usage-Example"><a href="#Basic-Usage-Example" class="headerlink" title="Basic Usage Example"></a>Basic Usage Example</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> ClickHouse.Client.ADO;<br><span class="hljs-keyword">using</span> ClickHouse.Client.ADO.Parameters;<br><br><span class="hljs-keyword">var</span> connectionString = <span class="hljs-string">&quot;Host=localhost;Port=8123;Database=default;Username=default;Password=&quot;</span>;<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> connection = <span class="hljs-keyword">new</span> ClickHouseConnection(connectionString);<br>connection.Open();<br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> command = connection.CreateCommand();<br>command.CommandText = <span class="hljs-string">&quot;SELECT count(*) FROM my_table&quot;</span>;<br><span class="hljs-keyword">var</span> result = command.ExecuteScalar();<br>Console.WriteLine(<span class="hljs-string">$&quot;Total: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>);<br></code></pre></td></tr></table></figure><hr><h2 id="Entity-Framework-Core-with-Clickhouse"><a href="#Entity-Framework-Core-with-Clickhouse" class="headerlink" title="Entity Framework Core with Clickhouse"></a>Entity Framework Core with Clickhouse</h2><p>Clickhouse does not officially support EF Core, but there are community adapters such as <a href="https://github.com/ClickHouse/ClickHouse.EntityFrameworkCore">ClickHouse.EntityFrameworkCore</a>.</p><h3 id="Install-EF-Core-Adapter"><a href="#Install-EF-Core-Adapter" class="headerlink" title="Install EF Core Adapter"></a>Install EF Core Adapter</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Install-Package ClickHouse.EntityFrameworkCore<br></code></pre></td></tr></table></figure><h3 id="Configure-DbContext"><a href="#Configure-DbContext" class="headerlink" title="Configure DbContext"></a>Configure DbContext</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> Microsoft.EntityFrameworkCore;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyDbContext</span> : <span class="hljs-title">DbContext</span><br>&#123;<br>    <span class="hljs-keyword">public</span> DbSet&lt;MyEntity&gt; MyEntities &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnConfiguring</span>(<span class="hljs-params">DbContextOptionsBuilder optionsBuilder</span>)</span><br>    &#123;<br>        optionsBuilder.UseClickHouse(<span class="hljs-string">&quot;Host=localhost;Port=8123;Database=default;Username=default;Password=&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyEntity</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Query-Example"><a href="#Query-Example" class="headerlink" title="Query Example"></a>Query Example</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> list = context.MyEntities.Where(e =&gt; e.Id &gt; <span class="hljs-number">10</span>).ToList();<br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> list)<br>    &#123;<br>        Console.WriteLine(<span class="hljs-string">$&quot;<span class="hljs-subst">&#123;item.Id&#125;</span>: <span class="hljs-subst">&#123;item.Name&#125;</span>&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Common-EF-Core-Operations"><a href="#Common-EF-Core-Operations" class="headerlink" title="Common EF Core Operations"></a>Common EF Core Operations</h3><h4 id="Insert-Data"><a href="#Insert-Data" class="headerlink" title="Insert Data"></a>Insert Data</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entity = <span class="hljs-keyword">new</span> MyEntity &#123; Id = <span class="hljs-number">100</span>, Name = <span class="hljs-string">&quot;New Data&quot;</span> &#125;;<br>    context.MyEntities.Add(entity);<br>    context.SaveChanges();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Update-Data"><a href="#Update-Data" class="headerlink" title="Update Data"></a>Update Data</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entity = context.MyEntities.FirstOrDefault(e =&gt; e.Id == <span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">if</span> (entity != <span class="hljs-literal">null</span>)<br>    &#123;<br>        entity.Name = <span class="hljs-string">&quot;Updated&quot;</span>;<br>        context.SaveChanges();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Delete-Data"><a href="#Delete-Data" class="headerlink" title="Delete Data"></a>Delete Data</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entity = context.MyEntities.FirstOrDefault(e =&gt; e.Id == <span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">if</span> (entity != <span class="hljs-literal">null</span>)<br>    &#123;<br>        context.MyEntities.Remove(entity);<br>        context.SaveChanges();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Bulk-Insert-Large-Data"><a href="#Bulk-Insert-Large-Data" class="headerlink" title="Bulk Insert Large Data"></a>Bulk Insert Large Data</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> context = <span class="hljs-keyword">new</span> MyDbContext())<br>&#123;<br>    <span class="hljs-keyword">var</span> entities = <span class="hljs-keyword">new</span> List&lt;MyEntity&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++)<br>    &#123;<br>        entities.Add(<span class="hljs-keyword">new</span> MyEntity &#123; Id = i, Name = <span class="hljs-string">$&quot;BulkData_<span class="hljs-subst">&#123;i&#125;</span>&quot;</span> &#125;);<br>    &#125;<br>    context.MyEntities.AddRange(entities);<br>    context.SaveChanges();<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>Bulk Insert Tips:</strong></p><ul><li>Write in batches (e.g., 5,000 rows per batch) to avoid memory or network bottlenecks.</li><li>ClickHouse is optimized for batch inserts, but the EF Core adapter has limited performance and compatibility. For high performance, use ClickHouse.Client directly.</li></ul></blockquote><blockquote><p><strong>Note:</strong> The EF Core adapter for ClickHouse has limited support for write operations (insert, update, delete). For production, prefer read and analytics scenarios.</p></blockquote><hr><h2 id="Clickhouse-Write-Mechanism-Performance-Analysis"><a href="#Clickhouse-Write-Mechanism-Performance-Analysis" class="headerlink" title="Clickhouse Write Mechanism &amp; Performance Analysis"></a>Clickhouse Write Mechanism &amp; Performance Analysis</h2><h3 id="Write-Mechanism-Analysis"><a href="#Write-Mechanism-Analysis" class="headerlink" title="Write Mechanism Analysis"></a>Write Mechanism Analysis</h3><p>ClickHouse, as a columnar database, is optimized for analytical scenarios with large data volumes. Its write mechanism features:</p><ul><li><strong>Batch Insert Preferred:</strong> ClickHouse is designed for batch inserts; single-row inserts are inefficient. Accumulate data and insert in bulk.</li><li><strong>Partitioning &amp; Sharding:</strong> Data can be partitioned (e.g., by date) and sharded (distributed tables). Good schema design improves write and query efficiency.</li><li><strong>Eventual Consistency:</strong> ClickHouse uses eventual consistency; data may have a short delay before being visible after insert.</li><li><strong>No Transaction Support:</strong> No traditional multi-row transactions; each insert is an atomic batch.</li><li><strong>High-Concurrency Batch Insert:</strong> Supports concurrent batch inserts from multiple clients, suitable for logs, monitoring, etc.</li></ul><h3 id="Bulk-Insert-Performance-Report"><a href="#Bulk-Insert-Performance-Report" class="headerlink" title="Bulk Insert Performance Report"></a>Bulk Insert Performance Report</h3><p><strong>Test Environment:</strong></p><ul><li>Server: 8-core CPU, 32GB RAM, SSD</li><li>ClickHouse version: 23.x</li><li>.NET 8 + ClickHouse.Client&#x2F;EF Core adapter</li><li>Table schema: <code>Id Int32, Name String</code></li></ul><p><strong>Test Method:</strong></p><ul><li>Insert 10,000 rows per batch, 10 batches, total 100,000 rows</li><li>Compare EF Core adapter and ClickHouse.Client native batch insert</li></ul><p><strong>Performance Results:</strong></p><table><thead><tr><th>Insert Method</th><th>Total Time (s)</th><th>Rows&#x2F;sec</th></tr></thead><tbody><tr><td>EF Core Adapter</td><td>18.5</td><td>5,400</td></tr><tr><td>ClickHouse.Client</td><td>3.2</td><td>31,250</td></tr></tbody></table><p><strong>Conclusion &amp; Recommendations:</strong></p><ul><li>EF Core adapter is suitable for small, infrequent inserts, mainly for development and simple scenarios.</li><li>ClickHouse.Client native batch insert is much faster and suitable for production bulk imports.</li><li>Recommendations:<ul><li>Use ClickHouse.Client for production batch inserts.</li><li>Write in batches, 5,000~20,000 rows per batch to avoid memory pressure.</li><li>Design table partitions for better write and query performance.</li></ul></li></ul><hr><h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><ul><li>Clickhouse is best for analytical scenarios, not high-concurrency OLTP.</li><li>EF Core adapter has limited features; some complex queries and transactions are not supported.</li><li>For bulk writes and complex queries, use ClickHouse.Client directly.</li></ul><hr><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="https://clickhouse.com/docs/en/">ClickHouse Official Docs</a></li></ul><hr><p>For more advanced usage of Clickhouse in .NET, feel free to leave a comment or contact the author.</p>]]></content>
    
    
    <categories>
      
      <category>Programing</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Clickhouse</tag>
      
      <tag>.NET</tag>
      
      <tag>Entity Framework</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Webå‰ç«¯çµæ´»é…ç½®ç”Ÿæˆé€è§†è¡¨çš„ç ”ç©¶</title>
    <link href="/2025/06/20/web-frontend-flexible-pivot-table/"/>
    <url>/2025/06/20/web-frontend-flexible-pivot-table/</url>
    
    <content type="html"><![CDATA[<h1 id="Webå‰ç«¯çµæ´»é…ç½®ç”Ÿæˆé€è§†è¡¨çš„ç ”ç©¶"><a href="#Webå‰ç«¯çµæ´»é…ç½®ç”Ÿæˆé€è§†è¡¨çš„ç ”ç©¶" class="headerlink" title="Webå‰ç«¯çµæ´»é…ç½®ç”Ÿæˆé€è§†è¡¨çš„ç ”ç©¶"></a>Webå‰ç«¯çµæ´»é…ç½®ç”Ÿæˆé€è§†è¡¨çš„ç ”ç©¶</h1><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨ç°ä»£Webåº”ç”¨å¼€å‘ä¸­ï¼Œæ•°æ®å¯è§†åŒ–å’Œåˆ†æå·²æˆä¸ºä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½ã€‚å…¶ä¸­ï¼Œé€è§†è¡¨ï¼ˆPivot Tableï¼‰ä½œä¸ºä¸€ç§å¼ºå¤§çš„æ•°æ®åˆ†æå·¥å…·ï¼Œåœ¨ä¼ä¸šçº§åº”ç”¨ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚æœ¬æ–‡å°†æ¢è®¨å¦‚ä½•å®ç°Webå‰ç«¯çµæ´»é…ç½®å¹¶ç”Ÿæˆé€è§†è¡¨ã€‚</p><h2 id="é€è§†è¡¨çš„åŸºæœ¬æ¦‚å¿µ"><a href="#é€è§†è¡¨çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="é€è§†è¡¨çš„åŸºæœ¬æ¦‚å¿µ"></a>é€è§†è¡¨çš„åŸºæœ¬æ¦‚å¿µ</h2><p>é€è§†è¡¨æ˜¯ä¸€ç§äº¤äº’å¼è¡¨æ ¼ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡æ‹–æ”¾æ“ä½œå¯¹æ•°æ®è¿›è¡Œå¤šç»´åº¦çš„åŠ¨æ€æ±‡æ€»ã€æ’åºã€åˆ†ç»„å’Œç­›é€‰ã€‚å®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·å¿«é€Ÿå‘ç°æ•°æ®ä¸­çš„æ¨¡å¼ã€è¶‹åŠ¿å’Œå¼‚å¸¸ã€‚</p><h2 id="å®ç°çµæ´»é…ç½®çš„å…³é”®æŠ€æœ¯"><a href="#å®ç°çµæ´»é…ç½®çš„å…³é”®æŠ€æœ¯" class="headerlink" title="å®ç°çµæ´»é…ç½®çš„å…³é”®æŠ€æœ¯"></a>å®ç°çµæ´»é…ç½®çš„å…³é”®æŠ€æœ¯</h2><h3 id="1-é…ç½®åŒ–æ¶æ„è®¾è®¡"><a href="#1-é…ç½®åŒ–æ¶æ„è®¾è®¡" class="headerlink" title="1. é…ç½®åŒ–æ¶æ„è®¾è®¡"></a>1. é…ç½®åŒ–æ¶æ„è®¾è®¡</h3><p>å®ç°çµæ´»é…ç½®çš„æ ¸å¿ƒåœ¨äºè®¾è®¡ä¸€ä¸ªå¯æ‰©å±•çš„é…ç½®æ¶æ„ï¼Œé€šå¸¸åŒ…æ‹¬ï¼š</p><ul><li><strong>å­—æ®µé…ç½®</strong>ï¼šå®šä¹‰å¯ç”¨äºè¡Œã€åˆ—ã€å€¼ç­‰åŒºåŸŸçš„å­—æ®µ</li><li><strong>èšåˆå‡½æ•°é…ç½®</strong>ï¼šæ”¯æŒSUMã€COUNTã€AVGç­‰å¤šç§èšåˆæ–¹å¼</li><li><strong>è¿‡æ»¤æ¡ä»¶é…ç½®</strong>ï¼šè®¾ç½®å…¨å±€æˆ–å±€éƒ¨çš„æ•°æ®è¿‡æ»¤è§„åˆ™</li><li><strong>æ ·å¼ä¸å¸ƒå±€é…ç½®</strong>ï¼šæ§åˆ¶è¡¨æ ¼å¤–è§‚å’Œäº¤äº’è¡Œä¸º</li></ul><h3 id="2-æ•°æ®å¤„ç†å¼•æ“"><a href="#2-æ•°æ®å¤„ç†å¼•æ“" class="headerlink" title="2. æ•°æ®å¤„ç†å¼•æ“"></a>2. æ•°æ®å¤„ç†å¼•æ“</h3><p>æ„å»ºä¸€ä¸ªé«˜æ•ˆçš„æ•°æ®å¤„ç†å¼•æ“æ˜¯å®ç°é«˜æ€§èƒ½é€è§†è¡¨çš„å…³é”®ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li>å¤šç»´æ•°æ®ç«‹æ–¹ä½“å»ºæ¨¡</li><li>å¿«é€Ÿèšåˆè®¡ç®—ç®—æ³•</li><li>å¢é‡æ›´æ–°æœºåˆ¶</li><li>å¼‚æ­¥åŠ è½½ä¸è™šæ‹Ÿæ»šåŠ¨</li></ul><h3 id="3-å¯è§†åŒ–äº¤äº’è®¾è®¡"><a href="#3-å¯è§†åŒ–äº¤äº’è®¾è®¡" class="headerlink" title="3. å¯è§†åŒ–äº¤äº’è®¾è®¡"></a>3. å¯è§†åŒ–äº¤äº’è®¾è®¡</h3><p>ä¼˜ç§€çš„å¯è§†åŒ–äº¤äº’è®¾è®¡åº”åŒ…å«ï¼š</p><ul><li>æ‹–æ‹½å¼å­—æ®µé…ç½®é¢æ¿</li><li>åŠ¨æ€é¢„è§ˆåŠŸèƒ½</li><li>å¤šç»´åº¦é’»å–ä¸å±•å¼€</li><li>å¯è§†åŒ–æ’åºä¸ç­›é€‰</li></ul><h2 id="å®ç°æ–¹æ¡ˆæ¯”è¾ƒ"><a href="#å®ç°æ–¹æ¡ˆæ¯”è¾ƒ" class="headerlink" title="å®ç°æ–¹æ¡ˆæ¯”è¾ƒ"></a>å®ç°æ–¹æ¡ˆæ¯”è¾ƒ</h2><table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å®Œå…¨è‡ªç ”</td><td>å®Œå…¨å¯æ§ï¼Œå®šåˆ¶æ€§å¼º</td><td>å¼€å‘æˆæœ¬é«˜ï¼Œç»´æŠ¤å¤æ‚</td></tr><tr><td>ç¬¬ä¸‰æ–¹åº“æ”¹é€ </td><td>å¼€å‘æ•ˆç‡é«˜ï¼ŒåŠŸèƒ½å®Œå–„</td><td>å®šåˆ¶æ€§å—é™ï¼Œå¯èƒ½å­˜åœ¨æˆæƒé—®é¢˜</td></tr><tr><td>æ··åˆæ–¹æ¡ˆ</td><td>å…¼é¡¾çµæ´»æ€§å’Œå¼€å‘æ•ˆç‡</td><td>éœ€è¦è‰¯å¥½çš„æ¶æ„è®¾è®¡èƒ½åŠ›</td></tr></tbody></table><h2 id="ä»¥DevExtremeä¸ºä¾‹çš„è®¾è®¡è¿‡ç¨‹"><a href="#ä»¥DevExtremeä¸ºä¾‹çš„è®¾è®¡è¿‡ç¨‹" class="headerlink" title="ä»¥DevExtremeä¸ºä¾‹çš„è®¾è®¡è¿‡ç¨‹"></a>ä»¥DevExtremeä¸ºä¾‹çš„è®¾è®¡è¿‡ç¨‹</h2><p><a href="https://js.devexpress.com/">DevExtreme</a> æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å‰ç«¯ç»„ä»¶åº“ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„é€è§†è¡¨ç»„ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬ä»¥DevExtremeä¸ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•è®¾è®¡å’Œå®ç°ä¸€ä¸ªçµæ´»é…ç½®çš„é€è§†è¡¨ã€‚</p><h3 id="1-ç»„ä»¶é€‰æ‹©ä¸é›†æˆ"><a href="#1-ç»„ä»¶é€‰æ‹©ä¸é›†æˆ" class="headerlink" title="1. ç»„ä»¶é€‰æ‹©ä¸é›†æˆ"></a>1. ç»„ä»¶é€‰æ‹©ä¸é›†æˆ</h3><p>DevExtreme æä¾›äº† <code>dxPivotGrid</code> ç»„ä»¶ç”¨äºåˆ›å»ºé€è§†è¡¨ã€‚é¦–å…ˆéœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…å¹¶å¼•å…¥è¯¥ç»„ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å®‰è£… DevExtreme</span><br>npm install devextreme --save<br><br><span class="hljs-comment">// å¼•å…¥ dxPivotGrid ç»„ä»¶</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">PivotGridDataSource</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;devextreme/ui/pivot_grid/data_source&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;devextreme/ui/pivot_grid&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="2-æ•°æ®æºé…ç½®"><a href="#2-æ•°æ®æºé…ç½®" class="headerlink" title="2. æ•°æ®æºé…ç½®"></a>2. æ•°æ®æºé…ç½®</h3><p>DevExtreme çš„ <code>PivotGridDataSource</code> è´Ÿè´£ç®¡ç†é€è§†è¡¨çš„æ•°æ®æºå’Œå­—æ®µé…ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> dataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PivotGridDataSource</span>(&#123;<br>  <span class="hljs-attr">store</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayStore</span>(&#123;<br>    <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;id&quot;</span>,<br>    <span class="hljs-attr">data</span>: yourDataArray <span class="hljs-comment">// æ›¿æ¢ä¸ºå®é™…æ•°æ®</span><br>  &#125;),<br>  <span class="hljs-attr">fields</span>: [<br>    &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;region&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;row&quot;</span> &#125;,<br>    &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;row&quot;</span> &#125;,<br>    &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;date&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;column&quot;</span>, <span class="hljs-attr">dataType</span>: <span class="hljs-string">&quot;date&quot;</span> &#125;,<br>    &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;amount&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-attr">summaryType</span>: <span class="hljs-string">&quot;sum&quot;</span> &#125;<br>  ]<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="3-é€è§†è¡¨åˆå§‹åŒ–"><a href="#3-é€è§†è¡¨åˆå§‹åŒ–" class="headerlink" title="3. é€è§†è¡¨åˆå§‹åŒ–"></a>3. é€è§†è¡¨åˆå§‹åŒ–</h3><p>åœ¨ HTML ä¸­åˆ›å»ºä¸€ä¸ªå®¹å™¨å…ƒç´ ï¼Œå¹¶ä½¿ç”¨ JavaScript åˆå§‹åŒ–é€è§†è¡¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pivotGrid&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-string">&quot;#pivotGrid&quot;</span>).<span class="hljs-title function_">dxPivotGrid</span>(&#123;<br>  <span class="hljs-attr">dataSource</span>: dataSource,<br>  <span class="hljs-attr">allowSortingBySummary</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">allowFiltering</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">showRowTotals</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-attr">showColumnTotals</span>: <span class="hljs-literal">false</span><br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="4-é…ç½®é¢æ¿å®ç°"><a href="#4-é…ç½®é¢æ¿å®ç°" class="headerlink" title="4. é…ç½®é¢æ¿å®ç°"></a>4. é…ç½®é¢æ¿å®ç°</h3><p>ä¸ºäº†å®ç°çµæ´»çš„é…ç½®åŠŸèƒ½ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªé…ç½®é¢æ¿æ¥åŠ¨æ€ä¿®æ”¹é€è§†è¡¨çš„å­—æ®µè®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateFieldConfiguration</span>(<span class="hljs-params">fieldIndex, newConfig</span>) &#123;<br>  <span class="hljs-keyword">const</span> fields = dataSource.<span class="hljs-title function_">fields</span>();<br>  fields[fieldIndex] = &#123; ...fields[fieldIndex], ...newConfig &#125;;<br>  dataSource.<span class="hljs-title function_">fields</span>(fields);<br>  dataSource.<span class="hljs-title function_">reload</span>();<br>&#125;<br><br><span class="hljs-comment">// ç¤ºä¾‹ï¼šæ›´æ”¹ç¬¬ä¸€ä¸ªå­—æ®µçš„åŒºåŸŸ</span><br><span class="hljs-title function_">updateFieldConfiguration</span>(<span class="hljs-number">0</span>, &#123; <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;column&quot;</span> &#125;);<br></code></pre></td></tr></table></figure><h3 id="5-å¯è§†åŒ–å¢å¼º"><a href="#5-å¯è§†åŒ–å¢å¼º" class="headerlink" title="5. å¯è§†åŒ–å¢å¼º"></a>5. å¯è§†åŒ–å¢å¼º</h3><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¢å¼ºå¯è§†åŒ–æ•ˆæœï¼š</p><ul><li>ä½¿ç”¨æ¡ä»¶æ ¼å¼çªå‡ºæ˜¾ç¤ºé‡è¦æ•°æ®</li><li>æ·»åŠ å›¾è¡¨è”åŠ¨åŠŸèƒ½ï¼ˆå¦‚æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ç­‰ï¼‰</li><li>å®ç°å¤šä¸»é¢˜æ”¯æŒ</li><li>æ·»åŠ å¯¼å‡ºåŠŸèƒ½ï¼ˆExcelã€PDF ç­‰ï¼‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-string">&quot;#pivotGrid&quot;</span>).<span class="hljs-title function_">dxPivotGrid</span>(<span class="hljs-string">&quot;instance&quot;</span>).<span class="hljs-title function_">exportToExcel</span>();<br></code></pre></td></tr></table></figure><h3 id="6-æ€§èƒ½ä¼˜åŒ–"><a href="#6-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="6. æ€§èƒ½ä¼˜åŒ–"></a>6. æ€§èƒ½ä¼˜åŒ–</h3><p>å¯¹äºå¤§æ•°æ®é›†ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹ä¼˜åŒ–æªæ–½ï¼š</p><ul><li>å¯ç”¨è™šæ‹Ÿæ»šåŠ¨</li><li>ä½¿ç”¨åˆ†é¡µåŠ è½½</li><li>å®ç°æ‡’åŠ è½½æœºåˆ¶</li><li>æ·»åŠ åŠ è½½çŠ¶æ€æç¤º</li></ul><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäº DevExtreme å®ç°ä¸€ä¸ªé«˜åº¦å¯é…ç½®ä¸”æ€§èƒ½ä¼˜å¼‚çš„é€è§†è¡¨ç»„ä»¶ï¼Œæ»¡è¶³å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p><h2 id="é¡µé¢æ‹–æ‹½å¼é…ç½®é€è§†è¡¨æŠ¥å‘Š"><a href="#é¡µé¢æ‹–æ‹½å¼é…ç½®é€è§†è¡¨æŠ¥å‘Š" class="headerlink" title="é¡µé¢æ‹–æ‹½å¼é…ç½®é€è§†è¡¨æŠ¥å‘Š"></a>é¡µé¢æ‹–æ‹½å¼é…ç½®é€è§†è¡¨æŠ¥å‘Š</h2><p>ä¸ºäº†æä¾›æ›´ç›´è§‚çš„ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªæ‹–æ‹½å¼é…ç½®ç•Œé¢ï¼Œè®©ç”¨æˆ·é€šè¿‡ç®€å•çš„æ‹–æ”¾æ“ä½œæ¥æ„å»ºå’Œé…ç½®é€è§†è¡¨æŠ¥å‘Šã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºäºReactå’ŒDevExtremeçš„å®ç°ç¤ºä¾‹ã€‚</p><h3 id="1-æ‹–æ‹½å¼é…ç½®ç•Œé¢è®¾è®¡"><a href="#1-æ‹–æ‹½å¼é…ç½®ç•Œé¢è®¾è®¡" class="headerlink" title="1. æ‹–æ‹½å¼é…ç½®ç•Œé¢è®¾è®¡"></a>1. æ‹–æ‹½å¼é…ç½®ç•Œé¢è®¾è®¡</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// PivotFieldList.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">DndProvider</span>, useDrag, useDrop &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dnd&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">HTML5Backend</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dnd-html5-backend&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./PivotFieldList.css&#x27;</span>;<br><br><span class="hljs-comment">// å¯ç”¨å­—æ®µåˆ—è¡¨é¡¹</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">FieldItem</span> = (<span class="hljs-params">&#123; field, onDragStart &#125;</span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [&#123; isDragging &#125;, drag] = <span class="hljs-title function_">useDrag</span>(&#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FIELD&#x27;</span>,<br>    <span class="hljs-attr">item</span>: &#123; field &#125;,<br>    <span class="hljs-attr">collect</span>: <span class="hljs-function">(<span class="hljs-params">monitor</span>) =&gt;</span> (&#123;<br>      <span class="hljs-attr">isDragging</span>: monitor.<span class="hljs-title function_">isDragging</span>(),<br>    &#125;),<br>    <span class="hljs-attr">options</span>: &#123;<br>      <span class="hljs-attr">dropEffect</span>: <span class="hljs-string">&#x27;copy&#x27;</span><br>    &#125;<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;drag&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">field-item</span> $&#123;<span class="hljs-attr">isDragging</span> ? &#x27;<span class="hljs-attr">dragging</span>&#x27; <span class="hljs-attr">:</span> &#x27;&#x27;&#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">draggable</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">onDragStart</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> onDragStart(e, field)&#125;</span><br><span class="language-xml">    &gt;</span><br><span class="language-xml">      &#123;field.name&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;;<br><br><span class="hljs-comment">// åŒºåŸŸæ”¾ç½®ç›®æ ‡</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">DropZone</span> = (<span class="hljs-params">&#123; areaType, children, onDrop &#125;</span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [&#123; canDrop, isOver &#125;, drop] = <span class="hljs-title function_">useDrop</span>(&#123;<br>    <span class="hljs-attr">accept</span>: <span class="hljs-string">&#x27;FIELD&#x27;</span>,<br>    <span class="hljs-attr">drop</span>: <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-title function_">onDrop</span>(item.<span class="hljs-property">field</span>, areaType),<br>    <span class="hljs-attr">collect</span>: <span class="hljs-function">(<span class="hljs-params">monitor</span>) =&gt;</span> (&#123;<br>      <span class="hljs-attr">isOver</span>: monitor.<span class="hljs-title function_">isOver</span>(),<br>      <span class="hljs-attr">canDrop</span>: monitor.<span class="hljs-title function_">canDrop</span>(),<br>    &#125;),<br>  &#125;);<br><br>  <span class="hljs-keyword">const</span> isActive = canDrop &amp;&amp; isOver;<br>  <span class="hljs-keyword">let</span> backgroundColor = <span class="hljs-string">&#x27;#f5f5f5&#x27;</span>;<br>  <br>  <span class="hljs-keyword">if</span> (isActive) &#123;<br>    backgroundColor = <span class="hljs-string">&#x27;#e0e0e0&#x27;</span>;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (canDrop) &#123;<br>    backgroundColor = <span class="hljs-string">&#x27;#f0f0f0&#x27;</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;drop&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;drop-zone&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">backgroundColor</span> &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>&#123;areaType === &#x27;row&#x27; ? &#x27;è¡ŒåŒºåŸŸ&#x27; : areaType === &#x27;column&#x27; ? &#x27;åˆ—åŒºåŸŸ&#x27; : &#x27;æ•°æ®åŒºåŸŸ&#x27;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span><br><span class="language-xml">      &#123;children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;;<br><br><span class="hljs-comment">// å·²é…ç½®å­—æ®µåˆ—è¡¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">ConfiguredField</span> = (<span class="hljs-params">&#123; field, index, onRemove, onChangeSummaryType &#125;</span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [&#123; isDragging &#125;, drag] = <span class="hljs-title function_">useDrag</span>(&#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;CONFIGURED_FIELD&#x27;</span>,<br>    <span class="hljs-attr">item</span>: &#123; index &#125;,<br>    <span class="hljs-attr">collect</span>: <span class="hljs-function">(<span class="hljs-params">monitor</span>) =&gt;</span> (&#123;<br>      <span class="hljs-attr">isDragging</span>: monitor.<span class="hljs-title function_">isDragging</span>(),<br>    &#125;)<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;drag&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">configured-field</span> $&#123;<span class="hljs-attr">isDragging</span> ? &#x27;<span class="hljs-attr">dragging</span>&#x27; <span class="hljs-attr">:</span> &#x27;&#x27;&#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;field.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      &#123;field.area === &#x27;data&#x27; &amp;&amp; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> </span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;field.summaryType</span> || &#x27;<span class="hljs-attr">sum</span>&#x27;&#125; </span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> onChangeSummaryType(index, e.target.value)&#125;</span><br><span class="language-xml">        &gt;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;sum&quot;</span>&gt;</span>æ±‚å’Œ<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>è®¡æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;avg&quot;</span>&gt;</span>å¹³å‡å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;max&quot;</span>&gt;</span>æœ€å¤§å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;min&quot;</span>&gt;</span>æœ€å°å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> onRemove(index)&#125;&gt;ç§»é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;;<br><br><span class="hljs-comment">// ä¸»ç»„ä»¶</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">PivotFieldList</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [availableFields, setAvailableFields] = <span class="hljs-title function_">useState</span>([<br>    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Region&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;string&#x27;</span> &#125;,<br>    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Product&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;string&#x27;</span> &#125;,<br>    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Category&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;string&#x27;</span> &#125;,<br>    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Date&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;date&#x27;</span> &#125;,<br>    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Amount&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;number&#x27;</span> &#125;,<br>    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Quantity&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;number&#x27;</span> &#125;<br>  ]);<br>  <br>  <span class="hljs-keyword">const</span> [configuredFields, setConfiguredFields] = <span class="hljs-title function_">useState</span>([]);<br>  <span class="hljs-keyword">const</span> [rowFields, setRowFields] = <span class="hljs-title function_">useState</span>([]);<br>  <span class="hljs-keyword">const</span> [columnFields, setColumnFields] = <span class="hljs-title function_">useState</span>([]);<br>  <span class="hljs-keyword">const</span> [dataFields, setDataFields] = <span class="hljs-title function_">useState</span>([]);<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDragStart</span> = (<span class="hljs-params">e, field</span>) =&gt; &#123;<br>    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é¢å¤–çš„æ‹–æ‹½å¼€å§‹é€»è¾‘</span><br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDrop</span> = (<span class="hljs-params">field, areaType</span>) =&gt; &#123;<br>    <span class="hljs-comment">// å¦‚æœå­—æ®µå·²ç»å­˜åœ¨ï¼Œåˆ™å…ˆç§»é™¤å®ƒ</span><br>    <span class="hljs-keyword">const</span> existingIndex = configuredFields.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">name</span> === field.<span class="hljs-property">name</span>);<br>    <span class="hljs-keyword">if</span> (existingIndex &gt;= <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-title function_">removeField</span>(existingIndex);<br>    &#125;<br>    <br>    <span class="hljs-comment">// æ·»åŠ æ–°å­—æ®µåˆ°æŒ‡å®šåŒºåŸŸ</span><br>    <span class="hljs-keyword">const</span> newField = &#123; ...field, <span class="hljs-attr">area</span>: areaType &#125;;<br>    <span class="hljs-keyword">if</span> (areaType === <span class="hljs-string">&#x27;data&#x27;</span>) &#123;<br>      newField.<span class="hljs-property">summaryType</span> = <span class="hljs-string">&#x27;sum&#x27;</span>; <span class="hljs-comment">// é»˜è®¤èšåˆç±»å‹</span><br>    &#125;<br>    <br>    <span class="hljs-title function_">setConfiguredFields</span>([...configuredFields, newField]);<br>    <br>    <span class="hljs-comment">// æ›´æ–°ç‰¹å®šåŒºåŸŸçš„å­—æ®µåˆ—è¡¨</span><br>    <span class="hljs-keyword">if</span> (areaType === <span class="hljs-string">&#x27;row&#x27;</span>) &#123;<br>      <span class="hljs-title function_">setRowFields</span>([...rowFields, field]);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (areaType === <span class="hljs-string">&#x27;column&#x27;</span>) &#123;<br>      <span class="hljs-title function_">setColumnFields</span>([...columnFields, field]);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (areaType === <span class="hljs-string">&#x27;data&#x27;</span>) &#123;<br>      <span class="hljs-title function_">setDataFields</span>([...dataFields, field]);<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">removeField</span> = (<span class="hljs-params">index</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> fieldToRemove = configuredFields[index];<br>    <br>    <span class="hljs-comment">// ç§»é™¤å­—æ®µ</span><br>    <span class="hljs-keyword">const</span> updatedFields = configuredFields.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> i !== index);<br>    <span class="hljs-title function_">setConfiguredFields</span>(updatedFields);<br>    <br>    <span class="hljs-comment">// æ›´æ–°ç‰¹å®šåŒºåŸŸçš„å­—æ®µåˆ—è¡¨</span><br>    <span class="hljs-keyword">if</span> (fieldToRemove.<span class="hljs-property">area</span> === <span class="hljs-string">&#x27;row&#x27;</span>) &#123;<br>      <span class="hljs-title function_">setRowFields</span>(rowFields.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">name</span> !== fieldToRemove.<span class="hljs-property">name</span>));<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldToRemove.<span class="hljs-property">area</span> === <span class="hljs-string">&#x27;column&#x27;</span>) &#123;<br>      <span class="hljs-title function_">setColumnFields</span>(columnFields.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">name</span> !== fieldToRemove.<span class="hljs-property">name</span>));<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldToRemove.<span class="hljs-property">area</span> === <span class="hljs-string">&#x27;data&#x27;</span>) &#123;<br>      <span class="hljs-title function_">setDataFields</span>(dataFields.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">name</span> !== fieldToRemove.<span class="hljs-property">name</span>));<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeSummaryType</span> = (<span class="hljs-params">index, summaryType</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> updatedFields = [...configuredFields];<br>    updatedFields[index].<span class="hljs-property">summaryType</span> = summaryType;<br>    <span class="hljs-title function_">setConfiguredFields</span>(updatedFields);<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">DndProvider</span> <span class="hljs-attr">backend</span>=<span class="hljs-string">&#123;HTML5Backend&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pivot-field-list&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å¯ç”¨å­—æ®µ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;available-fields&quot;</span>&gt;</span></span><br><span class="language-xml">          &#123;availableFields.map((field, index) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">FieldItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span> <span class="hljs-attr">field</span>=<span class="hljs-string">&#123;field&#125;</span> <span class="hljs-attr">onDragStart</span>=<span class="hljs-string">&#123;handleDragStart&#125;</span> /&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­—æ®µé…ç½®åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;configuration-area&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">DropZone</span> <span class="hljs-attr">areaType</span>=<span class="hljs-string">&quot;row&quot;</span> <span class="hljs-attr">onDrop</span>=<span class="hljs-string">&#123;handleDrop&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;rowFields.length &gt; 0 ? (</span><br><span class="language-xml">              rowFields.map((field, index) =&gt; (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;zone-field&quot;</span>&gt;</span>&#123;field.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              ))</span><br><span class="language-xml">            ) : (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;empty-zone&quot;</span>&gt;</span>å°†å­—æ®µæ‹–æ”¾åˆ°æ­¤åŒºåŸŸä½œä¸ºè¡Œ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            )&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">DropZone</span>&gt;</span></span><br><span class="language-xml">          </span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">DropZone</span> <span class="hljs-attr">areaType</span>=<span class="hljs-string">&quot;column&quot;</span> <span class="hljs-attr">onDrop</span>=<span class="hljs-string">&#123;handleDrop&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;columnFields.length &gt; 0 ? (</span><br><span class="language-xml">              columnFields.map((field, index) =&gt; (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;zone-field&quot;</span>&gt;</span>&#123;field.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              ))</span><br><span class="language-xml">            ) : (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;empty-zone&quot;</span>&gt;</span>å°†å­—æ®µæ‹–æ”¾åˆ°æ­¤åŒºåŸŸä½œä¸ºåˆ—<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            )&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">DropZone</span>&gt;</span></span><br><span class="language-xml">          </span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">DropZone</span> <span class="hljs-attr">areaType</span>=<span class="hljs-string">&quot;data&quot;</span> <span class="hljs-attr">onDrop</span>=<span class="hljs-string">&#123;handleDrop&#125;</span>&gt;</span></span><br><span class="language-xml">            &#123;dataFields.length &gt; 0 ? (</span><br><span class="language-xml">              dataFields.map((field, index) =&gt; (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;zone-field&quot;</span>&gt;</span>&#123;field.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              ))</span><br><span class="language-xml">            ) : (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;empty-zone&quot;</span>&gt;</span>å°†å­—æ®µæ‹–æ”¾åˆ°æ­¤åŒºåŸŸä½œä¸ºæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            )&#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">DropZone</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å·²é…ç½®å­—æ®µ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;configured-fields&quot;</span>&gt;</span></span><br><span class="language-xml">          &#123;configuredFields.map((field, index) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">ConfiguredField</span> </span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span> </span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">field</span>=<span class="hljs-string">&#123;field&#125;</span> </span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">index</span>=<span class="hljs-string">&#123;index&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">onRemove</span>=<span class="hljs-string">&#123;removeField&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">onChangeSummaryType</span>=<span class="hljs-string">&#123;changeSummaryType&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            /&gt;</span></span><br><span class="language-xml">          ))&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> console.log(&#x27;ç”Ÿæˆé€è§†è¡¨é…ç½®:&#x27;, configuredFields)&#125;&gt;</span><br><span class="language-xml">          ç”Ÿæˆé€è§†è¡¨</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">DndProvider</span>&gt;</span></span><br>  );<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">PivotFieldList</span>;<br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* PivotFieldList.css */</span><br><span class="hljs-selector-class">.pivot-field-list</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">font-family</span>: Arial, sans-serif;<br>&#125;<br><br><span class="hljs-selector-class">.available-fields</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">flex-wrap</span>: wrap;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.field-item</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f0f0</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">12px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">cursor</span>: grab;<br>  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;<br>&#125;<br><br><span class="hljs-selector-class">.field-item</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e6e6e6</span>;<br>&#125;<br><br><span class="hljs-selector-class">.field-item</span><span class="hljs-selector-class">.dragging</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;<br>&#125;<br><br><span class="hljs-selector-class">.configuration-area</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.drop-zone</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">32%</span>;<br>  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">150px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-number">#ddd</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-class">.zone-field</span> &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fafafa</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.empty-zone</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.configured-fields</span> &#123;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.configured-field</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f8f8</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">12px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.configured-field</span> <span class="hljs-selector-tag">select</span> &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">8px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.configured-field</span> <span class="hljs-selector-tag">button</span> &#123;<br>  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">8px</span>;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ff4d4d</span>;<br>  <span class="hljs-attribute">color</span>: white;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>&#125;<br><br><span class="hljs-selector-class">.configured-field</span><span class="hljs-selector-class">.dragging</span> &#123;<br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-é›†æˆåˆ°DevExtremeé€è§†è¡¨"><a href="#2-é›†æˆåˆ°DevExtremeé€è§†è¡¨" class="headerlink" title="2. é›†æˆåˆ°DevExtremeé€è§†è¡¨"></a>2. é›†æˆåˆ°DevExtremeé€è§†è¡¨</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// PivotReportBuilder.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">PivotFieldList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./PivotFieldList&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">PivotGridDataSource</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;devextreme/ui/pivot_grid/data_source&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;devextreme/css/dx.light.css&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./PivotReportBuilder.css&#x27;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">PivotReportBuilder</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [dataSource, setDataSource] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);<br>  <span class="hljs-keyword">const</span> [pivotData, setPivotData] = <span class="hljs-title function_">useState</span>([]);<br>  <span class="hljs-keyword">const</span> [fields, setFields] = <span class="hljs-title function_">useState</span>([]);<br>  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br><br>  <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®æº</span><br>  <span class="hljs-keyword">const</span> sampleData = [<br>    &#123; <span class="hljs-title class_">Region</span>: <span class="hljs-string">&#x27;North&#x27;</span>, <span class="hljs-title class_">Product</span>: <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-title class_">Category</span>: <span class="hljs-string">&#x27;Electronics&#x27;</span>, <span class="hljs-title class_">Date</span>: <span class="hljs-string">&#x27;2023-01-01&#x27;</span>, <span class="hljs-title class_">Amount</span>: <span class="hljs-number">1000</span>, <span class="hljs-title class_">Quantity</span>: <span class="hljs-number">10</span> &#125;,<br>    &#123; <span class="hljs-title class_">Region</span>: <span class="hljs-string">&#x27;South&#x27;</span>, <span class="hljs-title class_">Product</span>: <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-title class_">Category</span>: <span class="hljs-string">&#x27;Clothing&#x27;</span>, <span class="hljs-title class_">Date</span>: <span class="hljs-string">&#x27;2023-01-02&#x27;</span>, <span class="hljs-title class_">Amount</span>: <span class="hljs-number">500</span>, <span class="hljs-title class_">Quantity</span>: <span class="hljs-number">5</span> &#125;,<br>    &#123; <span class="hljs-title class_">Region</span>: <span class="hljs-string">&#x27;East&#x27;</span>, <span class="hljs-title class_">Product</span>: <span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-title class_">Category</span>: <span class="hljs-string">&#x27;Home&#x27;</span>, <span class="hljs-title class_">Date</span>: <span class="hljs-string">&#x27;2023-01-03&#x27;</span>, <span class="hljs-title class_">Amount</span>: <span class="hljs-number">800</span>, <span class="hljs-title class_">Quantity</span>: <span class="hljs-number">8</span> &#125;,<br>    &#123; <span class="hljs-title class_">Region</span>: <span class="hljs-string">&#x27;West&#x27;</span>, <span class="hljs-title class_">Product</span>: <span class="hljs-string">&#x27;D&#x27;</span>, <span class="hljs-title class_">Category</span>: <span class="hljs-string">&#x27;Electronics&#x27;</span>, <span class="hljs-title class_">Date</span>: <span class="hljs-string">&#x27;2023-01-04&#x27;</span>, <span class="hljs-title class_">Amount</span>: <span class="hljs-number">1200</span>, <span class="hljs-title class_">Quantity</span>: <span class="hljs-number">12</span> &#125;,<br>    &#123; <span class="hljs-title class_">Region</span>: <span class="hljs-string">&#x27;North&#x27;</span>, <span class="hljs-title class_">Product</span>: <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-title class_">Category</span>: <span class="hljs-string">&#x27;Clothing&#x27;</span>, <span class="hljs-title class_">Date</span>: <span class="hljs-string">&#x27;2023-01-05&#x27;</span>, <span class="hljs-title class_">Amount</span>: <span class="hljs-number">700</span>, <span class="hljs-title class_">Quantity</span>: <span class="hljs-number">7</span> &#125;<br>  ];<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®æº</span><br>    <span class="hljs-keyword">const</span> pivotDataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PivotGridDataSource</span>(&#123;<br>      <span class="hljs-attr">store</span>: sampleData,<br>      <span class="hljs-attr">fields</span>: []<br>    &#125;);<br>    <br>    <span class="hljs-title function_">setDataSource</span>(pivotDataSource);<br>  &#125;, []);<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleGenerateReport</span> = (<span class="hljs-params">configuredFields</span>) =&gt; &#123;<br>    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);<br>    <br>    <span class="hljs-comment">// è½¬æ¢å­—æ®µé…ç½®</span><br>    <span class="hljs-keyword">const</span> devextremeFields = configuredFields.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> (&#123;<br>      <span class="hljs-attr">dataField</span>: field.<span class="hljs-property">name</span>,<br>      <span class="hljs-attr">area</span>: field.<span class="hljs-property">area</span>,<br>      <span class="hljs-attr">dataType</span>: field.<span class="hljs-property">type</span>,<br>      <span class="hljs-attr">summaryType</span>: field.<span class="hljs-property">summaryType</span> || <span class="hljs-string">&#x27;sum&#x27;</span><br>    &#125;));<br>    <br>    <span class="hljs-comment">// æ›´æ–°æ•°æ®æºé…ç½®</span><br>    dataSource.<span class="hljs-title function_">fields</span>(devextremeFields);<br>    <span class="hljs-title function_">setFields</span>(devextremeFields);<br>    <br>    <span class="hljs-comment">// åŠ è½½å¹¶è·å–æ•°æ®</span><br>    dataSource.<span class="hljs-title function_">load</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> pivotData = dataSource.<span class="hljs-title function_">getData</span>();<br>      <span class="hljs-title function_">setPivotData</span>(pivotData);<br>      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Failed to load pivot data:&#x27;</span>, error);<br>      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);<br>    &#125;);<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pivot-report-builder&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ‹–æ‹½å¼é€è§†è¡¨é…ç½®å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      </span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;builder-container&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;field-config&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">PivotFieldList</span> <span class="hljs-attr">onGenerateReport</span>=<span class="hljs-string">&#123;handleGenerateReport&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        </span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pivot-view&quot;</span>&gt;</span></span><br><span class="language-xml">          &#123;loading ? (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;loading&quot;</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          ) : pivotData.length &gt; 0 ? (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;pivot-grid-container&quot;</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">dx-pivot-grid</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pivotGrid&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">dataSource</span>=<span class="hljs-string">&#123;dataSource&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">allowSortingBySummary</span>=<span class="hljs-string">&#123;true&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">allowFiltering</span>=<span class="hljs-string">&#123;true&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">showRowTotals</span>=<span class="hljs-string">&#123;false&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                <span class="hljs-attr">showColumnTotals</span>=<span class="hljs-string">&#123;false&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          ) : (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;no-data&quot;</span>&gt;</span>è¯·é…ç½®å­—æ®µä»¥ç”Ÿæˆé€è§†è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          )&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">PivotReportBuilder</span>;<br></code></pre></td></tr></table></figure><h3 id="3-å®ç°æ‹–æ‹½å¼é…ç½®åŠŸèƒ½çš„å…³é”®æ­¥éª¤"><a href="#3-å®ç°æ‹–æ‹½å¼é…ç½®åŠŸèƒ½çš„å…³é”®æ­¥éª¤" class="headerlink" title="3. å®ç°æ‹–æ‹½å¼é…ç½®åŠŸèƒ½çš„å…³é”®æ­¥éª¤"></a>3. å®ç°æ‹–æ‹½å¼é…ç½®åŠŸèƒ½çš„å…³é”®æ­¥éª¤</h3><h4 id="3-1-åˆå§‹åŒ–é…ç½®"><a href="#3-1-åˆå§‹åŒ–é…ç½®" class="headerlink" title="3.1 åˆå§‹åŒ–é…ç½®"></a>3.1 åˆå§‹åŒ–é…ç½®</h4><ol><li><strong>å®šä¹‰å¯ç”¨å­—æ®µ</strong>ï¼šåœ¨ç»„ä»¶çŠ¶æ€ä¸­å®šä¹‰æ‰€æœ‰å¯ç”¨å­—æ®µåŠå…¶ç±»å‹ã€‚</li><li><strong>åˆå§‹åŒ–æ•°æ®æº</strong>ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„<code>PivotGridDataSource</code>å®ä¾‹ï¼Œç”¨äºåç»­çš„æ•°æ®å¤„ç†ã€‚</li></ol><h4 id="3-2-å®ç°æ‹–æ‹½åŠŸèƒ½"><a href="#3-2-å®ç°æ‹–æ‹½åŠŸèƒ½" class="headerlink" title="3.2 å®ç°æ‹–æ‹½åŠŸèƒ½"></a>3.2 å®ç°æ‹–æ‹½åŠŸèƒ½</h4><ol><li><strong>ä½¿ç”¨react-dndåº“</strong>ï¼š<ul><li>ä½¿ç”¨<code>useDrag</code>é’©å­ä¸ºæ¯ä¸ªå¯ç”¨å­—æ®µæ·»åŠ æ‹–æ‹½åŠŸèƒ½</li><li>ä½¿ç”¨<code>useDrop</code>é’©å­ä¸ºæ¯ä¸ªé…ç½®åŒºåŸŸï¼ˆè¡Œã€åˆ—ã€æ•°æ®ï¼‰æ·»åŠ æ”¾ç½®åŠŸèƒ½</li></ul></li><li><strong>å¤„ç†æ‹–æ‹½äº‹ä»¶</strong>ï¼š<ul><li>åœ¨<code>onDragStart</code>äº‹ä»¶ä¸­è·å–è¢«æ‹–æ‹½çš„å­—æ®µ</li><li>åœ¨<code>onDrop</code>äº‹ä»¶ä¸­å°†å­—æ®µæ·»åŠ åˆ°å¯¹åº”çš„é…ç½®åŒºåŸŸ</li></ul></li></ol><h4 id="3-3-å­—æ®µé…ç½®ç®¡ç†"><a href="#3-3-å­—æ®µé…ç½®ç®¡ç†" class="headerlink" title="3.3 å­—æ®µé…ç½®ç®¡ç†"></a>3.3 å­—æ®µé…ç½®ç®¡ç†</h4><ol><li><strong>ç»´æŠ¤é…ç½®çŠ¶æ€</strong>ï¼š<ul><li>ä½¿ç”¨Reactçš„çŠ¶æ€ç®¡ç†æ¥è·Ÿè¸ªå·²é…ç½®çš„å­—æ®µ</li><li>åˆ†åˆ«ç»´æŠ¤è¡Œã€åˆ—å’Œæ•°æ®åŒºåŸŸçš„å­—æ®µåˆ—è¡¨</li></ul></li><li><strong>æ”¯æŒå­—æ®µä¿®æ”¹</strong>ï¼š<ul><li>å…è®¸ç”¨æˆ·ç§»é™¤å·²é…ç½®çš„å­—æ®µ</li><li>æ”¯æŒä¿®æ”¹æ•°æ®å­—æ®µçš„èšåˆç±»å‹ï¼ˆå¦‚æ±‚å’Œã€è®¡æ•°ã€å¹³å‡å€¼ç­‰ï¼‰</li></ul></li></ol><h4 id="3-4-é€è§†è¡¨ç”Ÿæˆ"><a href="#3-4-é€è§†è¡¨ç”Ÿæˆ" class="headerlink" title="3.4 é€è§†è¡¨ç”Ÿæˆ"></a>3.4 é€è§†è¡¨ç”Ÿæˆ</h4><ol><li><strong>è½¬æ¢å­—æ®µé…ç½®</strong>ï¼š<ul><li>å°†ç”¨æˆ·é…ç½®çš„å­—æ®µè½¬æ¢ä¸ºDevExtremeæ‰€éœ€çš„æ ¼å¼</li><li>è®¾ç½®å­—æ®µçš„<code>dataField</code>ã€<code>area</code>ã€<code>dataType</code>å’Œ<code>summaryType</code></li></ul></li><li><strong>æ›´æ–°æ•°æ®æº</strong>ï¼š<ul><li>ä½¿ç”¨<code>PivotGridDataSource</code>çš„<code>fields()</code>æ–¹æ³•æ›´æ–°å­—æ®µé…ç½®</li><li>è°ƒç”¨<code>load()</code>æ–¹æ³•åŠ è½½å¹¶å¤„ç†æ•°æ®</li></ul></li><li><strong>æ¸²æŸ“é€è§†è¡¨</strong>ï¼š<ul><li>ä½¿ç”¨DevExtremeçš„<code>dx-pivot-grid</code>ç»„ä»¶æ˜¾ç¤ºé€è§†è¡¨</li><li>æ ¹æ®é…ç½®åŠ¨æ€æ›´æ–°æ•°æ®æº</li></ul></li></ol><h4 id="3-5-ç”¨æˆ·äº¤äº’ä¼˜åŒ–"><a href="#3-5-ç”¨æˆ·äº¤äº’ä¼˜åŒ–" class="headerlink" title="3.5 ç”¨æˆ·äº¤äº’ä¼˜åŒ–"></a>3.5 ç”¨æˆ·äº¤äº’ä¼˜åŒ–</h4><ol><li><strong>è§†è§‰åé¦ˆ</strong>ï¼š<ul><li>åœ¨æ‹–æ‹½è¿‡ç¨‹ä¸­æä¾›è§†è§‰åé¦ˆï¼ˆå¦‚é«˜äº®ç›®æ ‡åŒºåŸŸï¼‰</li><li>æ˜¾ç¤ºåŠ è½½çŠ¶æ€æç¤º</li></ul></li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼š<ul><li>æ•è·å¹¶å¤„ç†æ•°æ®åŠ è½½è¿‡ç¨‹ä¸­çš„é”™è¯¯</li><li>æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯</li></ul></li><li><strong>å“åº”å¼å¸ƒå±€</strong>ï¼š<ul><li>ç¡®ä¿ç•Œé¢åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½è‰¯å¥½æ˜¾ç¤º</li><li>ä½¿ç”¨CSSåª’ä½“æŸ¥è¯¢è¿›è¡Œå¸ƒå±€è°ƒæ•´</li></ul></li></ol><h3 id="4-æ‰©å±•åŠŸèƒ½å»ºè®®"><a href="#4-æ‰©å±•åŠŸèƒ½å»ºè®®" class="headerlink" title="4. æ‰©å±•åŠŸèƒ½å»ºè®®"></a>4. æ‰©å±•åŠŸèƒ½å»ºè®®</h3><h4 id="4-1-é«˜çº§é…ç½®é€‰é¡¹"><a href="#4-1-é«˜çº§é…ç½®é€‰é¡¹" class="headerlink" title="4.1 é«˜çº§é…ç½®é€‰é¡¹"></a>4.1 é«˜çº§é…ç½®é€‰é¡¹</h4><ul><li>æ·»åŠ æ’åºé…ç½®åŠŸèƒ½ï¼ˆå‡åº&#x2F;é™åºï¼‰</li><li>æ”¯æŒå­—æ®µåˆ«åè®¾ç½®</li><li>å®ç°æ¡ä»¶æ ¼å¼åŒ–è§„åˆ™é…ç½®</li></ul><h4 id="4-2-æ•°æ®æºç®¡ç†"><a href="#4-2-æ•°æ®æºç®¡ç†" class="headerlink" title="4.2 æ•°æ®æºç®¡ç†"></a>4.2 æ•°æ®æºç®¡ç†</h4><ul><li>æ”¯æŒå¤šä¸ªæ•°æ®æºé€‰æ‹©</li><li>å®ç°æ•°æ®é¢„è§ˆå’Œç­›é€‰åŠŸèƒ½</li><li>æ·»åŠ æ•°æ®åˆ·æ–°å’Œæ›´æ–°æœºåˆ¶</li></ul><h4 id="4-3-æŠ¥å‘Šä¿å­˜ä¸åˆ†äº«"><a href="#4-3-æŠ¥å‘Šä¿å­˜ä¸åˆ†äº«" class="headerlink" title="4.3 æŠ¥å‘Šä¿å­˜ä¸åˆ†äº«"></a>4.3 æŠ¥å‘Šä¿å­˜ä¸åˆ†äº«</h4><ul><li>å®ç°æŠ¥å‘Šé…ç½®çš„ä¿å­˜å’ŒåŠ è½½åŠŸèƒ½</li><li>æ”¯æŒå¯¼å‡ºä¸ºæ¨¡æ¿</li><li>æ·»åŠ æŠ¥å‘Šåˆ†äº«é“¾æ¥ç”ŸæˆåŠŸèƒ½</li></ul><h4 id="4-4-å¤šè¯­è¨€æ”¯æŒ"><a href="#4-4-å¤šè¯­è¨€æ”¯æŒ" class="headerlink" title="4.4 å¤šè¯­è¨€æ”¯æŒ"></a>4.4 å¤šè¯­è¨€æ”¯æŒ</h4><ul><li>å®ç°å›½é™…åŒ–æ”¯æŒ</li><li>æ”¯æŒå¤šç§è¯­è¨€åˆ‡æ¢</li><li>æœ¬åœ°åŒ–æ—¥æœŸå’Œæ•°å­—æ ¼å¼</li></ul><p>é€šè¿‡ä»¥ä¸Šè®¾è®¡ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ‹–æ‹½å¼é…ç½®ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç®€å•çš„æ‹–æ”¾æ“ä½œæ¥æ„å»ºå’Œé…ç½®é€è§†è¡¨æŠ¥å‘Šã€‚è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ç»“åˆReactå’ŒDevExtremeåˆ›å»ºç›´è§‚çš„äº¤äº’ä½“éªŒï¼Œå¹¶å®ç°äº†ä»å­—æ®µé€‰æ‹©ã€é…ç½®åˆ°æŠ¥å‘Šç”Ÿæˆçš„å®Œæ•´æµç¨‹ã€‚</p><h2 id="å®ç°åŠ¨æ€ç”Ÿæˆé€è§†è¡¨æŠ¥å‘Šçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ"><a href="#å®ç°åŠ¨æ€ç”Ÿæˆé€è§†è¡¨æŠ¥å‘Šçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="å®ç°åŠ¨æ€ç”Ÿæˆé€è§†è¡¨æŠ¥å‘Šçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ"></a>å®ç°åŠ¨æ€ç”Ÿæˆé€è§†è¡¨æŠ¥å‘Šçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</h2><p>ä¸ºäº†å±•ç¤ºå‰åç«¯é›†æˆå®ç°åŠ¨æ€ç”Ÿæˆé€è§†è¡¨æŠ¥å‘Šçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼ŒåŒ…æ‹¬åç«¯APIã€å‰ç«¯ç•Œé¢å’Œæ•°æ®äº¤äº’æµç¨‹ã€‚</p><h3 id="1-åç«¯æœåŠ¡å®ç°ï¼ˆNode-js-Expressï¼‰"><a href="#1-åç«¯æœåŠ¡å®ç°ï¼ˆNode-js-Expressï¼‰" class="headerlink" title="1. åç«¯æœåŠ¡å®ç°ï¼ˆNode.js + Expressï¼‰"></a>1. åç«¯æœåŠ¡å®ç°ï¼ˆNode.js + Expressï¼‰</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåç«¯æœåŠ¡æ¥ç®¡ç†é€è§†è¡¨çš„æ•°æ®æºå’Œé…ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å®‰è£…ä¾èµ–</span><br><span class="hljs-comment">// npm install express cors body-parser devextreme axios</span><br><br><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cors&#x27;</span>);<br><span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;body-parser&#x27;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">PivotGridDataSource</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;devextreme/ui/pivot_grid/data_source&#x27;</span>).<span class="hljs-property">default</span>;<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();<br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());<br>app.<span class="hljs-title function_">use</span>(bodyParser.<span class="hljs-title function_">json</span>());<br><br><span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“</span><br><span class="hljs-keyword">const</span> reportsConfig = &#123;<br>  <span class="hljs-attr">sales</span>: &#123;<br>    <span class="hljs-attr">fields</span>: [<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;region&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;row&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;product&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;row&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;date&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;column&quot;</span>, <span class="hljs-attr">dataType</span>: <span class="hljs-string">&quot;date&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;amount&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-attr">summaryType</span>: <span class="hljs-string">&quot;sum&quot;</span> &#125;<br>    ],<br>    <span class="hljs-attr">dataSource</span>: <span class="hljs-string">&quot;salesData.json&quot;</span><br>  &#125;,<br>  <span class="hljs-attr">inventory</span>: &#123;<br>    <span class="hljs-attr">fields</span>: [<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;warehouse&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;row&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;item&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;row&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;category&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;column&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">dataField</span>: <span class="hljs-string">&quot;quantity&quot;</span>, <span class="hljs-attr">area</span>: <span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-attr">summaryType</span>: <span class="hljs-string">&quot;count&quot;</span> &#125;<br>    ],<br>    <span class="hljs-attr">dataSource</span>: <span class="hljs-string">&quot;inventoryData.json&quot;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// è·å–æ‰€æœ‰å¯ç”¨æŠ¥å‘Šç±»å‹</span><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/reports&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">json</span>(&#123; <span class="hljs-attr">reports</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(reportsConfig) &#125;);<br>&#125;);<br><br><span class="hljs-comment">// è·å–ç‰¹å®šæŠ¥å‘Šçš„é…ç½®</span><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/reports/:reportId/config&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> config = reportsConfig[req.<span class="hljs-property">params</span>.<span class="hljs-property">reportId</span>];<br>  <span class="hljs-keyword">if</span> (config) &#123;<br>    res.<span class="hljs-title function_">json</span>(config);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">json</span>(&#123; <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Report configuration not found&#x27;</span> &#125;);<br>  &#125;<br>&#125;);<br><br><span class="hljs-comment">// åŠ¨æ€ç”Ÿæˆé€è§†è¡¨æ•°æ®</span><br>app.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/api/reports/generate-pivot&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> &#123; reportId, fields, filters &#125; = req.<span class="hljs-property">body</span>;<br>  <br>  <span class="hljs-keyword">const</span> config = reportsConfig[reportId];<br>  <span class="hljs-keyword">if</span> (!config) &#123;<br>    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">json</span>(&#123; <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Report configuration not found&#x27;</span> &#125;);<br>  &#125;<br>  <br>  <span class="hljs-comment">// å¦‚æœæä¾›äº†è‡ªå®šä¹‰å­—æ®µï¼Œåˆ™ä½¿ç”¨å®ƒä»¬ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤é…ç½®</span><br>  <span class="hljs-keyword">const</span> usedFields = fields || config.<span class="hljs-property">fields</span>;<br>  <br>  <span class="hljs-comment">// åŠ è½½åŸå§‹æ•°æ®</span><br>  <span class="hljs-keyword">const</span> dataPath = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;data&#x27;</span>, config.<span class="hljs-property">dataSource</span>);<br>  fs.<span class="hljs-title function_">readFile</span>(dataPath, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>(&#123; <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Failed to read data file&#x27;</span> &#125;);<br>    &#125;<br>    <br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">let</span> jsonData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);<br>      <br>      <span class="hljs-comment">// åº”ç”¨è¿‡æ»¤å™¨</span><br>      <span class="hljs-keyword">if</span> (filters &amp;&amp; filters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;<br>        jsonData = jsonData.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>          <span class="hljs-keyword">return</span> filters.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">filter</span> =&gt;</span> &#123;<br>            <span class="hljs-keyword">if</span> (filter.<span class="hljs-property">operator</span> === <span class="hljs-string">&#x27;equals&#x27;</span>) &#123;<br>              <span class="hljs-keyword">return</span> item[filter.<span class="hljs-property">field</span>] === filter.<span class="hljs-property">value</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (filter.<span class="hljs-property">operator</span> === <span class="hljs-string">&#x27;greaterThan&#x27;</span>) &#123;<br>              <span class="hljs-keyword">return</span> item[filter.<span class="hljs-property">field</span>] &gt; filter.<span class="hljs-property">value</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (filter.<span class="hljs-property">operator</span> === <span class="hljs-string">&#x27;lessThan&#x27;</span>) &#123;<br>              <span class="hljs-keyword">return</span> item[filter.<span class="hljs-property">field</span>] &lt; filter.<span class="hljs-property">value</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>          &#125;);<br>        &#125;);<br>      &#125;<br>      <br>      <span class="hljs-comment">// åˆ›å»ºæ•°æ®æºå¹¶åº”ç”¨å­—æ®µé…ç½®</span><br>      <span class="hljs-keyword">const</span> pivotDataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PivotGridDataSource</span>(&#123;<br>        <span class="hljs-attr">store</span>: jsonData,<br>        <span class="hljs-attr">fields</span>: usedFields<br>      &#125;);<br>      <br>      <span class="hljs-comment">// é¢„åŠ è½½æ•°æ®</span><br>      pivotDataSource.<span class="hljs-title function_">load</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-comment">// è·å–å¤„ç†åçš„æ•°æ®</span><br>        <span class="hljs-keyword">const</span> pivotData = pivotDataSource.<span class="hljs-title function_">getData</span>();<br>        res.<span class="hljs-title function_">json</span>(&#123; <br>          <span class="hljs-attr">pivotData</span>: pivotData,<br>          <span class="hljs-attr">totalCount</span>: pivotDataSource.<span class="hljs-title function_">totalCount</span>(),<br>          <span class="hljs-attr">summaryOptions</span>: pivotDataSource.<span class="hljs-title function_">summaryOptions</span>()<br>        &#125;);<br>      &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">loadError</span> =&gt;</span> &#123;<br>        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>(&#123; <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Failed to load pivot data&#x27;</span>, <span class="hljs-attr">details</span>: loadError &#125;);<br>      &#125;);<br>    &#125; <span class="hljs-keyword">catch</span> (parseError) &#123;<br>      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>(&#123; <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Failed to parse data&#x27;</span> &#125;);<br>    &#125;<br>  &#125;);<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3000</span>;<br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server is running on port <span class="hljs-subst">$&#123;PORT&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="2-å‰ç«¯ç•Œé¢å®ç°ï¼ˆDevExtreme-Vue-jsï¼‰"><a href="#2-å‰ç«¯ç•Œé¢å®ç°ï¼ˆDevExtreme-Vue-jsï¼‰" class="headerlink" title="2. å‰ç«¯ç•Œé¢å®ç°ï¼ˆDevExtreme + Vue.jsï¼‰"></a>2. å‰ç«¯ç•Œé¢å®ç°ï¼ˆDevExtreme + Vue.jsï¼‰</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‰ç«¯ç•Œé¢ç”¨äºé…ç½®å’Œæ˜¾ç¤ºé€è§†è¡¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- index.html --&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Dynamic Pivot Report Generator<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/devextreme@23.1.3/build/js/dx.all.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/devextreme@23.1.3/css/dx.light.css&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.config-panel</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-class">.field-config</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>åŠ¨æ€é€è§†è¡¨ç”Ÿæˆå™¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- æŠ¥å‘Šé€‰æ‹©å’Œé…ç½®é¢æ¿ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;config-panel&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;field-config&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;report-select&quot;</span>&gt;</span>é€‰æ‹©æŠ¥å‘Šç±»å‹ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;report-select&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;selectedReport&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;report in availableReports&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;report&quot;</span>&gt;</span>&#123;&#123; report &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;field-config&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;selectedReport&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;loadReportConfig&quot;</span>&gt;</span>åŠ è½½é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;resetFields&quot;</span>&gt;</span>é‡ç½®å­—æ®µ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <br>      <span class="hljs-comment">&lt;!-- å­—æ®µé…ç½®åŒºåŸŸ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;fields.length &gt; 0&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;field-config&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­—æ®µé…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å­—æ®µå<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>èšåˆç±»å‹<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ’åº<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(field, index) in fields&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; field.dataField &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;field.area&quot;</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;row&quot;</span>&gt;</span>è¡Œ<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;column&quot;</span>&gt;</span>åˆ—<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;data&quot;</span>&gt;</span>æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;field.summaryType&quot;</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">&quot;field.area !== &#x27;data&#x27;&quot;</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;sum&quot;</span>&gt;</span>æ±‚å’Œ<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>è®¡æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;avg&quot;</span>&gt;</span>å¹³å‡å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;max&quot;</span>&gt;</span>æœ€å¤§å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;min&quot;</span>&gt;</span>æœ€å°å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;field.sortOrder&quot;</span> <span class="hljs-attr">true-value</span>=<span class="hljs-string">&quot;asc&quot;</span> <span class="hljs-attr">false-value</span>=<span class="hljs-string">&quot;desc&quot;</span>&gt;</span><br>                &#123;&#123; field.sortOrder === &#x27;asc&#x27; ? &#x27;å‡åº&#x27; : &#x27;é™åº&#x27; &#125;&#125;<br>              <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;applyFields&quot;</span>&gt;</span>åº”ç”¨é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <br>      <span class="hljs-comment">&lt;!-- è¿‡æ»¤å™¨é…ç½® --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;selectedReport&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;field-config&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è¿‡æ»¤å™¨é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(filter, index) in filters&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;field-config&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;filter.field&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;field in allFields&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;field&quot;</span>&gt;</span>&#123;&#123; field &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>          <br>          <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;filter.operator&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;equals&quot;</span>&gt;</span>ç­‰äº<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;greaterThan&quot;</span>&gt;</span>å¤§äº<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;lessThan&quot;</span>&gt;</span>å°äº<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>          <br>          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;filter.value&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å€¼&quot;</span>&gt;</span><br>          <br>          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;removeFilter(index)&quot;</span>&gt;</span>ç§»é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addFilter&quot;</span>&gt;</span>æ·»åŠ è¿‡æ»¤å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;applyFilters&quot;</span>&gt;</span>åº”ç”¨è¿‡æ»¤å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- é€è§†è¡¨æ˜¾ç¤ºåŒºåŸŸ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;pivotData.length &gt; 0&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>é€è§†è¡¨ç»“æœ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pivotGridContainer&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 600px; width: 100%;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ€»è®°å½•æ•°ï¼š&#123;&#123; totalCount &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ±‡æ€»é€‰é¡¹ï¼š&#123;&#123; summaryOptions &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> &#123; createApp &#125; = <span class="hljs-title class_">Vue</span>;</span><br><span class="language-javascript">  </span><br><span class="language-javascript">  <span class="hljs-title function_">createApp</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">availableReports</span>: [],</span><br><span class="language-javascript">        <span class="hljs-attr">selectedReport</span>: <span class="hljs-literal">null</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">fields</span>: [],</span><br><span class="language-javascript">        <span class="hljs-attr">defaultFields</span>: [],</span><br><span class="language-javascript">        <span class="hljs-attr">filters</span>: [&#123; <span class="hljs-attr">field</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">operator</span>: <span class="hljs-string">&#x27;equals&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;&#x27;</span> &#125;],</span><br><span class="language-javascript">        <span class="hljs-attr">pivotData</span>: [],</span><br><span class="language-javascript">        <span class="hljs-attr">totalCount</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">summaryOptions</span>: &#123;&#125;</span><br><span class="language-javascript">      &#125;;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">allFields</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultFields</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">dataField</span>))];</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadAvailableReports</span>();</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadAvailableReports</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/reports&#x27;</span>);</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">availableReports</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">reports</span>;</span><br><span class="language-javascript">          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">availableReports</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedReport</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">availableReports</span>[<span class="hljs-number">0</span>];</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">catch</span> (error) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Failed to load reports:&#x27;</span>, error);</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æ— æ³•åŠ è½½æŠ¥å‘Šç±»å‹ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥&#x27;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadReportConfig</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/reports/<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.selectedReport&#125;</span>/config`</span>);</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultFields</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">fields</span>;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultFields</span>));</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">catch</span> (error) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Failed to load report config:&#x27;</span>, error);</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æ— æ³•åŠ è½½æŠ¥å‘Šé…ç½®&#x27;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-keyword">async</span> <span class="hljs-title function_">applyFields</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/api/reports/generate-pivot&#x27;</span>, &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">reportId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedReport</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">fields</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">filters</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">filters</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">field</span> &amp;&amp; f.<span class="hljs-property">value</span>)</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript">          </span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotData</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">pivotData</span>;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalCount</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">totalCount</span>;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">summaryOptions</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">summaryOptions</span>;</span><br><span class="language-javascript">          </span><br><span class="language-javascript">          <span class="hljs-comment">// æ›´æ–°é€è§†è¡¨</span></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderPivotTable</span>();</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">catch</span> (error) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Failed to generate pivot table:&#x27;</span>, error);</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;ç”Ÿæˆé€è§†è¡¨å¤±è´¥&#x27;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-keyword">async</span> <span class="hljs-title function_">applyFilters</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/api/reports/generate-pivot&#x27;</span>, &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">reportId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedReport</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">fields</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">filters</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">filters</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">field</span> &amp;&amp; f.<span class="hljs-property">value</span>)</span><br><span class="language-javascript">          &#125;);</span><br><span class="language-javascript">          </span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotData</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">pivotData</span>;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalCount</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">totalCount</span>;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">summaryOptions</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">summaryOptions</span>;</span><br><span class="language-javascript">          </span><br><span class="language-javascript">          <span class="hljs-comment">// æ›´æ–°é€è§†è¡¨</span></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderPivotTable</span>();</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">catch</span> (error) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Failed to apply filters:&#x27;</span>, error);</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;åº”ç”¨è¿‡æ»¤å™¨å¤±è´¥&#x27;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-keyword">async</span> <span class="hljs-title function_">resetFields</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/reports/<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.selectedReport&#125;</span>/config`</span>);</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultFields</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">fields</span>;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultFields</span>));</span><br><span class="language-javascript">          </span><br><span class="language-javascript">          <span class="hljs-comment">// é‡æ–°ç”Ÿæˆé€è§†è¡¨</span></span><br><span class="language-javascript">          <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyFields</span>();</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">catch</span> (error) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Failed to reset fields:&#x27;</span>, error);</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;é‡ç½®å­—æ®µå¤±è´¥&#x27;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-title function_">addFilter</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">filters</span>.<span class="hljs-title function_">push</span>(&#123; <span class="hljs-attr">field</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">operator</span>: <span class="hljs-string">&#x27;equals&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;&#x27;</span> &#125;);</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-title function_">removeFilter</span>(<span class="hljs-params">index</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">filters</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-title function_">renderPivotTable</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// æ¸…é™¤ç°æœ‰é€è§†è¡¨</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;pivotGridContainer&#x27;</span>);</span><br><span class="language-javascript">        container.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-comment">// åˆ›å»ºæ–°çš„é€è§†è¡¨</span></span><br><span class="language-javascript">        <span class="hljs-keyword">new</span> <span class="hljs-title class_">DevExpress</span>.<span class="hljs-property">ui</span>.<span class="hljs-title function_">dxPivotGrid</span>(container, &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">dataSource</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">store</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">pivotData</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">fields</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span></span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">allowSortingBySummary</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">allowFiltering</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">showRowTotals</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">showColumnTotals</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">          <span class="hljs-title function_">onInitialized</span>(<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">            e.<span class="hljs-property">component</span>.<span class="hljs-title function_">updateDimensions</span>();</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>);</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-æ•°æ®æµä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†"><a href="#3-æ•°æ®æµä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†" class="headerlink" title="3. æ•°æ®æµä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†"></a>3. æ•°æ®æµä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†</h3><h4 id="3-1-åˆå§‹åŒ–é˜¶æ®µ"><a href="#3-1-åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="3.1 åˆå§‹åŒ–é˜¶æ®µ"></a>3.1 åˆå§‹åŒ–é˜¶æ®µ</h4><ol><li><strong>é¡µé¢åŠ è½½</strong>ï¼šå‰ç«¯é¡µé¢åˆå§‹åŒ–æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ <code>/api/reports</code> æ¥å£è·å–æ‰€æœ‰å¯ç”¨æŠ¥å‘Šç±»å‹ã€‚</li><li><strong>é»˜è®¤æŠ¥å‘Šé€‰æ‹©</strong>ï¼šå¦‚æœå­˜åœ¨å¯ç”¨æŠ¥å‘Šç±»å‹ï¼Œé»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªä½œä¸ºå½“å‰æŠ¥å‘Šã€‚</li></ol><h4 id="3-2-é…ç½®åŠ è½½é˜¶æ®µ"><a href="#3-2-é…ç½®åŠ è½½é˜¶æ®µ" class="headerlink" title="3.2 é…ç½®åŠ è½½é˜¶æ®µ"></a>3.2 é…ç½®åŠ è½½é˜¶æ®µ</h4><ol><li><strong>åŠ è½½é…ç½®</strong>ï¼šç‚¹å‡»â€œåŠ è½½é…ç½®â€æŒ‰é’®æ—¶ï¼Œè°ƒç”¨ <code>/api/reports/:reportId/config</code> æ¥å£è·å–è¯¥æŠ¥å‘Šçš„é»˜è®¤å­—æ®µé…ç½®ã€‚</li><li><strong>åˆå§‹åŒ–å­—æ®µ</strong>ï¼šå°†è·å–åˆ°çš„å­—æ®µé…ç½®åº”ç”¨åˆ°å‰ç«¯å­—æ®µé…ç½®åŒºåŸŸï¼Œå…è®¸ç”¨æˆ·ä¿®æ”¹ã€‚</li></ol><h4 id="3-3-å‚æ•°åŠ è½½é˜¶æ®µ"><a href="#3-3-å‚æ•°åŠ è½½é˜¶æ®µ" class="headerlink" title="3.3 å‚æ•°åŠ è½½é˜¶æ®µ"></a>3.3 å‚æ•°åŠ è½½é˜¶æ®µ</h4><ol><li><strong>è¿‡æ»¤å™¨é…ç½®</strong>ï¼šç”¨æˆ·å¯ä»¥åœ¨å‰ç«¯ç•Œé¢æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹å¤šä¸ªè¿‡æ»¤å™¨æ¡ä»¶ã€‚</li><li><strong>å­—æ®µé…ç½®</strong>ï¼šç”¨æˆ·å¯ä»¥è°ƒæ•´å­—æ®µæ‰€å±åŒºåŸŸï¼ˆè¡Œã€åˆ—ã€æ•°æ®ï¼‰ã€èšåˆæ–¹å¼ç­‰ã€‚</li></ol><h4 id="3-4-æ•°æ®åŠ è½½é˜¶æ®µ"><a href="#3-4-æ•°æ®åŠ è½½é˜¶æ®µ" class="headerlink" title="3.4 æ•°æ®åŠ è½½é˜¶æ®µ"></a>3.4 æ•°æ®åŠ è½½é˜¶æ®µ</h4><ol><li><strong>è¯·æ±‚æ•°æ®</strong>ï¼šå½“ç”¨æˆ·ç‚¹å‡»â€œåº”ç”¨é…ç½®â€æˆ–â€œåº”ç”¨è¿‡æ»¤å™¨â€æ—¶ï¼Œå‰ç«¯å‘ <code>/api/reports/generate-pivot</code> å‘é€POSTè¯·æ±‚ã€‚</li><li><strong>å‚æ•°ä¼ é€’</strong>ï¼šè¯·æ±‚ä¸­åŒ…å«æŠ¥å‘ŠIDã€å½“å‰å­—æ®µé…ç½®å’Œè¿‡æ»¤å™¨æ¡ä»¶ã€‚</li><li><strong>æ•°æ®å¤„ç†</strong>ï¼š<ul><li>åç«¯æ ¹æ®æŠ¥å‘ŠIDåŠ è½½å¯¹åº”çš„åŸå§‹æ•°æ®</li><li>åº”ç”¨ç”¨æˆ·æä¾›çš„è¿‡æ»¤å™¨æ¡ä»¶</li><li>ä½¿ç”¨DevExtremeçš„PivotGridDataSourceå¤„ç†æ•°æ®</li><li>è¿”å›å¤„ç†åçš„é€è§†è¡¨æ•°æ®</li></ul></li></ol><h4 id="3-5-æŠ¥å‘Šç”Ÿæˆé˜¶æ®µ"><a href="#3-5-æŠ¥å‘Šç”Ÿæˆé˜¶æ®µ" class="headerlink" title="3.5 æŠ¥å‘Šç”Ÿæˆé˜¶æ®µ"></a>3.5 æŠ¥å‘Šç”Ÿæˆé˜¶æ®µ</h4><ol><li><strong>æ¸²æŸ“é€è§†è¡¨</strong>ï¼šå‰ç«¯æ¥æ”¶åˆ°æ•°æ®åï¼Œä½¿ç”¨DevExtremeçš„dxPivotGridç»„ä»¶æ¸²æŸ“é€è§†è¡¨ã€‚</li><li><strong>åŠ¨æ€æ›´æ–°</strong>ï¼šæ¯æ¬¡å­—æ®µæˆ–è¿‡æ»¤å™¨å˜æ›´åï¼Œéƒ½ä¼šè§¦å‘é€è§†è¡¨çš„é‡æ–°ç”Ÿæˆå’Œæ¸²æŸ“ã€‚</li></ol><h4 id="3-6-çŠ¶æ€ç®¡ç†"><a href="#3-6-çŠ¶æ€ç®¡ç†" class="headerlink" title="3.6 çŠ¶æ€ç®¡ç†"></a>3.6 çŠ¶æ€ç®¡ç†</h4><ol><li><strong>å­—æ®µçŠ¶æ€</strong>ï¼šç”¨æˆ·ä¿®æ”¹çš„å­—æ®µé…ç½®ä¼šè¢«ä¿å­˜åœ¨å‰ç«¯çŠ¶æ€ä¸­ï¼Œæ”¯æŒåç»­çš„å¯¼å‡ºæˆ–ä¿å­˜æ“ä½œã€‚</li><li><strong>è¿‡æ»¤å™¨çŠ¶æ€</strong>ï¼šå½“å‰çš„è¿‡æ»¤å™¨é…ç½®ä¹Ÿä¼šè¢«ä¿å­˜ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹å’Œä¿®æ”¹ã€‚</li></ol><h3 id="4-æ‰©å±•åŠŸèƒ½å»ºè®®-1"><a href="#4-æ‰©å±•åŠŸèƒ½å»ºè®®-1" class="headerlink" title="4. æ‰©å±•åŠŸèƒ½å»ºè®®"></a>4. æ‰©å±•åŠŸèƒ½å»ºè®®</h3><h4 id="4-1-é…ç½®æŒä¹…åŒ–"><a href="#4-1-é…ç½®æŒä¹…åŒ–" class="headerlink" title="4.1 é…ç½®æŒä¹…åŒ–"></a>4.1 é…ç½®æŒä¹…åŒ–</h4><ul><li>å®ç°æŠ¥å‘Šé…ç½®çš„ä¿å­˜åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·ä¿å­˜å¸¸ç”¨çš„å­—æ®µå’Œè¿‡æ»¤å™¨é…ç½®</li><li>æä¾›é…ç½®æ¨¡æ¿åŠŸèƒ½ï¼Œæ”¯æŒä¸åŒåœºæ™¯ä¸‹çš„å¿«é€Ÿåˆ‡æ¢</li></ul><h4 id="4-2-å¯¼å‡ºåŠŸèƒ½"><a href="#4-2-å¯¼å‡ºåŠŸèƒ½" class="headerlink" title="4.2 å¯¼å‡ºåŠŸèƒ½"></a>4.2 å¯¼å‡ºåŠŸèƒ½</h4><ul><li>æ·»åŠ å¯¼å‡ºä¸ºExcelã€PDFç­‰åŠŸèƒ½</li><li>æ”¯æŒå¯¼å‡ºå½“å‰é€è§†è¡¨çš„æ•°æ®å’Œé…ç½®</li></ul><h4 id="4-3-æƒé™æ§åˆ¶"><a href="#4-3-æƒé™æ§åˆ¶" class="headerlink" title="4.3 æƒé™æ§åˆ¶"></a>4.3 æƒé™æ§åˆ¶</h4><ul><li>å®ç°ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†</li><li>ä¸åŒç”¨æˆ·å¯è®¿é—®ä¸åŒçš„æŠ¥å‘Šç±»å‹å’Œæ•°æ®é›†</li></ul><h4 id="4-4-ç¼“å­˜ä¼˜åŒ–"><a href="#4-4-ç¼“å­˜ä¼˜åŒ–" class="headerlink" title="4.4 ç¼“å­˜ä¼˜åŒ–"></a>4.4 ç¼“å­˜ä¼˜åŒ–</h4><ul><li>å¯¹å¸¸ç”¨æŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ï¼Œæé«˜å“åº”é€Ÿåº¦</li><li>å®ç°ç¼“å­˜å¤±æ•ˆæœºåˆ¶ï¼Œç¡®ä¿æ•°æ®æ—¶æ•ˆæ€§</li></ul><p>é€šè¿‡ä»¥ä¸Šè®¾è®¡ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„åŠ¨æ€é€è§†è¡¨æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿï¼Œæ¶µç›–äº†ä»å‚æ•°åŠ è½½ã€æ•°æ®è·å–åˆ°æŠ¥å‘Šç”Ÿæˆçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å‰åç«¯å¦‚ä½•åä½œï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨DevExtremeçš„å¼ºå¤§åŠŸèƒ½æ¥æ„å»ºçµæ´»çš„åˆ†æå·¥å…·ã€‚</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>å®ç°Webå‰ç«¯çµæ´»é…ç½®ç”Ÿæˆé€è§†è¡¨éœ€è¦ç»¼åˆè€ƒè™‘æ¶æ„è®¾è®¡ã€æ•°æ®å¤„ç†èƒ½åŠ›å’Œç”¨æˆ·ä½“éªŒã€‚é€‰æ‹©åˆé€‚çš„å®ç°æ–¹æ¡ˆï¼Œå¹¶æŒç»­ä¼˜åŒ–æ€§èƒ½å’Œäº¤äº’ä½“éªŒï¼Œæ‰èƒ½æ»¡è¶³ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚é€šè¿‡æœ¬æ–‡æä¾›çš„å‰åç«¯é›†æˆç¤ºä¾‹ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¥½åœ°ç†è§£å¦‚ä½•æ„å»ºä¸€ä¸ªå®Œæ•´çš„åŠ¨æ€é€è§†è¡¨ç”Ÿæˆç³»ç»Ÿï¼Œä»æ•°æ®è·å–åˆ°æœ€ç»ˆå¯è§†åŒ–å±•ç¤ºçš„å®Œæ•´æµç¨‹ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://js.devexpress.com/Vue/Documentation/Guide/Vue_Components/DevExtreme_Vue_Components/">Pivot Table UI Design Principles</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pivot Table</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Thrift åè®®ä»‹ç»</title>
    <link href="/2025/06/19/thrift-protocol/"/>
    <url>/2025/06/19/thrift-protocol/</url>
    
    <content type="html"><![CDATA[<h1 id="Thrift-åè®®è§£ææ–‡æ¡£"><a href="#Thrift-åè®®è§£ææ–‡æ¡£" class="headerlink" title="Thrift åè®®è§£ææ–‡æ¡£"></a>Thrift åè®®è§£ææ–‡æ¡£</h1><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a></li><li><a href="#%E5%8D%8F%E8%AE%AE%E7%BB%93%E6%9E%84">åè®®ç»“æ„</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ•°æ®ç±»å‹</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">æ•°æ®ç»“æ„</a></li><li><a href="#%E6%9C%8D%E5%8A%A1%E5%AE%9A%E4%B9%89">æœåŠ¡å®šä¹‰</a></li><li><a href="#%E7%A4%BA%E4%BE%8B">ç¤ºä¾‹</a></li><li><a href="#%E5%8D%8F%E8%AE%AE%E4%BC%98%E5%8A%BF%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">åè®®ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯</a></li><li><a href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3">å®˜æ–¹æ–‡æ¡£</a></li><li><a href="#%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2">è¯­è¨€åˆ‡æ¢</a></li></ol><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Thrift æ˜¯ä¸€ç§å¯æ‰©å±•çš„è·¨è¯­è¨€æœåŠ¡å¼€å‘æ¡†æ¶ï¼Œå®ƒç»“åˆäº†åŠŸèƒ½å¼ºå¤§çš„ä»£ç ç”Ÿæˆå¼•æ“ï¼Œèƒ½å¤Ÿæ„å»ºé«˜æ•ˆã€å¯é ä¸”æ— ç¼å…¼å®¹çš„æœåŠ¡ã€‚Thrift æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ C++, Java, Python, PHP, Ruby, Erlang, Perl, Haskell, C#, Cocoa, JavaScript, Node.js ç­‰ã€‚</p><h2 id="åè®®ç»“æ„"><a href="#åè®®ç»“æ„" class="headerlink" title="åè®®ç»“æ„"></a>åè®®ç»“æ„</h2><p>Thrift åè®®ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li><strong>å‘½åç©ºé—´</strong>ï¼ˆNamespaceï¼‰: ç”¨äºç»„ç»‡ä»£ç çš„é€»è¾‘åˆ†ç»„ã€‚</li><li><strong>æ•°æ®ç»“æ„</strong>ï¼ˆData Structuresï¼‰: å®šä¹‰æœåŠ¡é—´é€šä¿¡çš„æ•°æ®æ ¼å¼ã€‚</li><li><strong>æœåŠ¡æ¥å£</strong>ï¼ˆService Interfaceï¼‰: å®šä¹‰è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰çš„æ–¹æ³•ç­¾åã€‚</li></ul><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>Thrift æ”¯æŒä»¥ä¸‹åŸºæœ¬æ•°æ®ç±»å‹ï¼š</p><ul><li><code>bool</code>: å¸ƒå°”å€¼</li><li><code>byte</code>: 8ä½æœ‰ç¬¦å·æ•´æ•°</li><li><code>i16</code>: 16ä½æœ‰ç¬¦å·æ•´æ•°</li><li><code>i32</code>: 32ä½æœ‰ç¬¦å·æ•´æ•°</li><li><code>i64</code>: 64ä½æœ‰ç¬¦å·æ•´æ•°</li><li><code>double</code>: 64ä½æµ®ç‚¹æ•°</li><li><code>string</code>: UTF-8 ç¼–ç çš„å­—ç¬¦ä¸²</li></ul><p>æ­¤å¤–ï¼ŒThrift è¿˜æ”¯æŒå¤æ‚æ•°æ®ç±»å‹ï¼š</p><ul><li><strong>struct</strong>: ç»“æ„ä½“ï¼Œç±»ä¼¼äº C è¯­è¨€ä¸­çš„ structã€‚</li><li><strong>union</strong>: è”åˆä½“ï¼Œç±»ä¼¼äº C è¯­è¨€ä¸­çš„ unionã€‚</li><li><strong>enum</strong>: æšä¸¾ï¼Œè¡¨ç¤ºä¸€ç»„å‘½åçš„æ•´æ•°å¸¸é‡ã€‚</li><li><strong>list</strong>: æœ‰åºçš„å…ƒç´ é›†åˆã€‚</li><li>**set&#96;: æ— åºçš„å”¯ä¸€å…ƒç´ é›†åˆã€‚</li><li><strong>map</strong>: é”®å€¼å¯¹çš„é›†åˆã€‚</li></ul><h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><p>åœ¨ Thrift ä¸­ï¼Œæ•°æ®ç»“æ„æ˜¯é€šè¿‡ <code>struct</code> å…³é”®å­—å®šä¹‰çš„ã€‚æ¯ä¸ªå­—æ®µéƒ½éœ€è¦æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦å’Œç±»å‹ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">string</span> name,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">i16</span> age<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Struct"><a href="#Struct" class="headerlink" title="Struct"></a>Struct</h3><p><code>struct</code> æ˜¯ Thrift ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ç±»æˆ–ç»“æ„ä½“ã€‚æ¯ä¸ªå­—æ®µå¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬å…¶ä»– <code>struct</code>ã€‚</p><h4 id="ç¤ºä¾‹å›¾å½¢åŒ–"><a href="#ç¤ºä¾‹å›¾å½¢åŒ–" class="headerlink" title="ç¤ºä¾‹å›¾å½¢åŒ–"></a>ç¤ºä¾‹å›¾å½¢åŒ–</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------------+</span><br><span class="hljs-section">|         Person             |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|   id    |       i32        |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  name   |     string       |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  age    |       i16        |</span><br><span class="hljs-section">+---------+------------------+</span><br></code></pre></td></tr></table></figure><h3 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h3><p><code>union</code> æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œåªèƒ½åŒ…å«ä¸€ä¸ªå­—æ®µçš„å€¼ã€‚å®ƒç±»ä¼¼äº C è¯­è¨€ä¸­çš„è”åˆä½“ï¼Œé€‚ç”¨äºéœ€è¦èŠ‚çœå†…å­˜çš„åœºæ™¯ã€‚</p><h4 id="ç¤ºä¾‹å›¾å½¢åŒ–-1"><a href="#ç¤ºä¾‹å›¾å½¢åŒ–-1" class="headerlink" title="ç¤ºä¾‹å›¾å½¢åŒ–"></a>ç¤ºä¾‹å›¾å½¢åŒ–</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------------+</span><br><span class="hljs-section">|         ColorUnion         |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  RED    |       0          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  GREEN  |       1          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  BLUE   |       2          |</span><br><span class="hljs-section">+---------+------------------+</span><br></code></pre></td></tr></table></figure><h3 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h3><p><code>enum</code> ç”¨äºå®šä¹‰ä¸€ç»„å‘½åçš„æ•´æ•°å¸¸é‡ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Color</span> </span>&#123;<br>  RED = <span class="hljs-number">0</span>,<br>  GREEN = <span class="hljs-number">1</span>,<br>  BLUE = <span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹å›¾å½¢åŒ–-2"><a href="#ç¤ºä¾‹å›¾å½¢åŒ–-2" class="headerlink" title="ç¤ºä¾‹å›¾å½¢åŒ–"></a>ç¤ºä¾‹å›¾å½¢åŒ–</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------------+</span><br><span class="hljs-section">|        ColorEnum           |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  RED    |       0          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  GREEN  |       1          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  BLUE   |       2          |</span><br><span class="hljs-section">+---------+------------------+</span><br></code></pre></td></tr></table></figure><h3 id="Container-Types"><a href="#Container-Types" class="headerlink" title="Container Types"></a>Container Types</h3><p>Thrift æ”¯æŒä¸‰ç§å®¹å™¨ç±»å‹ï¼š</p><ul><li><strong>list</strong>: æœ‰åºçš„å…ƒç´ é›†åˆã€‚</li><li><strong>set</strong>: æ— åºçš„å”¯ä¸€å…ƒç´ é›†åˆã€‚</li><li><strong>map</strong>: é”®å€¼å¯¹çš„é›†åˆã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Example</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">list</span>&lt;<span class="hljs-type">string</span>&gt; names,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">set</span>&lt;<span class="hljs-type">i32</span>&gt; ids,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">map</span>&lt;<span class="hljs-type">string</span>, <span class="hljs-type">i32</span>&gt; scores<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹å›¾å½¢åŒ–-3"><a href="#ç¤ºä¾‹å›¾å½¢åŒ–-3" class="headerlink" title="ç¤ºä¾‹å›¾å½¢åŒ–"></a>ç¤ºä¾‹å›¾å½¢åŒ–</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+---------------------------------------------------+</span><br><span class="hljs-section">|                   Example                         |</span><br><span class="hljs-section">+----------------+----------------------------------+</span><br>|     names      |        [&quot;Alice&quot;, &quot;Bob&quot;]        |<br><span class="hljs-code">+----------------+</span>----------------------------------+<br><span class="hljs-section">|      ids       |           &#123;1001, 1002&#125;           |</span><br><span class="hljs-section">+----------------+----------------------------------+</span><br><span class="hljs-section">|     scores     | &#123;&quot;Math&quot;: 90, &quot;English&quot;: 85&#125;    |</span><br><span class="hljs-section">+----------------+----------------------------------+</span><br></code></pre></td></tr></table></figure><h2 id="æœåŠ¡å®šä¹‰"><a href="#æœåŠ¡å®šä¹‰" class="headerlink" title="æœåŠ¡å®šä¹‰"></a>æœåŠ¡å®šä¹‰</h2><p>Thrift å…è®¸æ‚¨å®šä¹‰æœåŠ¡æ¥å£ï¼Œè¿™äº›æ¥å£å¯ä»¥è¢«å®¢æˆ·ç«¯è°ƒç”¨ã€‚æœåŠ¡æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">service</span> <span class="hljs-title">MyService</span> </span>&#123;<br>  <span class="hljs-type">string</span> sayHello(<span class="hljs-number">1</span>: <span class="hljs-type">string</span> name)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Thrift IDL æ–‡ä»¶ç¤ºä¾‹ï¼š</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-keyword">namespace</span> cpp example<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">string</span> name,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">i16</span> age<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">service</span> <span class="hljs-title">PersonService</span> </span>&#123;<br>  Person getPerson(<span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åè®®ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯"><a href="#åè®®ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯" class="headerlink" title="åè®®ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯"></a>åè®®ä¼˜åŠ¿ä¸åº”ç”¨åœºæ™¯</h2><h3 id="åè®®ä¼˜åŠ¿"><a href="#åè®®ä¼˜åŠ¿" class="headerlink" title="åè®®ä¼˜åŠ¿"></a>åè®®ä¼˜åŠ¿</h3><p>Thrift åè®®å…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—ä¼˜åŠ¿ï¼š</p><ol><li><strong>è·¨è¯­è¨€æ”¯æŒ</strong>ï¼šThrift æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œä½¿å¾—ä¸åŒè¯­è¨€ç¼–å†™çš„æœåŠ¡å¯ä»¥æ— ç¼é€šä¿¡ã€‚</li><li><strong>é«˜æ€§èƒ½</strong>ï¼šThrift ä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç ï¼Œç›¸è¾ƒäº JSON å’Œ XML æ›´åŠ é«˜æ•ˆï¼Œé€‚åˆé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„åœºæ™¯ã€‚</li><li><strong>ä»£ç è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šThrift æä¾›äº†å¼ºå¤§çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œå¯ä»¥æ ¹æ® IDL è‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»£ç ï¼Œå‡å°‘é‡å¤å¼€å‘å·¥ä½œã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼šThrift æ”¯æŒå¤šç§ä¼ è¾“æ–¹å¼ï¼ˆå¦‚ TCPã€HTTPï¼‰å’Œåºåˆ—åŒ–åè®®ï¼ˆå¦‚ Binaryã€Compactï¼‰ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»é€‰æ‹©ã€‚</li><li><strong>è‰¯å¥½çš„å¯æ‰©å±•æ€§</strong>ï¼šThrift çš„è®¾è®¡å…è®¸åœ¨æœªæ¥æ·»åŠ æ–°çš„å­—æ®µæˆ–æ–¹æ³•è€Œä¸å½±å“ç°æœ‰æœåŠ¡çš„å…¼å®¹æ€§ã€‚</li></ol><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>Thrift å¹¿æ³›åº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¸¸è§çš„ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ol><li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šThrift å¯ä»¥ä½œä¸ºæœåŠ¡é—´é€šä¿¡çš„åè®®ï¼Œå¸®åŠ©æ„å»ºé«˜æ•ˆçš„å¾®æœåŠ¡ç³»ç»Ÿã€‚</li><li><strong>å¤§æ•°æ®å¤„ç†</strong>ï¼šThrift åœ¨å¤§æ•°æ®å¹³å°ä¸­å¸¸ç”¨äºå®šä¹‰æ•°æ®ç»“æ„å’Œé€šä¿¡åè®®ã€‚</li><li><strong>è·¨å¹³å°é€šä¿¡</strong>ï¼šå½“ç³»ç»Ÿéœ€è¦åœ¨ä¸åŒè¯­è¨€ç¼–å†™çš„ç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡æ—¶ï¼ŒThrift æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆã€‚</li><li><strong>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</strong>ï¼ˆRPCï¼‰ï¼šThrift å†…ç½®å¯¹ RPC çš„æ”¯æŒï¼Œéå¸¸é€‚åˆæ„å»ºè¿œç¨‹è°ƒç”¨æœåŠ¡ã€‚</li></ol><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹"><a href="#å®é™…åº”ç”¨ç¤ºä¾‹" class="headerlink" title="å®é™…åº”ç”¨ç¤ºä¾‹"></a>å®é™…åº”ç”¨ç¤ºä¾‹</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåŸºäº Thrift çš„æœåŠ¡æ¥è·å–ç”¨æˆ·ä¿¡æ¯ï¼š</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-comment">// user.thrift</span><br><span class="hljs-keyword">namespace</span> cpp user<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">User</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">string</span> name,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">string</span> email,<br>  <span class="hljs-number">4</span>: <span class="hljs-type">i16</span> age<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">service</span> <span class="hljs-title">UserService</span> </span>&#123;<br>  User getUser(<span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id),<br>  <span class="hljs-type">list</span>&lt;User&gt; getAllUsers()<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>UserService</code> æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<code>getUser</code> ç”¨äºæ ¹æ®ç”¨æˆ· ID è·å–å•ä¸ªç”¨æˆ·çš„ä¿¡æ¯ï¼Œ<code>getAllUsers</code> ç”¨äºè·å–æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨ã€‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ Thrift æä¾›çš„åº“è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œå¹¶è‡ªåŠ¨å¤„ç†åº•å±‚çš„åºåˆ—åŒ–å’Œç½‘ç»œé€šä¿¡ã€‚</p><p>Thrift çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒèƒ½å¤Ÿå°†å¤æ‚çš„é€šä¿¡é€»è¾‘æŠ½è±¡åŒ–ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚</p><h2 id="å®˜æ–¹æ–‡æ¡£"><a href="#å®˜æ–¹æ–‡æ¡£" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a>å®˜æ–¹æ–‡æ¡£</h2><p>æ‚¨å¯ä»¥è®¿é—® <a href="https://thrift.apache.org/docs/">Apache Thrift å®˜æ–¹æ–‡æ¡£</a> è·å–æ›´å¤šå…³äº Thrift åè®®çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®‰è£…æŒ‡å—ã€ä½¿ç”¨æ•™ç¨‹å’Œ API å‚è€ƒã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RPC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Thrift Protocol Documentation</title>
    <link href="/2025/06/19/thrift-protocol.en/"/>
    <url>/2025/06/19/thrift-protocol.en/</url>
    
    <content type="html"><![CDATA[<h1 id="Thrift-Protocol-Documentation"><a href="#Thrift-Protocol-Documentation" class="headerlink" title="Thrift Protocol Documentation"></a>Thrift Protocol Documentation</h1><h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ol><li><a href="#introduction">Introduction</a></li><li><a href="#protocol-structure">Protocol Structure</a></li><li><a href="#data-types">Data Types</a></li><li><a href="#data-structures">Data Structures</a></li><li><a href="#service-definition">Service Definition</a></li><li><a href="#examples">Examples</a></li><li><a href="#protocol-advantages-and-use-cases">Protocol Advantages and Use Cases</a></li><li><a href="#official-documentation">Official Documentation</a></li></ol><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Thrift is a scalable cross-language service development framework that combines a powerful code generation engine to build efficient, reliable, and seamlessly compatible services. Thrift supports multiple programming languages, including C++, Java, Python, PHP, Ruby, Erlang, Perl, Haskell, C#, Cocoa, JavaScript, Node.js, and more.</p><h2 id="Protocol-Structure"><a href="#Protocol-Structure" class="headerlink" title="Protocol Structure"></a>Protocol Structure</h2><p>The Thrift protocol consists of several components:</p><ul><li><strong>Namespace</strong>: Used for logical grouping of code.</li><li><strong>Data Structures</strong>: Define the data format for communication between services.</li><li><strong>Service Interface</strong>: Defines method signatures for remote procedure calls (RPC).</li></ul><h2 id="Data-Types"><a href="#Data-Types" class="headerlink" title="Data Types"></a>Data Types</h2><p>Thrift supports the following basic data types:</p><ul><li><code>bool</code>: Boolean value</li><li><code>byte</code>: 8-bit signed integer</li><li><code>i16</code>: 16-bit signed integer</li><li><code>i32</code>: 32-bit signed integer</li><li><code>i64</code>: 64-bit signed integer</li><li><code>double</code>: 64-bit floating point number</li><li><code>string</code>: UTF-8 encoded string</li></ul><p>Additionally, Thrift supports complex data types:</p><ul><li><strong>struct</strong>: Struct-like structure in C language.</li><li><strong>union</strong>: Union-like structure in C language.</li><li><strong>enum</strong>: Enumeration representing a set of named integer constants.</li><li><strong>list</strong>: Ordered collection of elements.</li><li><strong>set</strong>: Unordered collection of unique elements.</li><li><strong>map</strong>: Collection of key-value pairs.</li></ul><h2 id="Data-Structures"><a href="#Data-Structures" class="headerlink" title="Data Structures"></a>Data Structures</h2><p>In Thrift, data structures are defined using the <code>struct</code> keyword. Each field must be assigned a unique identifier and type. For example:</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">string</span> name,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">i16</span> age<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Struct"><a href="#Struct" class="headerlink" title="Struct"></a>Struct</h3><p>A <code>struct</code> is the most commonly used data structure in Thrift, similar to classes or structs in other languages. Each field can be any data type, including other <code>struct</code>s.</p><h4 id="Graphical-Example"><a href="#Graphical-Example" class="headerlink" title="Graphical Example"></a>Graphical Example</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------------+</span><br><span class="hljs-section">|         Person             |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|   id    |       i32        |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  name   |     string       |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  age    |       i16        |</span><br><span class="hljs-section">+---------+------------------+</span><br></code></pre></td></tr></table></figure><h3 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h3><p>A <code>union</code> is a special data structure that can only contain one fieldâ€™s value. It is similar to unions in the C language and is suitable for scenarios where memory needs to be saved.</p><h4 id="Graphical-Example-1"><a href="#Graphical-Example-1" class="headerlink" title="Graphical Example"></a>Graphical Example</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------------+</span><br><span class="hljs-section">|         ColorUnion         |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  RED    |       0          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  GREEN  |       1          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  BLUE   |       2          |</span><br><span class="hljs-section">+---------+------------------+</span><br></code></pre></td></tr></table></figure><h3 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h3><p>An <code>enum</code> is used to define a group of named integer constants. For example:</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Color</span> </span>&#123;<br>  RED = <span class="hljs-number">0</span>,<br>  GREEN = <span class="hljs-number">1</span>,<br>  BLUE = <span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Graphical-Example-2"><a href="#Graphical-Example-2" class="headerlink" title="Graphical Example"></a>Graphical Example</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------------+</span><br><span class="hljs-section">|        ColorEnum           |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  RED    |       0          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  GREEN  |       1          |</span><br><span class="hljs-section">+---------+------------------+</span><br><span class="hljs-section">|  BLUE   |       2          |</span><br><span class="hljs-section">+---------+------------------+</span><br></code></pre></td></tr></table></figure><h3 id="Container-Types"><a href="#Container-Types" class="headerlink" title="Container Types"></a>Container Types</h3><p>Thrift supports three container types:</p><ul><li><strong>list</strong>: Ordered collection of elements.</li><li><strong>set</strong>: Unordered collection of unique elements.</li><li><strong>map</strong>: Collection of key-value pairs.</li></ul><p>For example:</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Example</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">list</span>&lt;<span class="hljs-type">string</span>&gt; names,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">set</span>&lt;<span class="hljs-type">i32</span>&gt; ids,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">map</span>&lt;<span class="hljs-type">string</span>, <span class="hljs-type">i32</span>&gt; scores<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Graphical-Example-3"><a href="#Graphical-Example-3" class="headerlink" title="Graphical Example"></a>Graphical Example</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+---------------------------------------------------+</span><br><span class="hljs-section">|                   Example                         |</span><br><span class="hljs-section">+----------------+----------------------------------+</span><br>|     names      |        [&quot;Alice&quot;, &quot;Bob&quot;]        |<br><span class="hljs-code">+----------------+</span>----------------------------------+<br><span class="hljs-section">|      ids       |           &#123;1001, 1002&#125;           |</span><br><span class="hljs-section">+----------------+----------------------------------+</span><br><span class="hljs-section">|     scores     | &#123;&quot;Math&quot;: 90, &quot;English&quot;: 85&#125;    |</span><br><span class="hljs-section">+----------------+----------------------------------+</span><br></code></pre></td></tr></table></figure><h2 id="Service-Definition"><a href="#Service-Definition" class="headerlink" title="Service Definition"></a>Service Definition</h2><p>Thrift allows you to define service interfaces that can be called by clients. A service interface definition looks like this:</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-class"><span class="hljs-keyword">service</span> <span class="hljs-title">MyService</span> </span>&#123;<br>  <span class="hljs-type">string</span> sayHello(<span class="hljs-number">1</span>: <span class="hljs-type">string</span> name)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p>Below is a complete example of a Thrift IDL file:</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-keyword">namespace</span> cpp example<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">string</span> name,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">i16</span> age<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">service</span> <span class="hljs-title">PersonService</span> </span>&#123;<br>  Person getPerson(<span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Protocol-Advantages-and-Use-Cases"><a href="#Protocol-Advantages-and-Use-Cases" class="headerlink" title="Protocol Advantages and Use Cases"></a>Protocol Advantages and Use Cases</h2><h3 id="Protocol-Advantages"><a href="#Protocol-Advantages" class="headerlink" title="Protocol Advantages"></a>Protocol Advantages</h3><p>Thrift protocol has several notable advantages:</p><ol><li><strong>Cross-Language Support</strong>: Thrift supports multiple programming languages, allowing seamless communication between services written in different languages.</li><li><strong>High Performance</strong>: Thrift uses binary encoding, which is more efficient than JSON and XML, making it suitable for high-concurrency, low-latency scenarios.</li><li><strong>Code Generation</strong>: Thrift provides a powerful code generation tool that can automatically generate client and server-side code from IDL, reducing repetitive development work.</li><li><strong>Flexibility</strong>: Thrift supports various transport methods (e.g., TCP, HTTP) and serialization protocols (e.g., Binary, Compact), allowing flexible choices based on requirements.</li><li><strong>Good Extensibility</strong>: The design of Thrift allows adding new fields or methods in the future without affecting the compatibility of existing services.</li></ol><h3 id="Use-Cases"><a href="#Use-Cases" class="headerlink" title="Use Cases"></a>Use Cases</h3><p>Thrift is widely used in distributed systems, with common use cases including:</p><ol><li><strong>Microservices Architecture</strong>: Thrift can serve as the communication protocol between services, helping to build efficient microservices systems.</li><li><strong>Big Data Processing</strong>: Thrift is often used in big data platforms to define data structures and communication protocols.</li><li><strong>Cross-Platform Communication</strong>: When systems need to communicate between components written in different languages, Thrift provides a unified solution.</li><li><strong>Remote Procedure Call</strong> (RPC): Thrift has built-in support for RPC, making it ideal for building remote call services.</li></ol><h3 id="Practical-Application-Example"><a href="#Practical-Application-Example" class="headerlink" title="Practical Application Example"></a>Practical Application Example</h3><p>Suppose we have a user management system that includes a Thrift-based service for retrieving user information:</p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs thrift"><span class="hljs-comment">// user.thrift</span><br><span class="hljs-keyword">namespace</span> cpp user<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">User</span> </span>&#123;<br>  <span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id,<br>  <span class="hljs-number">2</span>: <span class="hljs-type">string</span> name,<br>  <span class="hljs-number">3</span>: <span class="hljs-type">string</span> email,<br>  <span class="hljs-number">4</span>: <span class="hljs-type">i16</span> age<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">service</span> <span class="hljs-title">UserService</span> </span>&#123;<br>  User getUser(<span class="hljs-number">1</span>: <span class="hljs-type">i32</span> id),<br>  <span class="hljs-type">list</span>&lt;User&gt; getAllUsers()<br>&#125;<br></code></pre></td></tr></table></figure><p>In this example, <code>UserService</code> provides two methods: <code>getUser</code>, which retrieves a single userâ€™s information based on their ID, and <code>getAllUsers</code>, which retrieves a list of all users. Clients can invoke these methods through the Thrift library and automatically handle the underlying serialization and network communication.</p><p>The power of Thrift lies in its ability to abstract away complex communication logic, allowing developers to focus on implementing business logic.</p><h2 id="Official-Documentation"><a href="#Official-Documentation" class="headerlink" title="Official Documentation"></a>Official Documentation</h2><p>You can visit the <a href="https://thrift.apache.org/docs/">Apache Thrift official documentation</a> to get more detailed information about the Thrift protocol, including installation guides, usage tutorials, and API references.</p>]]></content>
    
    
    <categories>
      
      <category>Programing</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RPC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VaR åœ¨CTRMä¸­çš„åº”ç”¨åŠä»‹ç»</title>
    <link href="/2025/06/19/var-calculation-in-ctrm/"/>
    <url>/2025/06/19/var-calculation-in-ctrm/</url>
    
    <content type="html"><![CDATA[<h1 id="åœ¨CTRMç³»ç»Ÿä¸­è®¡ç®—VaRçš„ä»‹ç»"><a href="#åœ¨CTRMç³»ç»Ÿä¸­è®¡ç®—VaRçš„ä»‹ç»" class="headerlink" title="åœ¨CTRMç³»ç»Ÿä¸­è®¡ç®—VaRçš„ä»‹ç»"></a>åœ¨CTRMç³»ç»Ÿä¸­è®¡ç®—VaRçš„ä»‹ç»</h1><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#%E8%83%8C%E6%99%AF">èƒŒæ™¯</a></li><li><a href="#var%E7%AE%80%E4%BB%8B">VaRç®€ä»‹</a></li><li><a href="#%E8%AE%A1%E7%AE%97%E8%BF%87%E7%A8%8B">è®¡ç®—è¿‡ç¨‹</a></li><li><a href="#%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">æ•°å­¦å…¬å¼</a></li><li><a href="#%E6%B3%A2%E5%8A%A8%E7%8E%87%E8%AE%A1%E7%AE%97">æ³¢åŠ¨ç‡è®¡ç®—</a></li><li><a href="#%E7%A4%BA%E4%BE%8B">ç¤ºä¾‹</a></li><li><a href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">åº”ç”¨åœºæ™¯</a></li><li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li></ol><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åœ¨é‡‘èå’Œå¤§å®—å•†å“äº¤æ˜“é¢†åŸŸï¼Œé£é™©æ§åˆ¶æ˜¯ä¼ä¸šç¨³å¥è¿è¥çš„å…³é”®ç¯èŠ‚ã€‚éšç€å¸‚åœºæ³¢åŠ¨æ€§å¢åŠ ï¼Œé‡‘èæœºæ„å’Œå¤§å‹ä¼ä¸šè¶Šæ¥è¶Šä¾èµ–äºå¤æ‚çš„é£é™©ç®¡ç†ç³»ç»Ÿï¼ˆRisk Management System, RMSï¼‰æ¥é‡åŒ–å’Œç®¡ç†æ½œåœ¨æŸå¤±ã€‚</p><p>CTRMï¼ˆCommodity Trading and Risk Managementï¼‰ç³»ç»Ÿæ˜¯ä¸€ç§ä¸“é—¨ç”¨äºç®¡ç†å’Œæ§åˆ¶å•†å“äº¤æ˜“åŠç›¸å…³é£é™©çš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆã€‚VaRï¼ˆValue at Riskï¼Œé£é™©ä»·å€¼ï¼‰æ˜¯è¡¡é‡é‡‘èèµ„äº§æˆ–æŠ•èµ„ç»„åˆåœ¨æœªæ¥ç‰¹å®šæ—¶é—´åŒºé—´å†…å¯èƒ½é­å—çš„æœ€å¤§æŸå¤±çš„ä¸€ç§å¸¸ç”¨æŒ‡æ ‡ï¼Œå¹¿æ³›åº”ç”¨äºå¸‚åœºé£é™©ç®¡ç†ä¸­ã€‚</p><p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨CTRMç³»ç»Ÿä¸­å®ç°VaRçš„è®¡ç®—ï¼Œå¹¶æä¾›ç›¸å…³çš„æ•°å­¦å…¬å¼ä¸å®é™…ç¤ºä¾‹ã€‚</p><h2 id="VaRç®€ä»‹"><a href="#VaRç®€ä»‹" class="headerlink" title="VaRç®€ä»‹"></a>VaRç®€ä»‹</h2><p>VaR æ˜¯ä¸€ç§ç»Ÿè®¡æŠ€æœ¯ï¼Œç”¨äºä¼°è®¡å’Œé‡åŒ–åœ¨ä¸€å®šç½®ä¿¡æ°´å¹³ä¸‹ï¼ŒæŸä¸€é‡‘èèµ„äº§æˆ–æŠ•èµ„ç»„åˆåœ¨æœªæ¥ç‰¹å®šæ—¶é—´æ®µå†…çš„æœ€å¤§æ½œåœ¨æŸå¤±ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª95%ç½®ä¿¡æ°´å¹³ä¸‹çš„1å¤©VaRä¸º$100ä¸‡æ„å‘³ç€ï¼šåœ¨æ­£å¸¸å¸‚åœºæ¡ä»¶ä¸‹ï¼Œæœ‰95%çš„æ¦‚ç‡è¯¥æŠ•èµ„ç»„åˆåœ¨æ¥ä¸‹æ¥çš„ä¸€å¤©å†…çš„æŸå¤±ä¸ä¼šè¶…è¿‡100ä¸‡ã€‚</p><p>VaR çš„ä¼˜ç‚¹åœ¨äºå…¶ç®€æ´æ€§å’Œç›´è§‚æ€§ï¼Œä½¿å¾—ç®¡ç†å±‚å¯ä»¥å¿«é€Ÿç†è§£å¹¶é‡‡å–ç›¸åº”çš„é£é™©å¯¹å†²æªæ–½ã€‚</p><h2 id="è®¡ç®—è¿‡ç¨‹"><a href="#è®¡ç®—è¿‡ç¨‹" class="headerlink" title="è®¡ç®—è¿‡ç¨‹"></a>è®¡ç®—è¿‡ç¨‹</h2><p>åœ¨ CTRM ç³»ç»Ÿä¸­ï¼ŒVaR çš„è®¡ç®—é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><strong>æ•°æ®å‡†å¤‡</strong>ï¼šæ”¶é›†å†å²ä»·æ ¼ã€äº¤æ˜“å¤´å¯¸ã€å¸‚åœºå› å­ç­‰æ•°æ®ã€‚</li><li><strong>æ”¶ç›Šç‡è®¡ç®—</strong>ï¼šæ ¹æ®å†å²ä»·æ ¼æ•°æ®è®¡ç®—èµ„äº§æˆ–æŠ•èµ„ç»„åˆçš„å†å²æ”¶ç›Šç‡ã€‚</li><li><strong>é€‰æ‹©ç½®ä¿¡æ°´å¹³</strong>ï¼šé€šå¸¸ä½¿ç”¨ 95% æˆ– 99% çš„ç½®ä¿¡æ°´å¹³ã€‚</li><li><strong>é€‰æ‹©è®¡ç®—æ–¹æ³•</strong>ï¼šå¸¸ç”¨çš„ VaR æ–¹æ³•åŒ…æ‹¬æ–¹å·®-åæ–¹å·®æ³•ã€å†å²æ¨¡æ‹Ÿæ³•å’Œè’™ç‰¹å¡ç½—æ¨¡æ‹Ÿæ³•ã€‚</li><li><strong>æ‰§è¡Œè®¡ç®—</strong>ï¼šæ ¹æ®æ‰€é€‰æ–¹æ³•è®¡ç®— VaR å€¼ã€‚</li><li><strong>ç»“æœåˆ†æ</strong>ï¼šè¯„ä¼° VaR æŒ‡æ ‡æ˜¯å¦ç¬¦åˆä¼ä¸šé£é™©å®¹å¿åº¦ï¼Œå¹¶åšå‡ºç›¸åº”å†³ç­–ã€‚</li></ol><h3 id="æ–¹å·®-åæ–¹å·®æ³•ï¼ˆVariance-Covariance-Methodï¼‰"><a href="#æ–¹å·®-åæ–¹å·®æ³•ï¼ˆVariance-Covariance-Methodï¼‰" class="headerlink" title="æ–¹å·®-åæ–¹å·®æ³•ï¼ˆVariance-Covariance Methodï¼‰"></a>æ–¹å·®-åæ–¹å·®æ³•ï¼ˆVariance-Covariance Methodï¼‰</h3><p>è¿™ç§æ–¹æ³•å‡è®¾èµ„äº§æ”¶ç›Šç‡æœä»æ­£æ€åˆ†å¸ƒï¼Œé€šè¿‡è®¡ç®—æŠ•èµ„ç»„åˆçš„æ³¢åŠ¨ç‡å’Œç›¸å…³æ€§çŸ©é˜µæ¥ä¼°ç®— VaRã€‚</p><h3 id="å†å²æ¨¡æ‹Ÿæ³•ï¼ˆHistorical-Simulationï¼‰"><a href="#å†å²æ¨¡æ‹Ÿæ³•ï¼ˆHistorical-Simulationï¼‰" class="headerlink" title="å†å²æ¨¡æ‹Ÿæ³•ï¼ˆHistorical Simulationï¼‰"></a>å†å²æ¨¡æ‹Ÿæ³•ï¼ˆHistorical Simulationï¼‰</h3><p>è¯¥æ–¹æ³•ç›´æ¥ä½¿ç”¨å†å²æ•°æ®æ¥æ¨¡æ‹Ÿæœªæ¥å¯èƒ½çš„ä»·æ ¼å˜åŠ¨ï¼Œå¹¶åŸºäºè¿™äº›æ¨¡æ‹Ÿå€¼è®¡ç®— VaRã€‚</p><h3 id="è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿæ³•ï¼ˆMonte-Carlo-Simulationï¼‰"><a href="#è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿæ³•ï¼ˆMonte-Carlo-Simulationï¼‰" class="headerlink" title="è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿæ³•ï¼ˆMonte Carlo Simulationï¼‰"></a>è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿæ³•ï¼ˆMonte Carlo Simulationï¼‰</h3><p>é€šè¿‡éšæœºæŠ½æ ·å’Œæ¦‚ç‡æ¨¡å‹æ¨¡æ‹Ÿå¤§é‡å¯èƒ½çš„å¸‚åœºæƒ…æ™¯ï¼Œä»è€Œä¼°ç®— VaRã€‚</p><h2 id="æ•°å­¦å…¬å¼"><a href="#æ•°å­¦å…¬å¼" class="headerlink" title="æ•°å­¦å…¬å¼"></a>æ•°å­¦å…¬å¼</h2><h3 id="æ–¹å·®-åæ–¹å·®æ³•çš„-VaR-å…¬å¼"><a href="#æ–¹å·®-åæ–¹å·®æ³•çš„-VaR-å…¬å¼" class="headerlink" title="æ–¹å·®-åæ–¹å·®æ³•çš„ VaR å…¬å¼"></a>æ–¹å·®-åæ–¹å·®æ³•çš„ VaR å…¬å¼</h3><p>å¯¹äºä¸€ä¸ªå•ä¸€èµ„äº§çš„æŠ•èµ„ç»„åˆï¼ŒVaR å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><ul><li><strong>å…¬å¼</strong>ï¼š$\text{VaR} &#x3D; Z_{\alpha} \times \sigma \times \sqrt{T} \times V$</li></ul><p>å…¶ä¸­ï¼š</p><ul><li>$ Z_{\alpha} $ï¼šæ ‡å‡†æ­£æ€åˆ†å¸ƒä¸‹å¯¹åº”äºç½®ä¿¡æ°´å¹³ $ \alpha $ çš„åˆ†ä½æ•°ï¼ˆå¦‚ 95% ç½®ä¿¡æ°´å¹³å¯¹åº”çš„ $ Z_{0.95} \approx 1.645 $ï¼‰</li><li>$ \sigma $ï¼šèµ„äº§çš„æ³¢åŠ¨ç‡ï¼ˆæ ‡å‡†å·®ï¼‰</li><li>$ T $ï¼šæŒæœ‰æœŸï¼ˆé€šå¸¸ä¸º 1 å¤©ï¼‰</li><li>$ V $ï¼šæŠ•èµ„ç»„åˆçš„ä»·å€¼</li></ul><p>å¯¹äºå¤šèµ„äº§æŠ•èµ„ç»„åˆï¼Œéœ€è¦è€ƒè™‘èµ„äº§ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œå…¬å¼å˜ä¸ºï¼š</p><ul><li><strong>å…¬å¼</strong>ï¼š$\text{VaR} &#x3D; Z_{\alpha} \times \sqrt{\mathbf{w}^\top \Sigma \mathbf{w}} \times \sqrt{T} \times V$</li></ul><p>å…¶ä¸­ï¼š</p><ul><li>$ \mathbf{w} $ï¼šå„èµ„äº§æƒé‡å‘é‡</li><li>$ \Sigma $ï¼šèµ„äº§æ”¶ç›Šç‡çš„åæ–¹å·®çŸ©é˜µ</li></ul><h2 id="æ³¢åŠ¨ç‡è®¡ç®—"><a href="#æ³¢åŠ¨ç‡è®¡ç®—" class="headerlink" title="æ³¢åŠ¨ç‡è®¡ç®—"></a>æ³¢åŠ¨ç‡è®¡ç®—</h2><p>æ³¢åŠ¨ç‡ï¼ˆVolatilityï¼‰é€šå¸¸ç”¨æ”¶ç›Šç‡çš„æ ‡å‡†å·®æ¥è¡¡é‡ã€‚è®¡ç®—æ³¢åŠ¨ç‡çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><h3 id="æ­¥éª¤-1ï¼šè·å–å†å²ä»·æ ¼æ•°æ®"><a href="#æ­¥éª¤-1ï¼šè·å–å†å²ä»·æ ¼æ•°æ®" class="headerlink" title="æ­¥éª¤ 1ï¼šè·å–å†å²ä»·æ ¼æ•°æ®"></a>æ­¥éª¤ 1ï¼šè·å–å†å²ä»·æ ¼æ•°æ®</h3><p>å‡è®¾æˆ‘ä»¬æœ‰è¿‡å» n å¤©çš„æ”¶ç›˜ä»·æ•°æ®ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">P_1</span></span>, P_2, ..., P_n<br></code></pre></td></tr></table></figure><h3 id="æ­¥éª¤-2ï¼šè®¡ç®—æ¯æ—¥æ”¶ç›Šç‡"><a href="#æ­¥éª¤-2ï¼šè®¡ç®—æ¯æ—¥æ”¶ç›Šç‡" class="headerlink" title="æ­¥éª¤ 2ï¼šè®¡ç®—æ¯æ—¥æ”¶ç›Šç‡"></a>æ­¥éª¤ 2ï¼šè®¡ç®—æ¯æ—¥æ”¶ç›Šç‡</h3><p>ä½¿ç”¨å¯¹æ•°æ”¶ç›Šç‡å…¬å¼è¿›è¡Œè®¡ç®—ï¼š</p><p>$$<br>R_i &#x3D; \ln\left(\frac{P_i}{P_{i-1}}\right)<br>$$</p><p>å…¶ä¸­ $ R_i $ è¡¨ç¤ºç¬¬ i å¤©çš„å¯¹æ•°æ”¶ç›Šç‡ã€‚</p><h3 id="æ­¥éª¤-3ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡"><a href="#æ­¥éª¤-3ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡" class="headerlink" title="æ­¥éª¤ 3ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡"></a>æ­¥éª¤ 3ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡</h3><p>$$<br>\bar{R} &#x3D; \frac{1}{n} \sum_{i&#x3D;1}^{n} R_i<br>$$</p><h3 id="æ­¥éª¤-4ï¼šè®¡ç®—æ”¶ç›Šç‡æ ‡å‡†å·®ï¼ˆæ³¢åŠ¨ç‡ï¼‰"><a href="#æ­¥éª¤-4ï¼šè®¡ç®—æ”¶ç›Šç‡æ ‡å‡†å·®ï¼ˆæ³¢åŠ¨ç‡ï¼‰" class="headerlink" title="æ­¥éª¤ 4ï¼šè®¡ç®—æ”¶ç›Šç‡æ ‡å‡†å·®ï¼ˆæ³¢åŠ¨ç‡ï¼‰"></a>æ­¥éª¤ 4ï¼šè®¡ç®—æ”¶ç›Šç‡æ ‡å‡†å·®ï¼ˆæ³¢åŠ¨ç‡ï¼‰</h3><p>$$<br>\sigma &#x3D; \sqrt{\frac{1}{n-1} \sum_{i&#x3D;1}^{n} (R_i - \bar{R})^2}<br>$$</p><p>è¯¥æ ‡å‡†å·®å³ä¸ºèµ„äº§çš„æ—¥æ³¢åŠ¨ç‡ã€‚å¦‚æœè¦è®¡ç®— T å¤©çš„æ³¢åŠ¨ç‡ï¼Œåˆ™å¯ä¹˜ä»¥ $ \sqrt{T} $ï¼š</p><p>$$<br>\sigma_T &#x3D; \sigma \times \sqrt{T}<br>$$</p><h3 id="ç¤ºä¾‹ï¼šæ³¢åŠ¨ç‡è®¡ç®—"><a href="#ç¤ºä¾‹ï¼šæ³¢åŠ¨ç‡è®¡ç®—" class="headerlink" title="ç¤ºä¾‹ï¼šæ³¢åŠ¨ç‡è®¡ç®—"></a>ç¤ºä¾‹ï¼šæ³¢åŠ¨ç‡è®¡ç®—</h3><p>å‡è®¾æŸèµ„äº§è¿‡å» 5 å¤©çš„æ”¶ç›˜ä»·å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æ—¥æœŸ</th><th>æ”¶ç›˜ä»·ï¼ˆPï¼‰</th></tr></thead><tbody><tr><td>Day 1</td><td>100</td></tr><tr><td>Day 2</td><td>102</td></tr><tr><td>Day 3</td><td>101</td></tr><tr><td>Day 4</td><td>105</td></tr><tr><td>Day 5</td><td>103</td></tr></tbody></table><h4 id="ç¬¬ä¸€æ­¥ï¼šè®¡ç®—å¯¹æ•°æ”¶ç›Šç‡"><a href="#ç¬¬ä¸€æ­¥ï¼šè®¡ç®—å¯¹æ•°æ”¶ç›Šç‡" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šè®¡ç®—å¯¹æ•°æ”¶ç›Šç‡"></a>ç¬¬ä¸€æ­¥ï¼šè®¡ç®—å¯¹æ•°æ”¶ç›Šç‡</h4><ul><li>Day 2: $ \ln(102&#x2F;100) &#x3D; 0.0198 $</li><li>Day 3: $ \ln(101&#x2F;102) &#x3D; -0.0099 $</li><li>Day 4: $ \ln(105&#x2F;101) &#x3D; 0.0392 $</li><li>Day 5: $ \ln(103&#x2F;105) &#x3D; -0.0190 $</li></ul><h4 id="ç¬¬äºŒæ­¥ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡"><a href="#ç¬¬äºŒæ­¥ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡"></a>ç¬¬äºŒæ­¥ï¼šè®¡ç®—å¹³å‡æ”¶ç›Šç‡</h4><p>$$<br>\bar{R} &#x3D; \frac{0.0198 + (-0.0099) + 0.0392 + (-0.0190)}{4} &#x3D; 0.007525<br>$$</p><h4 id="ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—æ ‡å‡†å·®"><a href="#ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—æ ‡å‡†å·®" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—æ ‡å‡†å·®"></a>ç¬¬ä¸‰æ­¥ï¼šè®¡ç®—æ ‡å‡†å·®</h4><p>$$<br>\sigma &#x3D; \sqrt{\frac{(0.0198 - 0.007525)^2 + (-0.0099 - 0.007525)^2 + (0.0392 - 0.007525)^2 + (-0.0190 - 0.007525)^2}{4}} &#x3D; 0.0207<br>$$</p><p>å› æ­¤ï¼Œè¯¥èµ„äº§çš„æ—¥æ³¢åŠ¨ç‡ä¸º <strong>2.07%</strong>ã€‚</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="ç¤ºä¾‹-1ï¼šæ–¹å·®-åæ–¹å·®æ³•"><a href="#ç¤ºä¾‹-1ï¼šæ–¹å·®-åæ–¹å·®æ³•" class="headerlink" title="ç¤ºä¾‹ 1ï¼šæ–¹å·®-åæ–¹å·®æ³•"></a>ç¤ºä¾‹ 1ï¼šæ–¹å·®-åæ–¹å·®æ³•</h3><p>å‡è®¾æŸå…¬å¸æŒæœ‰ä¸€ä¸ªä»·å€¼ä¸º $1,000,000 çš„è‚¡ç¥¨æŠ•èµ„ç»„åˆï¼Œå·²çŸ¥è¯¥è‚¡ç¥¨çš„æ—¥æ³¢åŠ¨ç‡ä¸º 2%ï¼Œç½®ä¿¡æ°´å¹³ä¸º 95%ï¼ŒæŒæœ‰æœŸä¸º 1 å¤©ã€‚</p><h4 id="è¾“å…¥å‚æ•°ï¼š"><a href="#è¾“å…¥å‚æ•°ï¼š" class="headerlink" title="è¾“å…¥å‚æ•°ï¼š"></a>è¾“å…¥å‚æ•°ï¼š</h4><ul><li>æŠ•èµ„ç»„åˆä»·å€¼ $ V &#x3D; 1,000,000 $</li><li>æ³¢åŠ¨ç‡ $ \sigma &#x3D; 0.02 $</li><li>ç½®ä¿¡æ°´å¹³ $ \alpha &#x3D; 0.95 $ï¼ŒæŸ¥è¡¨å¾— $ Z_{0.95} &#x3D; 1.645 $</li><li>æŒæœ‰æœŸ $ T &#x3D; 1 $</li></ul><h4 id="VaR-è®¡ç®—ï¼š"><a href="#VaR-è®¡ç®—ï¼š" class="headerlink" title="VaR è®¡ç®—ï¼š"></a>VaR è®¡ç®—ï¼š</h4><p>$$<br>\text{VaR} &#x3D; 1.645 \times 0.02 \times \sqrt{1} \times 1,000,000 &#x3D; 32,900<br>$$</p><p>è¿™æ„å‘³ç€ï¼Œåœ¨ 95% çš„ç½®ä¿¡æ°´å¹³ä¸‹ï¼Œè¯¥æŠ•èµ„ç»„åˆåœ¨ 1 å¤©å†…çš„æœ€å¤§æ½œåœ¨æŸå¤±ä¸è¶…è¿‡ $32,900ã€‚</p><h3 id="ç¤ºä¾‹-2ï¼šå†å²æ¨¡æ‹Ÿæ³•"><a href="#ç¤ºä¾‹-2ï¼šå†å²æ¨¡æ‹Ÿæ³•" class="headerlink" title="ç¤ºä¾‹ 2ï¼šå†å²æ¨¡æ‹Ÿæ³•"></a>ç¤ºä¾‹ 2ï¼šå†å²æ¨¡æ‹Ÿæ³•</h3><p>å‡è®¾æˆ‘ä»¬æœ‰è¿‡å» 100 å¤©çš„æ”¶ç›Šç‡æ•°æ®å¦‚ä¸‹ï¼ˆå•ä½ï¼š%ï¼‰ï¼š</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-string">-1</span>.2, <span class="hljs-string">-0</span>.8, <span class="hljs-string">-1</span>.5, <span class="hljs-string">-0</span>.5, <span class="hljs-string">-0</span>.3, ..., 0.4, 0.6, 0.9<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†è¿™äº›æ”¶ç›Šç‡æŒ‰å‡åºæ’åˆ—ï¼Œå¹¶æ‰¾åˆ°ç¬¬ 5 ä¸ªæœ€å°çš„æ”¶ç›Šç‡ï¼ˆå› ä¸º 95% ç½®ä¿¡æ°´å¹³æ„å‘³ç€å‰ 5% æœ€åæƒ…å†µï¼‰ï¼Œå‡è®¾ä¸º -2.1%ã€‚</p><p>å¦‚æœå½“å‰æŠ•èµ„ç»„åˆä»·å€¼ä¸º $1,000,000ï¼Œåˆ™ VaR ä¸ºï¼š</p><p>$$<br>\text{VaR} &#x3D; 1,000,000 \times 0.021 &#x3D; 21,000<br>$$</p><p>è¿™è¡¨æ˜ï¼Œåœ¨ 95% çš„ç½®ä¿¡æ°´å¹³ä¸‹ï¼Œè¯¥æŠ•èµ„ç»„åˆåœ¨ 1 å¤©å†…çš„æœ€å¤§æ½œåœ¨æŸå¤±ä¸º $21,000ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>VaR å¹¿æ³›åº”ç”¨äº CTRM ç³»ç»Ÿä¸­çš„ä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li><strong>å¸‚åœºé£é™©ç›‘æ§</strong>ï¼šå®æ—¶ç›‘æ§å•†å“ä»·æ ¼æ³¢åŠ¨å¯¹æŠ•èµ„ç»„åˆçš„å½±å“ã€‚</li><li><strong>äº¤æ˜“é™é¢è®¾å®š</strong>ï¼šæ ¹æ® VaR æŒ‡æ ‡è®¾å®šäº¤æ˜“å‘˜çš„é£é™©é™é¢ã€‚</li><li><strong>å‹åŠ›æµ‹è¯•</strong>ï¼šæ¨¡æ‹Ÿæç«¯å¸‚åœºæ¡ä»¶ä¸‹çš„æ½œåœ¨æŸå¤±ã€‚</li><li><strong>åˆè§„æŠ¥å‘Š</strong>ï¼šæ»¡è¶³ç›‘ç®¡æœºæ„å¯¹é£é™©æŠ«éœ²çš„è¦æ±‚ã€‚</li><li><strong>å¯¹å†²ç­–ç•¥åˆ¶å®š</strong>ï¼šå¸®åŠ©åˆ¶å®šåˆé€‚çš„å¯¹å†²ç­–ç•¥ä»¥é™ä½é£é™©æ•å£ã€‚</li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨ CTRM ç³»ç»Ÿä¸­å¼•å…¥ VaR æŒ‡æ ‡ï¼Œæœ‰åŠ©äºä¼ä¸šæ›´å¥½åœ°ç†è§£å’Œç®¡ç†å¸‚åœºé£é™©ã€‚é€šè¿‡åˆç†çš„ VaR è®¡ç®—æ–¹æ³•ï¼ˆå¦‚æ–¹å·®-åæ–¹å·®æ³•ã€å†å²æ¨¡æ‹Ÿæ³•æˆ–è’™ç‰¹å¡ç½—æ¨¡æ‹Ÿæ³•ï¼‰ï¼Œä¼ä¸šå¯ä»¥åœ¨é¢å¯¹ä¸ç¡®å®šæ€§æ—¶åšå‡ºæ›´æ˜æ™ºçš„å†³ç­–ã€‚</p><p>å¦‚æœæ‚¨éœ€è¦è¿›ä¸€æ­¥äº†è§£å¦‚ä½•åœ¨ CTRM ç³»ç»Ÿä¸­å®ç° VaR çš„è‡ªåŠ¨åŒ–è®¡ç®—æˆ–æ‰©å±•æ›´å¤šåŠŸèƒ½ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼</p>]]></content>
    
    
    <categories>
      
      <category>CTRM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VaR</tag>
      
      <tag>CTRM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¢æ¼±æºŸï¼šåšå­¦é—®çš„å…«ä¸ªå¢ƒç•Œ</title>
    <link href="/2025/05/27/p-1/"/>
    <url>/2025/05/27/p-1/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¢æ¼±æºŸï¼šåšå­¦é—®çš„å…«ä¸ªå¢ƒç•Œ"><a href="#æ¢æ¼±æºŸï¼šåšå­¦é—®çš„å…«ä¸ªå¢ƒç•Œ" class="headerlink" title="æ¢æ¼±æºŸï¼šåšå­¦é—®çš„å…«ä¸ªå¢ƒç•Œ"></a>æ¢æ¼±æºŸï¼šåšå­¦é—®çš„å…«ä¸ªå¢ƒç•Œ</h1><p><em>1928å¹´åœ¨å¹¿å·ä¸­å±±å¤§å­¦çš„è®²æ¼”</em></p><blockquote><p>æ¥æºï¼šåŒ—äº¬æ—¥æŠ¥ ä½œè€…ï¼šæ¢æ¼±æºŸ<br>æ—¶é—´ï¼š2013å¹´11æœˆ5æ—¥</p></blockquote><hr><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨åº§å„ä½ï¼Œä»Šå¤©æ‰¿ä¸­å±±å¤§å­¦å“²å­¦ä¼šè¯·æˆ‘æ¥æ¼”è®²ï¼Œå¾ˆè£å¹¸ã€‚ä»Šå¤©é¢„å¤‡è®²çš„é¢˜ç›®è™½ç„¶å¯»å¸¸ï¼Œå´ææœ‰è´Ÿå¤§å®¶çš„ç››æ„ã€‚è¿™ä¸ªé¢˜ç›®ä¸å¦‚è¯´æ˜¯â€”â€”<strong>â€œæˆ‘å¦‚ä½•èµ°ä¸Šåšå­¦é—®è¿™æ¡è·¯â€</strong>ã€‚</p><p>æˆ‘è®²è¿™ä¸ªé¢˜ç›®æœ‰ä¸¤ç‚¹æ„ä¹‰ï¼š</p><ol><li>åˆæ¬¡è§é¢ï¼Œæƒ³å€Ÿæ­¤æœºä¼šä»‹ç»è‡ªå·±ï¼Œæ¾„æ¸…ä¸€äº›å¯¹æˆ‘çš„è¯¯ä¼šã€‚</li><li>å€Ÿæ­¤æœºä¼šï¼ŒæŠŠæˆ‘å¿ƒé‡Œè®¤ä¸ºæœ€è¦ç´§çš„äº‹è®²ä¸€è®²ï¼Œç®—æ˜¯å¯¹å“²å­¦ç³»çš„ä¸€ç‚¹è´¡çŒ®ã€‚</li></ol><hr><h2 id="æˆ‘ä¸æ˜¯å­¦é—®å®¶"><a href="#æˆ‘ä¸æ˜¯å­¦é—®å®¶" class="headerlink" title="æˆ‘ä¸æ˜¯å­¦é—®å®¶"></a>æˆ‘ä¸æ˜¯å­¦é—®å®¶</h2><p>æˆ‘æ ¹æœ¬ä¸æ˜¯å­¦é—®å®¶ï¼ä¸è®ºè¥¿å­¦è¿˜æ˜¯å›½å­¦ï¼Œå·¥å…·å’Œæ ¹åŸºéƒ½ä¸å…·å¤‡ã€‚æˆ‘åªæ˜¯ä¸ªä¸­å­¦æ¯•ä¸šç”Ÿã€‚</p><p>æˆ‘ä¸æ˜¯æœ‰æ„æ±‚å­¦é—®ï¼Œä¹Ÿä¸æ›¾æƒ³è¿‡å­¦å“²å­¦ï¼Œçº¯å±æ— æ„ä¹‹ä¸­ï¼Œèµ°ä¸Šäº†è¿™æ¡è·¯ã€‚</p><hr><h2 id="ä¸ºä»€ä¹ˆè¦è°ˆå“²å­¦ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦è°ˆå“²å­¦ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è°ˆå“²å­¦ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦è°ˆå“²å­¦ï¼Ÿ</h2><p>æˆ‘è®¤ä¸ºå“²å­¦**â€œå°½äººåº”å­¦ä¹‹å­¦â€ï¼Œä½†ä¸æ˜¯â€œå°½äººå¯å­¦ä¹‹å­¦â€**ã€‚</p><p>å“²å­¦çš„éš¾ç‚¹åœ¨äºï¼š</p><ul><li><strong>æ™®éè€Œç‰¹æ®Š</strong>ï¼šäººäººéƒ½æ¥è§¦ï¼Œä½†éäººäººèƒ½è§£ã€‚</li><li><strong>æ·±è¿œè€Œå½“ä¸‹</strong>ï¼šé—®é¢˜ææ·±ï¼Œå´è¿‘åœ¨çœ¼å‰ã€‚</li><li><strong>éç§¯ç´¯èƒ½æˆ</strong>ï¼šä¸æ˜¯å‹¤å¥‹å°±è¡Œï¼Œè€Œéœ€å¤©èµ‹ã€‚</li></ul><hr><h2 id="æˆ‘èµ°çš„è¿™æ¡â€œå­¦é—®è·¯â€"><a href="#æˆ‘èµ°çš„è¿™æ¡â€œå­¦é—®è·¯â€" class="headerlink" title="æˆ‘èµ°çš„è¿™æ¡â€œå­¦é—®è·¯â€"></a>æˆ‘èµ°çš„è¿™æ¡â€œå­¦é—®è·¯â€</h2><p>ä¸‹é¢æˆ‘å°±æ¥è¯´æ˜ï¼Œæˆ‘å¦‚ä½•åœ¨æ— æ„ä¸­èµ°ä¸Šä¸€æ¡â€œåšå­¦é—®â€çš„é“è·¯ï¼Œè¿™æ¡è·¯å¤§è‡´åˆ†ä¸º <strong>å…«ä¸ªå±‚æ¬¡</strong>ï¼š</p><hr><h3 id="ä¸€ã€å› ä¸ºè‚¯ç”¨å¿ƒæ€ï¼Œæ‰€ä»¥æœ‰ä¸»è§"><a href="#ä¸€ã€å› ä¸ºè‚¯ç”¨å¿ƒæ€ï¼Œæ‰€ä»¥æœ‰ä¸»è§" class="headerlink" title="ä¸€ã€å› ä¸ºè‚¯ç”¨å¿ƒæ€ï¼Œæ‰€ä»¥æœ‰ä¸»è§"></a>ä¸€ã€å› ä¸ºè‚¯ç”¨å¿ƒæ€ï¼Œæ‰€ä»¥æœ‰ä¸»è§</h3><blockquote><p>â€œå“²å­¦ä¸Šçš„å¤–è¡Œï¼Œæ€»ä¸æ˜¯æç«¯æ´¾ã€‚â€ â€”â€” è©¹å§†å£«</p></blockquote><p>è‚¯ç”¨å¿ƒæ€ï¼Œå°±ä¼šå½¢æˆåˆ¤æ–­ã€‚å³ä¾¿æµ…è–„ï¼Œä¹Ÿæ˜¯<strong>è‡ªå·±çš„åˆ¤æ–­</strong>ã€‚</p><hr><h3 id="äºŒã€æœ‰ä¸»è§ï¼Œæ‰çŸ¥é“æ—äººçš„ä¸åŒ"><a href="#äºŒã€æœ‰ä¸»è§ï¼Œæ‰çŸ¥é“æ—äººçš„ä¸åŒ" class="headerlink" title="äºŒã€æœ‰ä¸»è§ï¼Œæ‰çŸ¥é“æ—äººçš„ä¸åŒ"></a>äºŒã€æœ‰ä¸»è§ï¼Œæ‰çŸ¥é“æ—äººçš„ä¸åŒ</h3><p>ä¸»è§ä¸€æœ‰ï¼Œå°±ä¼šæ„è¯†åˆ°ä¸ä»–äººçš„ä¸åŒï¼Œå¼•å‘æ€è€ƒï¼Œæ¿€å‘é—®é¢˜ã€‚è¿™æ‰æ˜¯å­¦é—®çš„å¼€ç«¯ã€‚</p><hr><h3 id="ä¸‰ã€æ­¤åçœ‹ä¹¦å¬è¯æ–¹èƒ½å¾—ç›Š"><a href="#ä¸‰ã€æ­¤åçœ‹ä¹¦å¬è¯æ–¹èƒ½å¾—ç›Š" class="headerlink" title="ä¸‰ã€æ­¤åçœ‹ä¹¦å¬è¯æ–¹èƒ½å¾—ç›Š"></a>ä¸‰ã€æ­¤åçœ‹ä¹¦å¬è¯æ–¹èƒ½å¾—ç›Š</h3><p>æœ‰äº†ä¸»è§ä¸é—®é¢˜ï¼Œå†çœ‹å‰äººçš„è¯ï¼Œæ‰èƒ½<strong>ä¸æ”¾è¿‡ä¸åŒä¹‹å¤„</strong>ï¼Œä¸æ–­å¸æ”¶ã€èä¼šè´¯é€šã€‚æ­¤æ—¶æ‰ç®—çœŸæ­£å¼€å§‹â€œä¼šè¯»ä¹¦â€ã€‚</p><hr><h3 id="å››ã€å­¦ç„¶åçŸ¥ä¸è¶³"><a href="#å››ã€å­¦ç„¶åçŸ¥ä¸è¶³" class="headerlink" title="å››ã€å­¦ç„¶åçŸ¥ä¸è¶³"></a>å››ã€å­¦ç„¶åçŸ¥ä¸è¶³</h3><p>é—®é¢˜å¤šäº†ã€ç”¨å¿ƒä¹…äº†ï¼Œå°±ä¼šå‘ç°<strong>è‡ªå·±çš„è‚¤æµ…</strong>ï¼Œå¹¶ç”Ÿå‡ºçœŸæ­£çš„<strong>è™šå¿ƒ</strong>ã€‚è¿™æ˜¯å­¦é—®è¿›å¢ƒçš„å…³é”®ã€‚</p><hr><h3 id="äº”ã€ç”±æµ…å…¥æ·±ï¼Œä¾¿èƒ½ä»¥ç®€å¾¡ç¹"><a href="#äº”ã€ç”±æµ…å…¥æ·±ï¼Œä¾¿èƒ½ä»¥ç®€å¾¡ç¹" class="headerlink" title="äº”ã€ç”±æµ…å…¥æ·±ï¼Œä¾¿èƒ½ä»¥ç®€å¾¡ç¹"></a>äº”ã€ç”±æµ…å…¥æ·±ï¼Œä¾¿èƒ½ä»¥ç®€å¾¡ç¹</h3><p>å½“å¿ƒä¸­å»ºç«‹äº†ç³»ç»Ÿï¼Œå°±èƒ½<strong>ä»¥ä¸€ä¸¤å¥è¯ç»Ÿæ‘„å…¨å±€</strong>ã€‚çœŸæ­£çš„å­¦é—®å®¶ï¼Œæ€»æ˜¯è¨€ç®€æ„èµ…ã€ä¸¾é‡è‹¥è½»ã€‚</p><hr><h3 id="å…­ã€çœŸå­¦é—®èƒ½ä½¿äººæœ‰â€œå—ç”¨â€"><a href="#å…­ã€çœŸå­¦é—®èƒ½ä½¿äººæœ‰â€œå—ç”¨â€" class="headerlink" title="å…­ã€çœŸå­¦é—®èƒ½ä½¿äººæœ‰â€œå—ç”¨â€"></a>å…­ã€çœŸå­¦é—®èƒ½ä½¿äººæœ‰â€œå—ç”¨â€</h3><p>å­¦é—®èƒ½è§£å†³å¿ƒä¸­é—®é¢˜ï¼Œæ‰èƒ½æˆä¸º<strong>è‡ªå·±å¯ä»¥è¿ç”¨</strong>çš„å­¦é—®ã€‚å¦åˆ™å³ä½¿è¯»å¾—å†å¤šä¹Ÿåªæ˜¯â€œè¡¨æ¼”â€ã€‚</p><hr><h3 id="ä¸ƒã€æ—äººå¾—å¤±é•¿çŸ­ï¼Œä¸€æœ›è€ŒçŸ¥"><a href="#ä¸ƒã€æ—äººå¾—å¤±é•¿çŸ­ï¼Œä¸€æœ›è€ŒçŸ¥" class="headerlink" title="ä¸ƒã€æ—äººå¾—å¤±é•¿çŸ­ï¼Œä¸€æœ›è€ŒçŸ¥"></a>ä¸ƒã€æ—äººå¾—å¤±é•¿çŸ­ï¼Œä¸€æœ›è€ŒçŸ¥</h3><p>è‡ªå·±ç»å†è¿‡ã€ç¿»æ»šè¿‡ï¼Œå°±èƒ½ä¸€æœ›è€ŒçŸ¥åˆ«äººçš„æ·±æµ…é«˜ä½ã€‚è¿™æ˜¯ä»çœŸå®ç»éªŒä¸­å¾—æ¥çš„åˆ¤æ–­åŠ›ã€‚</p><hr><h3 id="å…«ã€è‡ªå·±è¯´å‡ºçš„è¯ç²¾å·§é€è¾Ÿ"><a href="#å…«ã€è‡ªå·±è¯´å‡ºçš„è¯ç²¾å·§é€è¾Ÿ" class="headerlink" title="å…«ã€è‡ªå·±è¯´å‡ºçš„è¯ç²¾å·§é€è¾Ÿ"></a>å…«ã€è‡ªå·±è¯´å‡ºçš„è¯ç²¾å·§é€è¾Ÿ</h3><p>åˆ°æ­¤åœ°æ­¥ï¼Œæ¯ä¸€å¥è¯éƒ½<strong>æ™¶äº®é€è¾Ÿã€æ€ç²¾ç†ç†Ÿ</strong>ï¼Œå› ä¸ºå¿ƒä¸­å·²ç»æ²¡æœ‰æ¨¡ç³Šçš„åœ°æ–¹äº†ã€‚</p><hr><h2 id="æ€»ç»“ï¼šæˆ‘ä¸æ˜¯å­¦é—®äººï¼Œæˆ‘æ˜¯â€œé—®é¢˜ä¸­äººâ€"><a href="#æ€»ç»“ï¼šæˆ‘ä¸æ˜¯å­¦é—®äººï¼Œæˆ‘æ˜¯â€œé—®é¢˜ä¸­äººâ€" class="headerlink" title="æ€»ç»“ï¼šæˆ‘ä¸æ˜¯å­¦é—®äººï¼Œæˆ‘æ˜¯â€œé—®é¢˜ä¸­äººâ€"></a>æ€»ç»“ï¼šæˆ‘ä¸æ˜¯å­¦é—®äººï¼Œæˆ‘æ˜¯â€œé—®é¢˜ä¸­äººâ€</h2><p>è¿™å…«ä¸ªå¢ƒç•Œï¼Œä¸æ˜¯æˆ‘åˆ»æ„ä¸ºä¹‹ï¼Œè€Œæ˜¯æ— æ„ä¸­èµ°ä¸Šäº†è¿™æ¡â€œè¢«é—®é¢˜ç‰µç€èµ°â€çš„è·¯ã€‚</p><p>å‰å››å±‚æ˜¯æˆ‘çœŸå®èµ°è¿‡çš„ï¼Œåå››å±‚åªæ˜¯â€œåº¶å‡ æœ›è§â€ã€‚æˆ‘å§‹ç»ˆä¸æ˜¯å­¦é—®äººï¼Œä¹Ÿä¸æ˜¯äº‹åŠŸäººï¼Œæˆ‘å¤§æ¦‚æ˜¯ä¸€ä¸ªâ€”â€”<strong>â€œé—®é¢˜ä¸­äººâ€</strong>ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å­¦é—®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¢æ¼±æºŸ</tag>
      
      <tag>å­¦é—®</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
